/*! For license information please see idcta-1.min.js.LICENSE.txt */
!function(){var t={261:function(){(0,window.define)("idcta-v2/analytics",[],(function(){var t={},e=!0,n=!0,r={"idcta-1":{addUserOrigin:!0,getCookieInstance:!0,getIdFromCookie:!0,getUserDetailsFromCookie:!0,hasCookie:!0,initiateTokenRefresh:!0,Cta:!0,modifyPtrt:!0},"id-config":{getConfigAsync:!0},idCookie:{getInstance:!0},statusbar:{Statusbar:!0}};return t.setLoggingEnabled=function(t){e=t},t.withAnalytics=function(t,o,i){return function(){var a=r[t]&&r[t][o];n&&e&&!a&&document.dispatchEvent(new CustomEvent("bbc-user-event",{detail:{container:"id_cta_client_side",label:o,source:t}})),n=!1;var s=[].slice.apply(arguments),c=i.apply(this,s);return n=!0,c}},t}))},72:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(e,n,r){return(n=function(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}(0,window.define)("idcta-v2/apiUtils",["idcta-v2/es6-promise","idcta-v2/logger"],(function(t,e){var r={},o="account_sequence_id";function i(t,e){var n=e.substring(0,e.indexOf("=")+1);if(t.indexOf(n)>-1)return t;var r=t.split("#"),o=t.indexOf("?")>-1?"&":"?";return r.length>1?"".concat(r[0]+o+e,"#").concat(r[1]):t+o+e}return r.verifyEndpointUrl=function(t,n){try{if(!1!==n&&(n=!0),/https?:\/\/(((www|ssl)(\.int|\.test|\.stage)?)|(pal\.sandbox\.dev))\.bbc\.(co\.uk|com)/.test(t))return/(\.com|\.co\.uk)\/.+/.test(t)&&(t=t.split(/(\.com|\.co\.uk)\/.+/)[0]+t.split(/(\.com|\.co\.uk)\/.+/)[1]),t;var r="";"https"===t.slice(0,5)?(r+="".concat(n?"https://":"","ssl."),t.indexOf(".sandbox.")>-1&&(r+="sandbox.dev.")):(r+=n?"http://":"",t.indexOf(".sandbox.")>-1?r+="pal.sandbox.dev.":r+="www.");for(var o=["int","test","stage"],i=0;i<o.length;i+=1)t.indexOf(".".concat(o[i],"."))>-1&&(r+="".concat(o[i],"."));return/\.co\.uk/.test(t)?r+="bbc.co.uk":r+="bbc.com",r}catch(t){e.logCaughtError(t)}},r.alignTldWithHostname=function(t,n){try{var r=(n||window.location.hostname).split(/(\.com|\.co\.uk)$/)[1],o=t.split(/(\.com|\.co\.uk)\/.+/)[1];return o!==r&&void 0!==r&&(t=t.replace(o,r)),t}catch(t){e.logCaughtError(t)}},r.addQueryParameter=i,r.appendProductToCtaElement=function(t){var e="",n="",o="userOrigin=",a="context=",s=t.getAttribute("href");if(s&&(-1===s.indexOf(o)||-1===s.indexOf(a)))return r.getProductNameAsync().then((function(s){if(void 0!==s&&""!==s){e=o+s.userOrigin,n=a+s.context;var c=t.getAttribute("href"),u=r.parseUrl(c);if(u){var l=u.pathname;-1===u.pathname.indexOf("/")&&(l="/".concat(u.pathname)),t.setAttribute("href","".concat(u.protocol,"//").concat(u.host).concat(l).concat(i(i(u.search,e),n)).concat(u.hash))}}}))},r.appendQueryParameters=function(t,e){var r=t.split("#"),o=r[0],i=r[1],a=o.split("?"),s=a[1],c=n(n({},s?s.split("&").reduce((function(t,e){var n=e.split("="),r=n[0],o=n[1];return t[r]=o,t}),{}):{}),e),u=Object.keys(c).map((function(t){return"".concat(t,"=").concat(c[t])})).join("&"),l=u?"".concat(a[0],"?").concat(u):a[0];return i?"".concat(l,"#").concat(i):l},r.getProductNameAsync=function(){var t={context:"",userOrigin:""};return window.bbcpage&&window.bbcpage.getDestination?window.bbcpage.getDestination().then((function(e){return e?{context:e.replace(/_TEST$/i,"").replace(/_PS$/i,"").replace(/_GNL$/i,"").toLowerCase(),userOrigin:e}:t})):r.Promise.resolve(t)},r.Promise=function(){try{return"undefined"!=typeof Promise?Promise:t.Promise}catch(t){e.logCaughtError(t)}}(),r.loadUrlInHiddenIframe=function(t,n,o){try{return new r.Promise((function(i,a){e.logMessage("".concat('Creating iframe {src: "').concat(t,'", ')+"timeout: ".concat(n).concat(o?', expectedPostMessages: ["'.concat(o.join('", "'),'"]}'):"}"));var s=document.createElement("iframe");s.scrolling="no",s.frameborder="0",s.width="0px",s.height="0px",s.border="0px",s.style.display="none",s.style.frameBorder="0px",s.style.borderStyle="none";var c=null,u=function(){c&&clearTimeout(c),o&&r.removeEventListener("message",l),document.body.removeChild(s)},l=function(t){var n=t.message?"message":"data";if(t.origin.match(/\.bbc\.(co\.uk|com)(:[0-9]+)*$/)&&-1!==o.indexOf(t[n]))return e.logMessage('Iframe received message "'.concat(t[n],'", resolving')),u(),i(t[n]);e.logMessage('Iframe received unexpected message "'.concat(t[n],'", ignoring'))};o?r.addEventListener("message",l):s.onload=function(){return e.logMessage('Iframe with src "'.concat(t,'" loading complete')),u(),i()},n&&(c=setTimeout((function(){return e.logMessage("Iframe with src ".concat(t," timed out after ").concat(n," milli seconds")),u(),a()}),n)),s.src=t,document.body.appendChild(s)}))}catch(t){e.logCaughtError(t)}},r.addEventListener=function(t,e,n){r.addEventListenerTo(window,t,e,n)},r.addEventListenerTo=function(t,n,r,o){try{return t.addEventListener?t.addEventListener(n,r,o):(n="message"===n?"onmessage":n,t.attachEvent(n,r))}catch(t){e.logCaughtError(t)}},r.removeEventListener=function(t,e){r.removeEventListenerFrom(window,t,e)},r.removeEventListenerFrom=function(t,n,r){try{return t.removeEventListener?t.removeEventListener(n,r):(n="message"===n?"onmessage":n,t.detachEvent(n,r))}catch(t){e.logCaughtError(t)}},r.getEnvFromUrl=function(){try{var t=window.location.href;return t.indexOf(".sandbox.")>-1?".sandbox.dev":t.indexOf(".int.")>-1?".int":t.indexOf(".test.")>-1?".test":t.indexOf(".stage.")>-1?".stage":""}catch(t){e.logCaughtError(t)}},r.parseUrl=function(t){try{var n=document.createElement("a");return n.href=t,n.query=n.search?r.parseQueryString(n.search):{},n}catch(t){e.logCaughtError(t)}},r.parseQueryString=function(t){try{"?"===t.charAt(0)&&(t=t.substring(1));for(var n={},r=t.split("&"),o=0;o<r.length;o+=1){var i=r[o].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}return n}catch(t){e.logCaughtError(t)}},r.timestampInFuture=function(t){try{return t>(new Date).getTime()}catch(t){e.logCaughtError(t)}},r.timestampExpired=function(t){try{return t<(new Date).getTime()}catch(t){e.logCaughtError(t)}},r.generateFutureTimestamp=function(t){try{t=t||36e5;var n=new Date;return n.setTime(n.getTime()+t),n.getTime()}catch(t){e.logCaughtError(t)}},r.getStatusURL=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if("GREEN"!==e["foryou-flagpole"])return{statusURL:e.status_url,statusName:"settings"};var i=t.getUserDetailsFromCookie();if(o)return t.checkForYouEligibility(i,r)?{statusURL:e.foryou_url,statusName:"foryou"}:{statusURL:e.status_url,statusName:"settings"};var a=i.ps;if(e.forYouAllowlist&&e.forYouAllowlist.includes(a))return{statusURL:e.foryou_url,statusName:"foryou"};e["foryou-access-chance"]&&(n=e["foryou-access-chance"],n=Number(n));var s=i.pn&&i.pn<=n;return{statusURL:s?e.foryou_url:e.status_url,statusName:s?"foryou":"settings"}},e.logCaughtError=function(t){window.console&&t.message&&console.log(t)},e.logMessage=function(t){document.cookie.match(new RegExp("".concat("ckns_debugtoken","=([^;]+)")))&&(window.tokenRefeshLog=window.tokenRefeshLog||[],window.tokenRefeshLog.push(t))},r.generateHashValue=function(t){if(!t)return 0;var e=0;return t.split("").forEach((function(n,r){var o=t.charCodeAt(r);e=(e<<5>>>0)-e+o,e|=0,e>>>=0})),e=e%100+1,e=Math.abs(e)},r.generateUuid=function(){return window.crypto&&"function"==typeof window.crypto.randomUUID?window.crypto.randomUUID():Math.random().toString(36).slice(2)},r.removeSequenceId=function(){try{sessionStorage.removeItem(o)}catch(t){e.logCaughtError(t)}},r.getSequenceId=function(){try{return sessionStorage.getItem(o)||sessionStorage.setItem(o,r.generateUuid()),sessionStorage.getItem(o)}catch(t){return r.generateUuid()}},r}))},223:function(t,e,n){var r,o=window.define;function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}r=function(){function t(t){return"function"==typeof t}var e,r,o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=0,s=function(t,e){h[a]=t,h[a+1]=e,2===(a+=2)&&(r?r(p):b())},c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,d="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function g(){var t=setTimeout;return function(){return t(p,1)}}var h=new Array(1e3);function p(){for(var t=0;t<a;t+=2)(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0;a=0}var m,v,y,w,b=void 0;function _(t,e){var n=arguments,r=this,o=new this.constructor(E);void 0===o[C]&&H(o);var i,a=r._state;return a?(i=n[a-1],s((function(){return M(a,o,i,r._result)}))):N(r,o,t,e),o}function k(t){if(t&&"object"===i(t)&&t.constructor===this)return t;var e=new this(E);return T(e,t),e}d?b=function(){return process.nextTick(p)}:l?(v=0,y=new l(p),w=document.createTextNode(""),y.observe(w,{characterData:!0}),b=function(){w.data=v=++v%2}):f?((m=new MessageChannel).port1.onmessage=p,b=function(){return m.port2.postMessage(0)}):b=void 0===c?function(){try{var t=n(Object(function(){var t=new Error("Cannot find module 'vertx'");throw t.code="MODULE_NOT_FOUND",t}()));return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:g()}catch(t){return g()}}():g();var C=Math.random().toString(36).substring(16);function E(){}var I=void 0,A=1,L=2,U=new P;function x(t){try{return t.then}catch(t){return U.error=t,U}}function S(e,n,r){n.constructor===e.constructor&&r===_&&n.constructor.resolve===k?function(t,e){e._state===A?F(t,e._result):e._state===L?D(t,e._result):N(e,void 0,(function(e){return T(t,e)}),(function(e){return D(t,e)}))}(e,n):r===U?(D(e,U.error),U.error=null):void 0===r?F(e,n):t(r)?function(t,e,n){s((function(t){var r=!1,o=function(n,o){try{n.call(o,(function(n){r||(r=!0,e!==n?T(t,n):F(t,n))}),(function(e){r||(r=!0,D(t,e))}))}catch(t){return t}}(n,e,0,0,"Settle: ".concat(t._label||" unknown promise"));!r&&o&&(r=!0,D(t,o))}),t)}(e,n,r):F(e,n)}function T(t,e){var n,r;t===e?D(t,new TypeError("You cannot resolve a promise with itself")):(r=i(n=e),null===n||"object"!==r&&"function"!==r?F(t,e):S(t,e,x(e)))}function O(t){t._onerror&&t._onerror(t._result),j(t)}function F(t,e){t._state===I&&(t._result=e,t._state=A,0!==t._subscribers.length&&s(j,t))}function D(t,e){t._state===I&&(t._state=L,t._result=e,s(O,t))}function N(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+A]=n,o[i+L]=r,0===i&&t._state&&s(j,t)}function j(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?M(n,r,o,i):o(i);t._subscribers.length=0}}function P(){this.error=null}var R=new P;function M(e,n,r,o){var i,a,s,c,u=t(r);if(u){if(i=function(t,e){try{return t(e)}catch(t){return R.error=t,R}}(r,o),i===R?(c=!0,a=i.error,i.error=null):s=!0,n===i)return void D(n,new TypeError("A promises callback cannot return that same promise."))}else i=o,s=!0;n._state!==I||(u&&s?T(n,i):c?D(n,a):e===A?F(n,i):e===L&&D(n,i))}var B=0;function H(t){t[C]=B++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(E),this.promise[C]||H(this.promise),o(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?F(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&F(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}function q(t){this[C]=B++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(t,e){try{e((function(e){T(t,e)}),(function(e){D(t,e)}))}catch(e){D(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Y.prototype._enumerate=function(t){for(var e=0;this._state===I&&e<t.length;e++)this._eachEntry(t[e],e)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===k){var o=x(t);if(o===_&&t._state!==I)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===q){var i=new n(E);S(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===I&&(this._remaining--,t===L?D(r,n):this._result[e]=n),0===this._remaining&&F(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;N(t,void 0,(function(t){return n._settledAt(A,e,t)}),(function(t){return n._settledAt(L,e,t)}))},q.all=function(t){return new Y(this,t).promise},q.race=function(t){var e=this;return o(t)?new e((function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},q.resolve=k,q.reject=function(t){var e=new this(E);return D(e,t),e},q._setScheduler=function(t){r=t},q._setAsap=function(t){s=t},q._asap=s,q.prototype={constructor:q,then:_,catch:function(t){return this.then(null,t)}},q.polyfill=function(){var t;if(void 0!==n.g)t=n.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=q},q.Promise=q,q},"object"===i(e)?t.exports=r():"function"==typeof o&&o.amd?o(r):this.ES6Promise=r()},345:function(){(0,window.define)("idcta-v2/fallbackConfig",["idcta-v2/apiUtils"],(function(t){return{register_url:"https://www".concat(t.getEnvFromUrl(),".bbc.co.uk/session?action=register&ptrt=").concat(window.location.href),signin_url:"https://www".concat(t.getEnvFromUrl(),".bbc.co.uk/session?ptrt=").concat(window.location.href),signout_url:"https://www".concat(t.getEnvFromUrl(),".bbc.com/signout?ptrt=").concat(window.location.href),status_url:"https://www".concat(t.getEnvFromUrl(),".bbc.com/account?ptrt=").concat(window.location.href),settings_url:"https://www".concat(t.getEnvFromUrl(),".bbc.com/account/settings?ptrt=").concat(window.location.href),tokenRefresh_url:"https://www".concat(t.getEnvFromUrl(),".bbc.co.uk/session?ptrt=https%3A%2F%2Fwww").concat(t.getEnvFromUrl(),".bbc.co.uk%2Fsession%2Fannounce"),tokenRefresh_signout_url:"https://www".concat(t.getEnvFromUrl(),".bbc.co.uk/session/signout?switchTld=true&ptrt=https%3A%2F%2Fwww").concat(t.getEnvFromUrl(),".bbc.co.uk%2Fsession%2Fannounce"),announce_url:"https://www".concat(t.getEnvFromUrl(),".bbc.co.uk/session/announce"),child_parent_linking_url:"https://www".concat(t.getEnvFromUrl(),".bbc.com/account/settings/linked-accounts"),privacy_settings_url:"https://www".concat(t.getEnvFromUrl(),".bbc.com/account/settings/privacy"),"bbcid-idp-userinfo":"","bbcid-idp-thirdparty":"","bbcid-idp-nma":"","bbcid-v5":"GREEN",idtranslations:{version:null},idpurl:"",identity:{cookieAgeDays:730,accessTokenCookieName:"ckns_atkn",idSignedInCookieName:"ckns_id",baseUrl:""},tokenRefresh:!0,fallback:!0}}))},815:function(){(0,window.define)("idcta-v2/fallbackTranslations",["idcta-v2/apiUtils"],(function(){return{translation_signedout:"Sign in",translation_signedin:"Your account",useOverlay:!1,ptrt:window.location.href,locale:null,policyname:null,fallback:!0}}))},719:function(){(0,window.define)("idcta-v2/id-config",["idcta-v2/config","idcta-v2/apiUtils"],(function(t,e){var n,r="co"===(n=window.location.host.split("."))[n.length-2]&&"uk"===n[n.length-1]?"".concat(n[n.length-3],".co.uk"):"".concat(n[n.length-2],".").concat(n[n.length-1]),o={},i=e.getProductNameAsync().then((function(n){var o={context:n.context,userOrigin:n.userOrigin};return{get announce_url(){return e.alignTldWithHostname(t.announce_url)},get"bbcid-v5"(){return t["bbcid-v5"]},get child_parent_linking_url(){return t.child_parent_linking_url},get"id-availability"(){return t["id-availability"]},get"foryou-flagpole"(){return t["foryou-flagpole"]},get"foryou-access-chance"(){return t["foryou-access-chance"]},get identity(){return{cookieAgeDays:t.identity.cookieAgeDays,accessTokenCookieName:t.identity.accessTokenCookieName,idSignedInCookieName:t.identity.idSignedInCookieName}},get identityTokenExchangeUrl(){return e.alignTldWithHostname(t.identityTokenExchangeUrl)},get privacy_settings_url(){return t.privacy_settings_url},get profiles_create_url(){return t.profiles.create},get profiles_list_url(){return t.profiles.list},get ptrt(){return window.location.href},get register_url(){return e.appendQueryParameters(e.alignTldWithHostname(t.register_url),o)},get settings_url(){return e.appendQueryParameters(t.settings_url,o)},get signin_url(){return e.appendQueryParameters(e.alignTldWithHostname(t.signin_url),o)},get signout_url(){return e.appendQueryParameters(t.signout_url,o)},get status_url(){return e.appendQueryParameters(t.status_url,o)},get foryou_url(){return e.alignTldWithHostname(t.foryou_url)},get forYouAllowlist(){return t.forYouAllowlist},get tld(){return r},get tokenRefresh(){return t.tokenRefresh||!1},get tokenRefresh_signout_url(){return e.alignTldWithHostname(t.tokenRefresh_signout_url)},get tokenRefresh_url(){return e.alignTldWithHostname(t.tokenRefresh_url)},get translation_signout(){return t.translations.statusbarSignOut},get translation_signedin(){return t.translations.statusbarSignedIn},get translation_signedout(){return t.translations.statusbarSignedOut},get translation_foryou(){return t.translations.statusbarForYou},get translation_profile_switcher_default_error(){return t.translations.profileSwitcherDefaultError},get translation_profile_switcher_try_again(){return t.translations.profileSwitcherTryAgain},get translation_profile_switcher_retry(){return t.translations.profileSwitcherRetry},get translation_profile_switcher_switch_user(){return t.translations.profileSwitcherSwitchUser},get translation_profile_switcher_add_child(){return t.translations.profileSwitcherAddChild},get translation_profile_switcher_account_settings(){return t.translations.profileSwitcherAccountSettings},get translation_profile_switcher_manage_account(){return t.translations.profileSwitcherManageAccount}}}));return o.getConfigAsync=function(){return i},o.getDomain=function(){return r},o.getIdentity=function(){return t.identity},o.getFeatureDecisions=function(){return t.features},o.getForYouAllowlist=function(){return t.forYouAllowlist},o.getUsiDestinationWhitelist=function(){return t.usiDestinationWhitelist},o.getExperiments=function(){return t.experiments},o}))},946:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}(0,window.define)("idcta-v2/idCookie",["idcta-v2/id-config","idcta-v2/logger","idcta-v2/analytics","idcta-v2/apiUtils"],(function(e,n,r,o){var i={},a=864e5;r.setLoggingEnabled(!1);var s,c=e.getDomain(),u=e.getIdentity()&&e.getIdentity().idSignedInCookieName?e.getIdentity().idSignedInCookieName:"ckns_id",l=e.getIdentity()&&e.getIdentity().cookieAgeDays?e.getIdentity().cookieAgeDays:730,d=e.getIdentity()&&e.getIdentity().accessTokenCookieName?e.getIdentity().accessTokenCookieName:"ckns_atkn";function f(t){try{var n,r=(n=e.getFeatureDecisions().welshUnicodeDecode?/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/.test(t)?window.atob(t):decodeURIComponent(atob(decodeURIComponent(t)).split("").map((function(t){return"%".concat("00".concat(t.charCodeAt(0).toString(16)).slice(-2))})).join("")):window.atob(t)).lastIndexOf("}"),o=n.substring(0,r+1);return JSON.parse(o)}catch(t){return null}}function g(){return e.getFeatureDecisions().welshUnicodeDecode?new RegExp("".concat(u,"=([^;]+)")):new RegExp("".concat(u,"=([\\w]+)"))}function h(t,e,r,o){try{e=e||"";var i="";if(r){var a=new Date;a.setTime(a.getTime()+r),i="Expires=".concat(a.toUTCString(),"; ")}e=o?window.btoa(e):e,document.cookie="".concat(t,"=").concat(e,"; ").concat(i,"Domain=").concat(c,"; Path=/")}catch(t){n.logCaughtError(t)}}function p(){var r=this;function i(t){return Object.prototype.hasOwnProperty.call(t,"ps")&&Object.prototype.hasOwnProperty.call(t,"jwt-exp")&&Object.prototype.hasOwnProperty.call(t,"tkn-exp")&&(t.hy||Object.prototype.hasOwnProperty.call(t,"ses-exp"))}function s(){r.valid=!1,r.id="",r.username="~",r.displayname="",r.timestamp=""}function p(){var t=g(),e=document.cookie.match(t);if(e){var n=f(e[1]);n&&i(n)&&!function(t){var e=(new Date).getTime();return(t["jwt-exp"]||0)<=e}(n)?(r.valid=!0,r.displayname=n.dn,r.timestamp=n["jwt-exp"]):s()}else s()}this.valid=!1,this.id="",this.username="~",this.displayname="",this.timestamp="",this.cookieAgeDays=l,this.isIdv5On=!0,this.refreshCookie=function(){try{p()}catch(t){n.logCaughtError(t)}},this.hasCookie=function(){try{return t=r.cookieAgeDays*a,(new Date).getTime()-r.timestamp>=t&&s(),r.valid}catch(t){n.logCaughtError(t)}var t},this.hasAccessTokenExpired=function(){try{var t=this.getUserDetailsFromCookie();if(!t)return!0;var e=(new Date).getTime();return(t["tkn-exp"]||0)<=e}catch(t){n.logCaughtError(t)}},this.hasJwtTokenExpired=function(){try{var t=this.getUserDetailsFromCookie();if(!t)return!0;var e=(new Date).getTime();return(t["jwt-exp"]||0)<=e}catch(t){n.logCaughtError(t)}},this.isHybridApp=function(){try{var t=this.getUserDetailsFromCookie();return t&&t.hy||!1}catch(t){n.logCaughtError(t)}},this.getError=function(){try{var t=this.getUserDetailsFromCookie();return t&&t.ec||null}catch(t){n.logCaughtError(t)}},this.getIdFromCookie=function(){try{var t=this.getUserDetailsFromCookie();return t?t.ps:null}catch(t){n.logCaughtError(t)}},this.getHidFromCookie=function(){return this.getCookie("ckns_sylphid")||this.getCookie("ckpf_sylphid")},this.getEmailDigest=function(){var e=this.getUserDetailsFromCookie();return e&&"object"===t(e.ed)?e.ed:null},this.getFedId=function(){var e=this.getUserDetailsFromCookie();return e&&"object"===t(e.fi)?e.fi:null},this.isPersonalisationEnabled=function(){try{var t=this.getUserDetailsFromCookie();return t&&t.ep}catch(t){return n.logCaughtError(t),!1}},this.getUserDetailsFromCookie=function(){try{if(!this.hasCookie())return null;var t=g(),e=document.cookie.match(t);if(!e)return null;var r=f(decodeURIComponent(e[1]).split("|").toString());return r&&i(r)?r:null}catch(t){n.logCaughtError(t)}},this.getNameFromCookie=function(){try{return this.hasCookie()&&r.displayname&&""!==r.displayname?r.displayname.replace(/\+/g," "):null}catch(t){n.logCaughtError(t)}},this.getRealmFromCookie=function(){try{return this.hasCookie()?this.getUserDetailsFromCookie().realm||"/":null}catch(t){n.logCaughtError(t)}},this.getAccessToken=function(){try{if(!this.hasCookie())return null;var t=new RegExp("".concat(d,"=([^;]*)")),e=document.cookie.match(t);return null!==e?e[1]:null}catch(t){n.logCaughtError(t)}},this.getCookie=function(t,e){try{var r=new RegExp("".concat(t,"=([^\\s;]*)")),o=document.cookie.match(r);return o?!0!==e?o[1]:f(decodeURIComponent(o[1])):null}catch(t){n.logCaughtError(t)}},this.setCknsIdCookieProperty=function(t,r){try{var o=this.getUserDetailsFromCookie();if(!o)return;if(r?o[t]=r:delete o[t],!e.getFeatureDecisions().fixCknsIdExpiry){var i=o["jwt-exp"]?o["jwt-exp"]:a*l;return void h(u,JSON.stringify(o),i,!0)}var s="number"==typeof o["rtkn-exp"]&&new Date(o["rtkn-exp"])-new Date||72e5;h(u,JSON.stringify(o),s,!0)}catch(t){n.logCaughtError(t)}},this.calculatePn=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(!(t=t||this.getUserDetailsFromCookie()))return 0;var i=e.getFeatureDecisions(),a="gb"===t.cc;i.forYouGeoIp&&(a=r);var s=t.pn||0,c=!this.getCookie("ckns_profile")&&"u13"!==t.ab&&t.ep&&a;return c&&!s?(s=o.generateHashValue(t.ps),this.setCknsIdCookieProperty("pn",s)):!c&&s&&(this.setCknsIdCookieProperty("pn"),s=0),s}catch(t){console.log("err: ",t),n.logCaughtError(t)}},this.checkForYouEligibility=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var o=e.getFeatureDecisions();if(!t)return!1;var i="gb"===t.cc;return o.forYouGeoIp&&(i=r),!this.getCookie("ckns_profile")&&"u13"!==t.ab&&t.ep&&i}catch(t){console.log("err: ",t),n.logCaughtError(t)}},this.unsetCookie=function(t){try{document.cookie="".concat(t,"=; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Domain=").concat(c,"; Path=/")}catch(t){n.logCaughtError(t)}},p()}return r.setLoggingEnabled(!0),i.getInstance=function(){try{return s?(s.refreshCookie(),s):s=new p}catch(t){n.logCaughtError(t)}},i.setInstance=function(t){try{s=t}catch(t){n.logCaughtError(t)}},i}))},170:function(){(0,window.define)("idcta-v2/idcta-1",["idcta-v2/idCookie","idcta-v2/apiUtils","idcta-v2/tokenRefresh","idcta-v2/logger","idcta-v2/analytics"],(function(t,e,n,r,o){var i={signals:{},ctas:{}};return o.setLoggingEnabled(!1),o.setLoggingEnabled(!0),i.Cta=function(e){try{this.id=e.id,this.element=document.getElementById(e.id),this.states=e.states;var n=this;i.ctas[n.id]=n,!0===e.publiclyCacheable&&(t.getInstance().hasCookie()?function(e){if(e.states.authorised){var n=t.getInstance().getNameFromCookie(),r=e.states.authorised.anonymous;n&&(r=e.states.authorised.name.replace("{name}",n)),e.element.getElementsByTagName("span")[0].innerText=r}else e.element.parentNode&&e.element.parentNode.removeChild(e.element)}(n):n.element.getElementsByTagName("span")[0].innerText=n.states.unauthorised.signedout)}catch(t){r.logCaughtError(t)}},i.modifyCta=function(t,n,o){try{var i=document.querySelector("#".concat(t," span"));["small","medium","large"].indexOf(n)>-1&&(i.className=i.className.replace(/small|medium|large/g,n)),["blue","white"].indexOf(o)>-1&&(i.className=i.className.replace(/blue|white/g,o));var a=document.querySelectorAll("#".concat(t," span a"));Object.keys(a).forEach((function(t){Object.prototype.hasOwnProperty.call(a,t)&&e.appendProductToCtaElement(a[t])}))}catch(t){r.logCaughtError(t)}},i.modifyPtrt=function(t,n){try{var o=document.querySelectorAll("#".concat(t," a"));if(0===o.length)throw"No cta elements found with provided Id";Object.keys(o).forEach((function(t){if(Object.prototype.hasOwnProperty.call(o,t)){var r=o[t].getAttribute("href"),i=decodeURIComponent(r).match(/ptrt=([a-zA-Z://_\\0-9.-]*)&?/).pop();i=encodeURIComponent(i);var a=r.substring(0,r.indexOf(i)),s=r.substring(r.indexOf(i)+i.length);o[t].setAttribute("href",a+n+s),e.appendProductToCtaElement(o[t])}}))}catch(t){r.logCaughtError(t)}},i.addUserOrigin=function(t){var n=document.querySelectorAll("#".concat(t)),r=function(){e.appendProductToCtaElement(this)};if(0!==n.length)for(var o=0;o<n.length;o+=1)for(var i=n[o].getElementsByTagName("a"),a=0;a<i.length;a+=1)e.addEventListenerTo(i[a],"click",r,!1)},i.initiateTokenRefresh=function(t,e){try{return t=!0===t,n.refreshAccessToken(t,e)}catch(t){r.logCaughtError(t)}},i.initiateUserUplift=function(){try{return i.initiateTokenRefresh().then((function(){return!0}),(function(){throw!1}))}catch(t){r.logCaughtError(t)}},i.hasCookie=function(){return t.getInstance().hasCookie()},i.getCookieInstance=function(){return t.getInstance()},i.getIdFromCookie=function(){return t.getInstance().getIdFromCookie()},i.getFedId=function(){return t.getInstance().getFedId()},i.getUserDetailsFromCookie=function(){return t.getInstance().getUserDetailsFromCookie()},i.getNameFromCookie=function(){return t.getInstance().getNameFromCookie()},i.getAccessToken=function(e){return t.getInstance().getAccessToken(e)},i}))},481:function(t,e,n){var r;window.define,(r=n(847)).keys().forEach(r)},811:function(){(0,window.define)("idcta-v2/iplayer",["idcta-v2/idCookie"],(function(t){var e={shouldShowChildrensUpsell:function(){var e=t.getInstance().getUserDetailsFromCookie();if(!e)return!1;var n="o18"===e.ab,r=!e.ev,o=e.cl;return n&&r&&!o}};return e}))},49:function(){(0,window.define)("idcta-v2/logger",[],(function(){return{logCaughtError:function(t){window.console&&t.message&&console.log(t)},logMessage:function(t){document.cookie.match(new RegExp("".concat("ckns_debugtoken","=([^;]+)")))&&(window.tokenRefeshLog=window.tokenRefeshLog||[],window.tokenRefeshLog.push(t))}}}))},276:function(){(0,window.define)("idcta-v2/mvt",["idcta-v2/experiment-snippet","idcta-v2/logger"],(function(t,e){return window.optimizely=window.optimizely||[],{bucketUser:function(t){window.optimizely.push({type:"page",pageName:t});try{var n=window.optimizely.get("state").getExperimentStates({isActive:!0});Object.keys(n).forEach((function(t){var e=n[t];document.dispatchEvent(new CustomEvent("bbc-user-event",{detail:{label:"optimizely",type:"experiment",personalisation:{EXP:"".concat(e.experimentName,"::").concat(e.variation.name)}}}))}))}catch(t){e.logCaughtError(t)}},getVariantName:function(t){try{var e=window.optimizely.get("state").getExperimentStates({isActive:!0})[t];return e?e.variation.name:null}catch(t){return null}},sendAttributes:function(t){window.optimizely.push({type:"user",attributes:t})},sendEvent:function(t){window.optimizely.push({type:"event",eventName:t})}}}))},45:function(){(0,window.define)("idcta-v2/optional",["idcta-v2/logger"],(function(t){return{load:function(e,n,r){n([e],r,(function(e){var n=e.requireModules&&e.requireModules[0];t.logCaughtError("Could not load optional module: ".concat(n)),r(null)}))}}}))},707:function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}(0,window.define)("idcta-v2/profileSwitcher",["idcta-v2/idcta-1","idcta-v2/id-config","idcta-v2/apiUtils","idcta-v2/idCookie"],(function(e,n,r,o){var i,a,s,c,u,l,d,f={},g=!1,h=n.getFeatureDecisions();function p(){var t,e,n,r=(t=a.getBoundingClientRect(),e=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop,{bottom:t.bottom+n,left:t.left+e});i.style.top="".concat(r.bottom,"px"),i.style.left="".concat(r.left,"px")}function m(){var t=d.profiles_list_url;return fetch(t,{credentials:"include"}).then((function(t){return t.json()}))}function v(){s.classList.add("u-hidden")}function y(){v(),u.classList.remove("u-hidden")}function w(){var t=document.querySelector(".profile-switcher a:not(.profile-switcher__account-link), .profile-switcher button");t&&t.focus()}function b(t,e){return t.length<=e?t:"".concat(t.substring(0,e).trim(),"&hellip;")}function _(t){return"admin"===t}function k(t,e){var n=t.activeProfileId||"admin",i=_(n)?"adult-":"child-",a=t.permissions.create,s=[];if([{id:"admin",displayName:t.profileAdmin.displayName,email:t.profileAdmin.email,username:t.profileAdmin.username}].concat(t.profiles).forEach((function(t){var a=t.displayName||t.username||t.email;t.primaryText=b(a,20),t.email&&t.displayName&&(t.secondaryText=b(t.email,27)),t.avatarLetter=function(t){return t.primaryText[0].toUpperCase()}(t),t.url=function(t,e){var n=r.appendQueryParameters(t.signin_url,{ptrt:encodeURIComponent(window.location.href)});return"".concat(n,"&switchTld=1&profileId=").concat(e.id)}(d,t),t.isActive=t.id===n;var c=_(t.id)?"adult":"child";if(t.actionName=i+c,_(t.id)&&t.isActive)if("GREEN"===d["foryou-flagpole"]){var u=o.getInstance();if(h.removeForYouAccessChanceCheck){var l=r.getStatusURL(u,d,void 0,e,!0),f=l.statusURL,g=l.statusName;t.settingsUrl=f,t.statusName=g}else{var p=u.getUserDetailsFromCookie();h.forYouGeoIp?u.calculatePn(p,e):u.calculatePn(p);var m=r.getStatusURL(u,d),v=m.statusURL,y=m.statusName;t.settingsUrl=v,t.statusName=y}}else t.settingsUrl=d.status_url;t.isActive?s.unshift(t):s.push(t)})),a){var c={primaryText:d.translation_profile_switcher_add_child,avatarIcon:"add-profile",url:d.profiles_create_url,actionName:"add-profile"};s.push(c)}return s}function C(t){var e;t.isActive?(e=document.createElement("div")).classList.add("profile-switcher__list-item--active"):((e=document.createElement("a")).href=t.url,e.setAttribute("data-bbc-container","switch-user"),e.setAttribute("data-bbc-title",t.actionName)),e.classList.add("profile-switcher__list-item");var n=document.createElement("div");n.classList.add("avatar"),n.classList.add("avatar--nona"),n.setAttribute("aria-hidden","true"),t.avatarLetter&&(n.innerHTML=t.avatarLetter),"add-profile"===t.avatarIcon&&(n.classList.add("avatar__icon"),n.classList.add("avatar__icon--add-profile")),e.appendChild(n);var r=document.createElement("div");if(r.classList.add("profile-switcher__wrapper"),e.appendChild(r),t.primaryText){var o=document.createElement("p");o.classList.add("profile-switcher__primary-text"),o.innerHTML=t.primaryText,r.appendChild(o)}if(t.secondaryText){var i=document.createElement("p");i.innerHTML=t.secondaryText,i.classList.add("profile-switcher__secondary-text"),r.appendChild(i)}if(t.settingsUrl){var a=document.createElement("a");t.settingsUrl=t.settingsUrl.includes("foryou?")?t.settingsUrl.split("?")[0]:t.settingsUrl,a.href=t.settingsUrl;var s=d.translation_profile_switcher_account_settings,c=d.translation_foryou;if("GREEN"===d["foryou-flagpole"]){a.innerHTML="foryou"===t.statusName?c:s;var u="foryou"===t.statusName?"foryou":"settings";a.classList.add("profile-switcher__".concat(u))}else a.innerHTML=d.translation_profile_switcher_account_settings,a.classList.add("profile-switcher__settings");var l=document.createElement("div");l.appendChild(a),r.appendChild(l)}var f=document.createElement("li");return f.appendChild(e),f}function E(t){t.map(C).forEach((function(t){c.appendChild(t)}))}function I(){if(g=!0,h.forYouGeoIp){var e=[m(),window&&window.bbcuser&&window.bbcuser.isUKCombined()];return Promise.all(e).then((function(e){var n,r,o=(r=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return k(o[0],o[1])})).then(E).then(v).catch(y).then(w)}return m().then(k).then(E).then(v).catch(y).then(w)}function A(){return p(),i.classList.toggle("u-visible"),g?w():I()}return f.init=function(){a=document.querySelector("#idcta-link");var t=e.getCookieInstance(),r=t.getUserDetailsFromCookie(),o=t.getCookie("ckns_profile",!0),f=r&&"o18"===r.ab;if((o||f)&&a)return n.getConfigAsync().then((function(t){d=t,function(t){(i=document.createElement("div")).classList.add("profile-switcher"),i.setAttribute("role","dialog");var e=document.createElement("div");e.classList.add("profile-switcher__container"),i.appendChild(e);var n=document.createElement("p"),r="profile-switcher-heading";if(n.id=r,i.setAttribute("aria-labelledby",r),n.classList.add("profile-switcher__heading"),n.innerHTML=d.translation_profile_switcher_switch_user,e.appendChild(n),(s=document.createElement("div")).classList.add("profile-switcher__spinner"),s.classList.add("spinner"),i.appendChild(s),(c=document.createElement("ul")).classList.add("profile-switcher__list"),e.appendChild(c),t&&h.enableManageAccount){var o=document.createElement("div"),a=document.createElement("a");o.classList.add("profile-switcher__manage-account"),a.classList.add("profile-switcher__account-link"),a.innerHTML=d.translation_profile_switcher_manage_account,a.href=d.settings_url,o.appendChild(a),e.appendChild(o)}if(function(){(u=document.createElement("div")).classList.add("profile-switcher__error"),u.classList.add("u-hidden");var t=document.createElement("p");t.classList.add("profile-switcher__error-heading"),t.innerHTML=d.translation_profile_switcher_default_error,u.appendChild(t);var e=document.createElement("p");e.classList.add("profile-switcher__error-subheading"),e.innerHTML=d.translation_profile_switcher_try_again,u.appendChild(e),(l=document.createElement("button")).classList.add("profile-switcher__error-retry-button"),l.classList.add("button"),l.classList.add("button--small"),l.innerHTML=d.translation_profile_switcher_retry,u.appendChild(l),i.appendChild(u)}(),t){var f=document.createElement("div");f.classList.add("profile-switcher__footer"),i.appendChild(f);var g=document.createElement("a");g.href=d.tokenRefresh_signout_url,g.innerHTML=d.translation_signout,f.appendChild(g)}document.body.appendChild(i)}(f),window.addEventListener("resize",p),a.href="#",a.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),A()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&i.classList.remove("u-visible")})),document.addEventListener("click",(function(t){var e=t.target===i,n=i.contains(t.target);e||n||i.classList.remove("u-visible")})),l.addEventListener("click",(function(){g=!1,u.classList.add("u-hidden"),s.classList.remove("u-hidden"),I()}))}))},f.toggle=A,f}))},325:function(){(0,window.define)("idcta-v2/signInPrompt",["idcta-v2/mvt","idcta-v2/id-config","idcta-v2/es6-promise","idcta-v2/apiUtils"],(function(t,e,n,r){var o={},i="ckns_usip",a=e.getFeatureDecisions();function s(t){var e="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===e.length)return e.pop().split(";").shift()}function c(t,e,n){t.addEventListener("keydown",(function(r){if(r.target===t&&9===r.keyCode&&(void 0===e||r.shiftKey===e))return r.preventDefault(),n(r)}))}function u(e){var n,o,i,s,u;(n=document.getElementById("edr_survey"))&&(n.style.display="none"),o=e.css,(i=document.createElement("link")).type="text/css",i.rel="stylesheet",i.href=o,document.head.appendChild(i),s=e.html,(u=document.createElement("div")).className="usi-overlay",u.id="usiOverlay",u.innerHTML=s,document.body.appendChild(u);var l,d,f,g,h,p,m,v=document.getElementById("usiModalSignIn"),y=document.getElementById("usiModalRegister");if(a.enableSequenceId){var w=r.appendQueryParameters(v.getAttribute("href"),{sequenceId:r.getSequenceId()});v.setAttribute("href",w);var b=r.appendQueryParameters(y.getAttribute("href"),{sequenceId:r.getSequenceId()});y.setAttribute("href",b)}d=y,c(l=v,!0,(function(){d.focus()})),c(d,!1,(function(){l.focus()})),v.addEventListener("click",(function(){t.sendEvent("prompt_sign_in_click")})),y.addEventListener("click",(function(){t.sendEvent("prompt_register_click")})),window.usiOverlay.style.display="block",window.usiOverlay.style.zIndex=1050,f=v,p=window.scrollX,m=window.scrollY,f.focus({preventScroll:!0}),g=p,h=m,window.scrollTo(g,h)}function l(t){var e=Date.now(),n=new Date(e+24192e5),r=Math.round(2419200),o=encodeURIComponent("counter-".concat(t,"-lastView-").concat(e));document.cookie="".concat(i,"=").concat(o,"; path=/; expires=").concat(n,"; max-age=").concat(r),document.dispatchEvent(new CustomEvent("usiCookieChanged"))}function d(t){return Date.now()-18e5<t}return o.initialise=function(r,o,a){if(a&&"prompt-not-shown-after-two-weeks"!==a)return n.resolve().then((function(){return function(n,r,o){var a;if(s(i)){var c=(a=s(i).split("-"),{counter:parseInt(a[1],10),lastView:parseInt(a[3],10)});if("index"===n&&(d(c.lastView)?l(c.counter):l(1)),"article"===n&&d(c.lastView))if(function(e,n,r){var o={product:n};5===e&&(o.seen_prompt_5=!0,t.sendEvent("prompt_viewed_5")),"prompt-viewed-after-5-articles"===r?t.sendAttributes(o):e>=3&&(o.seen_prompt_3=!0,t.sendEvent("prompt_viewed_3"),t.sendAttributes(o))}(c.counter,r,o),c.counter<{control:5,"prompt-viewed-after-3-articles":3,"prompt-viewed-after-5-articles":5}[o])c.counter+=1,l(c.counter);else{var f="control"===o;if(l(c.counter),!f)return function(t){if(window.fetch)return e.getConfigAsync().then((function(e){var n=e.ptrt,r="".concat(window.idctaBaseUrl,"/idcta/modal?ptrt=").concat(n,"&context=").concat(t);return fetch(r).then((function(t){return t.json()})).then((function(t){u(t),document.dispatchEvent(new CustomEvent("bbc-user-event",{detail:{container:"id-cta",label:"id-cta-prompt-usi",metadata:{"id-cta-type":"usi-prompt"},source:"responsive_web"}}))}))}))}(r)}}else"index"===n&&(t.sendAttributes({seen_prompt_3:!1,seen_prompt_5:!1}),l(1))}(o,r,a)})).catch((function(t){console.error("Caught error in IDCTA signInPrompt module",t)}))},o.hasInitialised=function(){return Boolean(s(i))},o}))},586:function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}(0,window.define)("idcta-v2/statusbar",["idcta-v2/idCookie","idcta-v2/id-config","idcta-v2/logger","idcta-v2/analytics","idcta-v2/apiUtils"],(function(e,n,r,o,i){var a={};function s(o,a){return Promise.all([n.getConfigAsync(),window.bbcuser.isUKCombined()]).then((function(r){var s=t(r,2),c=s[0],u=s[1],l=a.getNameFromCookie(),d=c.translation_signedin,f=o.element.className;if(l){var g=l.substring(0,1).toUpperCase();d=l,o.element.className="".concat(o.element.className," idcta-avatar"),o.ctaLink.setAttribute("userInitial",g)}if(o.element.className="".concat(o.element.className," idcta-signedin"),"GREEN"===c["foryou-flagpole"]){var h=n.getFeatureDecisions(),p=e.getInstance();if(h.welshUnicodeDecode&&!h.removeForYouAccessChanceCheck){var m=p.getUserDetailsFromCookie();p.calculatePn(m,u)}"foryou"===i.getStatusURL(p,c,void 0,u,h.removeForYouAccessChanceCheck).statusName&&(d=c.translation_foryou,!!document.getElementById("idcta-placeholder-id")||(o.element.className="".concat(f," idcta-foryou")),h.enableSequenceId&&i.removeSequenceId())}o.ctaName.innerText=d})).catch((function(t){r.logCaughtError(t)}))}return a.Statusbar=function(o){try{if(this.id=null,this.element=null,this.ctaLink=null,this.ctaName=null,function(t){return!(!document.getElementById(t.id)||!t.blq&&!document.getElementById("idcta-link")||t.blq&&!document.getElementById(t["link-id"]))}(o)){this.id=o.id,this.element=document.getElementById(o.id);var a=n.getFeatureDecisions();if(o.blq)this.ctaLink=document.getElementById(o["link-id"])?document.getElementById(o["link-id"]):this.element.getElementsByTagName("a")[0],this.ctaName=o["name-id"]?document.getElementById(o["name-id"]):this.element.getElementsByTagName("span")[1];else{this.ctaLink=document.getElementById("idcta-link");var c=t(this.element.getElementsByTagName("span"),1);this.ctaName=c[0]}document.getElementById("idcta-placeholder-id")&&this.ctaLink&&document.getElementById(o.id).classList.add("blue-user-icon");var u=this;!0===o.publiclyCacheable&&(e.getInstance().hasCookie()?a.forYouGeoIp?Promise.all([n.getConfigAsync(),window.bbcuser.isUKCombined()]).then((function(n){var r=t(n,2),o=r[0],c=r[1];if("GREEN"===o["foryou-flagpole"]){var l=e.getInstance();if(a.welshUnicodeDecode&&!a.removeForYouAccessChanceCheck){var d=l.getUserDetailsFromCookie();l.calculatePn(d,c)}var f=i.getStatusURL(l,o,void 0,c,a.removeForYouAccessChanceCheck).statusURL;f&&u.ctaLink.href!==f&&(u.ctaLink.href=f)}else o.status_url&&u.ctaLink.href!==o.status_url&&(u.ctaLink.href=o.status_url);s(u,e.getInstance())})):n.getConfigAsync().then((function(t){if("GREEN"===t["foryou-flagpole"]){var r=n.getFeatureDecisions(),o=e.getInstance(),a=o.getUserDetailsFromCookie(),c=a&&"gb"===a.cc;r.welshUnicodeDecode&&(r.removeForYouAccessChanceCheck||o.calculatePn(a,c));var l=i.getStatusURL(o,t,void 0,c,r.removeForYouAccessChanceCheck).statusURL;l&&u.ctaLink.href!==l&&(u.ctaLink.href=l)}else t.status_url&&u.ctaLink.href!==t.status_url&&(u.ctaLink.href=t.status_url);s(u,e.getInstance())})):n.getConfigAsync().then((function(t){t.signin_url&&(u.ctaLink.href=t.signin_url,a.enableSequenceId&&(u.ctaLink.href=i.appendQueryParameters(u.ctaLink.href,{sequenceId:i.getSequenceId()}))),u.ctaName.innerText=t.translation_signedout})))}var l=document.getElementById("idcta-statusbar"),d=document.getElementById("idcta-placeholder-id");l&&l.classList.add("opacity-one"),d&&d.classList.add("display-none")}catch(t){r.logCaughtError(t)}},a.updateForAuthorisedState=s,a}))},309:function(){(0,window.define)("idcta-v2/tokenRefresh",["idcta-v2/id-config","idcta-v2/idCookie","idcta-v2/apiUtils","idcta-v2/logger"],(function(t,e,n,r){var o={};function i(t,e){this.name="TokenRefreshError",this.message=t,this.retryAfter=e}function a(){this.name="InconsistentStateError",this.message="Inconsistent cookie state"}return i.prototype=Error.prototype,a.prototype=Error.prototype,{refreshAccessToken:function(s,c){var u=e.getInstance();try{if(!u.hasCookie())return n.Promise.reject(new i("ckns_id cookie is missing, invalid or expired"));if(u.isHybridApp())return n.Promise.reject(new i("hybrid app detected"));var l=u.getError();return l&&n.timestampInFuture(l.retryAfter)?n.Promise.reject(new i("retry period has not passed",l.retryAfter)):!0===s||u.hasAccessTokenExpired()?(void 0===o[c]&&(o[c]=t.getConfigAsync().then((function(t){var e=t.tokenRefresh_url;return function(t){return fetch(t,{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(t){if(401===t.status)throw new a;return t}))}(e=c?n.alignTldWithHostname(e,c):e)}))),o[c].then((function(){o[c]=void 0})).catch((function(n){return o[c]=void 0,function(n){return t.getConfigAsync().then((function(t){if("InconsistentStateError"===n.name&&window.URL){var r=new URL(t.tokenRefresh_signout_url);throw r.searchParams.set("ptrt",window.location.toString()),r.searchParams.set("reason","inconsistent-state"),window.location=r.toString(),n}var o=(new Date).getTime()+(t.tokenRefresh?15e3:36e5);throw n.retryAfter=o,e.getInstance().setCknsIdCookieProperty("ec",n),n}))}(n)}))):n.Promise.resolve()}catch(t){r.logCaughtError(t)}}}}))},847:function(t,e,n){var r={"./analytics.js":261,"./apiUtils.js":72,"./es6-promise.js":223,"./fallbackConfig.js":345,"./fallbackTranslations.js":815,"./id-config.js":719,"./idCookie.js":946,"./idcta-1.js":170,"./index.js":481,"./iplayer.js":811,"./logger.js":49,"./mvt.js":276,"./optional.js":45,"./profileSwitcher.js":707,"./signInPrompt.js":325,"./statusbar.js":586,"./tokenRefresh.js":309};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=847}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(481)}();
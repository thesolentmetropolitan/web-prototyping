!function(){var t={649:function(t){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function n(t){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(t)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function o(t,e){t.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function i(t){var e=t.g.offsetWidth,n=e+100;return t.j.style.width=n+"px",t.i.scrollLeft=n,t.h.scrollLeft=t.h.scrollWidth+100,t.l!==e&&(t.l=e,!0)}function r(t,n){function o(){var t=r;i(t)&&null!==t.g.parentNode&&n(t.l)}var r=t;e(t.h,o),e(t.i,o),i(t)}function a(t,e,n){e=e||{},n=n||window,this.family=t,this.style=e.style||"normal",this.weight=e.weight||"normal",this.stretch=e.stretch||"normal",this.context=n}var s=null,d=null,l=null,u=null;function c(t){return null===u&&(u=!!t.document.fonts),u}function f(t,e){var n=t.style,o=t.weight;if(null===l){var i=document.createElement("div");try{i.style.font="condensed 100px sans-serif"}catch(t){}l=""!==i.style.font}return[n,o,l?t.stretch:"","100px",e].join(" ")}a.prototype.load=function(t,e){var i=this,a=t||"BESbswy",l=0,u=e||3e3,m=(new Date).getTime();return new Promise(function(t,e){if(c(i.context)&&!function(t){return null===d&&(c(t)&&/Apple/.test(window.navigator.vendor)?(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!t&&603>parseInt(t[1],10)):d=!1),d}(i.context)){var h=new Promise(function(t,e){!function n(){(new Date).getTime()-m>=u?e(Error(u+"ms timeout exceeded")):i.context.document.fonts.load(f(i,'"'+i.family+'"'),a).then(function(e){1<=e.length?t():setTimeout(n,25)},e)}()}),p=new Promise(function(t,e){l=setTimeout(function(){e(Error(u+"ms timeout exceeded"))},u)});Promise.race([p,h]).then(function(){clearTimeout(l),t(i)},e)}else!function(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())})}(function(){function d(){var e;(e=-1!=b&&-1!=g||-1!=b&&-1!=v||-1!=g&&-1!=v)&&((e=b!=g&&b!=v&&g!=v)||(null===s&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=s&&(b==w&&g==w&&v==w||b==y&&g==y&&v==y||b==x&&g==x&&v==x)),e=!e),e&&(null!==E.parentNode&&E.parentNode.removeChild(E),clearTimeout(l),t(i))}var c=new n(a),h=new n(a),p=new n(a),b=-1,g=-1,v=-1,w=-1,y=-1,x=-1,E=document.createElement("div");E.dir="ltr",o(c,f(i,"sans-serif")),o(h,f(i,"serif")),o(p,f(i,"monospace")),E.appendChild(c.g),E.appendChild(h.g),E.appendChild(p.g),i.context.document.body.appendChild(E),w=c.g.offsetWidth,y=h.g.offsetWidth,x=p.g.offsetWidth,function t(){if((new Date).getTime()-m>=u)null!==E.parentNode&&E.parentNode.removeChild(E),e(Error(u+"ms timeout exceeded"));else{var n=i.context.document.hidden;!0!==n&&void 0!==n||(b=c.g.offsetWidth,g=h.g.offsetWidth,v=p.g.offsetWidth,d()),l=setTimeout(t,50)}}(),r(c,function(t){b=t,d()}),o(c,f(i,'"'+i.family+'",sans-serif')),r(h,function(t){g=t,d()}),o(h,f(i,'"'+i.family+'",serif')),r(p,function(t){v=t,d()}),o(p,f(i,'"'+i.family+'",monospace'))})})},t.exports=a}()},697:function(t){t.exports={getNavCount:function(){var t=document.getElementById("orb-banner"),e=0;if(t)for(var n=t.querySelectorAll("a"),o=0;o<n.length;o++){var i=n[o];null!==i.offsetParent&&"hidden"!==window.getComputedStyle(i).visibility&&!i.closest(".orb-skip-links")&&e++}return e}}},785:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var o=n(649);function i(t,e){var n=new o(t),i=new o(t,{weight:"bold"});return Promise.all([n.load(),i.load()]).then(function(){document.documentElement.className+=" ".concat(e)}).catch(function(e){console.error("Error loading ".concat(t," font: ").concat(e))})}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(t,e){if(0!==t.length){t.forEach(function(t){t.removeAttribute("data-v-group"),t.removeAttribute("data-v-item")});var n=function(t,e){return"global navigation"===e?t.filter(function(t){return null!==t.offsetParent&&"hidden"!==window.getComputedStyle(t).visibility&&!t.closest(".orb-skip-links")}):"more menu"===e?t.filter(function(t){return"button"!==t.getAttribute("role")&&"none"!==window.getComputedStyle(t.closest("nav")).display&&"none"!==window.getComputedStyle(t.closest("li")).display}):void 0}(t,e);n&&n.forEach(function(t,o){if(o++,function(t){return"button"!==t.getAttribute("role")}(t)){var i="idcta-link"===t.getAttribute("id")?"BBC Account":t.innerText,r=t.getAttribute("href");t.setAttribute("data-v-item",JSON.stringify({type:"link",text:i,link:r,position:o})),t.setAttribute("data-v-group",JSON.stringify({type:e,item_count:n.length})),t.setAttribute("data-bbc-ignore-views","true")}})}}var e=document.getElementById("orb-banner"),o=new MutationObserver(function(t){Array.from(t).forEach(function(t){var e=t.target;"role"===t.attributeName&&"button"===e.getAttribute("role")&&(e.removeAttribute("data-v-item"),e.removeAttribute("data-v-group"))})});e&&o.observe(e,{attributes:!0,subtree:!0});var i=n(697);function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var s,d=n(785).A,l=document.getElementById("orb-banner"),u=document.getElementById("orbit-more-drawer");function c(){l&&t(r(l.querySelectorAll("a")),"global navigation"),u&&t(r(u.querySelectorAll("a")),"more menu")}window.bbcuser.isUKCombined().then(function(t){if(!t){var e=document.getElementById("homepage-link");if(e){var n=e.getAttribute("href").replace(".bbc.co.uk",".bbc.com");e.setAttribute("href",n)}}if("#orbit-more-drawer"!==window.location.hash){var o=t?"orbit-domestic-yes":"orbit-domestic-no";["orb-banner","orbit-more-drawer","orb-footer"].forEach(function(t){var e=document.getElementById(t);e&&e.classList.add(o)})}window.additionalPageProperties.suppressView=window.orbitData.suppressView,document.dispatchEvent(new CustomEvent("bbc-page-reset",{detail:{page:{additionalProperties:window.additionalPageProperties}}})),c()}),window.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(function(){c(),window.bbcpage.updateAdditionalProperties({experience_global_nav_count:(0,i.getNavCount)().toString()}).catch(function(t){return console.error(t)})},250)}),Promise.all([window.bbcpage.isModal(),d("ReithSans","b-reith-sans-loaded")]).then(function(t){window.require.defined&&window.require.defined("orb/features/masthead/_layoutprimarynav")&&!t[0]&&window.require(["orb/features/masthead/_layoutprimarynav"],function(t){return t.recalculateLayout()})}),document.documentElement.className.includes("b-reith-serif-font")&&d("ReithSans","b-reith-serif-loaded")}()}();
//# sourceMappingURL=orbit.js.map
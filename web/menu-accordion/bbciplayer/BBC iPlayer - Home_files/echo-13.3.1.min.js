/*! For license information please see echo.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.echo_js=t():e.echo_js=t()}(self,function(){return function(){var e={137:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(6326),i=n(6419),r=!0,o=n(1835),a=n(8482),s=n(8382),u=n(7751),c=n(2688),l=n(3266),d=n(7342),p=n(7368),h=n(3729),_=n(6697),f=n(4027),E=n(138),g=n(5808),m=n(6964).Promise,v=36e5;function T(e,n,r,a,u){var c=this;r=r||{},i.assertContainsValue(d.ApplicationType,n,'appType should be one of Enums.ApplicationType, got "'+n+'"'),this.state={counterNameSet:!1};var l,p=T.ConfigGenerator.generate(r);if(this._env=null!=a?a:new T.Environment,setInterval(function(){c._remoteConfigManager=new s(r,c._env)},v),this._remoteConfigManager=new s(r,this._env),p&&(p[o.REMOTE_CONFIG_MANAGER]=this._remoteConfigManager),p&&"string"==typeof p[o.ECHO_DEVICE_ID]&&((l=i.trim(p[o.ECHO_DEVICE_ID])).length>0?(p[o.ECHO_DEVICE_ID]=l,this._deviceId=l):p[o.ECHO_DEVICE_ID]=void 0),p&&"scorecardresearch.com"!==p[o.COMSCORE_HOST]&&!p[o.ECHO_DEVICE_ID]&&((l=E.getCookieValueByName("ckns_echo_device_id"))||(l=E.getCookieValueByName("ckpf_echo_device_id")),l&&(this._deviceId=l,p[o.ECHO_DEVICE_ID]=l)),p&&!1===p[o.ECHO_AUTO_START]?this._autoStart=!1:this._autoStart=!0,this._setConsumers(e,n,p,this._env),p&&p[o.USE_ESS]?this._essEnabled=!0:this._essEnabled=!1,p&&p[o.ESS_HOSTNAME]&&(f.essHost=p[o.ESS_HOSTNAME]),p&&!1===p[o.ECHO_ENABLED]?this._isEnabled=!1:this._isEnabled=!0,p)switch(p[o.DEBUG_MODE]){case!0:t.enable();break;case"error":t.enable(),t.setLevel(t.DebugLevels.ERROR);break;case"warn":t.enable(),t.setLevel(t.DebugLevels.WARN);break;case"info":t.enable(),t.setLevel(t.DebugLevels.INFO);break;default:t.disable()}this._liveBroker=null,this._onDemandBroker=null,this._suppressingPlayEvent=!1,this._suppressedPlayEventLabels=null,this.addLabel("bbc_id_wait","1"),g.getUser().then(function(e){var t;(this.removeLabel("bbc_id_wait"),e&&e.isSignedIn)&&(t=e.hashedId?encodeURIComponent(e.hashedId):"unidentified-user",this.addLabels({bbc_identity:"1",bbc_hid:t}))}.bind(this)),p&&p[o.ECHO_CACHE_MODE]&&(this._cacheMode=p[o.ECHO_CACHE_MODE]),this._atiDisableCookie=!!p&&!!p[o.ATI_DISABLE_COOKIE],this._isEnabled&&this._autoStart&&("function"==typeof u?this.start().then(u):this.start())}return T.prototype.getDebugMode=function(){return t.getState()},T.prototype.start=function(){var e;return this._isEnabled&&!this._hasStarted?(this._hasStarted=!0,g.get().then(function(t){e=t,this._delegate("start",[t])}.bind(this)).then(function(){e&&e.pageName&&""!==e.pageName&&"orb.page"!==e.pageName&&this.setCounterName(e.pageName)}.bind(this),function(e){t.error("failed to start delegates: "+e)})):m.reject()},T.prototype.enable=function(){return this._isEnabled||(this._isEnabled=!0,this._delegate("enable"),this._autoStart&&!this._hasStarted&&this.start()),this},T.prototype.disable=function(){return this._isEnabled&&(this._clearMedia(),this._isEnabled=!1,this._delegate("disable")),this},T.prototype.isEnabled=function(){return this._isEnabled},T.prototype.getComScoreDeviceId=function(){var e;return this.consumers[T.Consumers.COMSCORE]&&(e=this.consumers[T.Consumers.COMSCORE])instanceof T.ComScoreDelegate&&"function"==typeof e.getDeviceId?e.getDeviceId():null},T.prototype.getAtiDeviceId=function(){var e;return this.consumers[T.Consumers.ATI]&&(e=this.consumers[T.Consumers.ATI])instanceof T.AtiDelegate&&"function"==typeof e.getDeviceId?e.getDeviceId():null},T.prototype.getDeviceId=function(){return this._deviceId},T.prototype.setDeviceId=function(e){this._deviceId=e,this._delegate("setDeviceId",[e])},T.prototype.setTraceId=function(e){this._delegate("setTraceId",[e])},T.prototype.setPlayerPosition=function(e){},T.prototype.setPlayerSubtitleSize=function(e){},T.prototype.setPlayerSubtitleType=function(e){},T.prototype.setPlayerError=function(e){},T.prototype.setPlayerAutoMode=function(e){},T.prototype.setPlayerLaunchReason=function(e){},T.prototype.setPlayerQualityLevel=function(e){},T.prototype.setPlayerWindow=function(e){},T.prototype.setPlayerPlaybackSpeed=function(e){},T.prototype.avAdStart=function(e){},T.prototype.avAdClick=function(e){},T.prototype.avAdSkip=function(e){},T.prototype.setMediaPlayer=function(e){},T.prototype.avPlayInitiatedEvent=function(e,t){},T.ConfigGenerator=n(1982),T.LabelCleanser=n(7950),T.Util=n(6419),T.ComScoreDelegate=n(8341),T.SpringDelegate=n(8149),T.AtiDelegate=n(9229),T.Environment=n(6189),T.prototype._eventsEnabled=function(){return this._isEnabled&&this._hasStarted},T.prototype._setConsumers=function(e,t,n,i){this.consumers={};var r=T.LabelCleanser.cleanLabelValue("app_name",e);return n&&n[o.COMSCORE_ENABLED]&&(this.consumers[T.Consumers.COMSCORE]=new T.ComScoreDelegate(r,t,n,i)),n&&n[o.ATI_ENABLED]&&(this.consumers[T.Consumers.ATI]=new T.AtiDelegate(r,t,n,i)),n&&n[o.BARB_ENABLED]&&(this.consumers[T.Consumers.BARB]=new T.SpringDelegate(r,t,n,i)),this},T.prototype._shouldClearDeviceIdOnLogOut=function(){return this._atiDisableCookie},T.prototype._delegate=function(e,t,n){var i,r,o=[];for(i in this.consumers)i&&(r=this.consumers[i],n&&r.requiresLabelCleansing()?o.push(r[e].apply(r,n)):o.push(r[e].apply(r,t)));return m.all(o)},T.prototype.addLabels=function(e){return this.addProperties(e)},T.prototype.addLabel=function(e,t){return this.addProperty(e,t)},T.prototype.addProperties=function(e){return e=T.LabelCleanser.removeUndefined(e),this._delegate("addProperties",[T.LabelCleanser.cleanLabels(e)]),this},T.prototype.addCampaignProperties=function(e){return(e=T.LabelCleanser.removeUndefined(e)).hasOwnProperty("src_channel")&&e.hasOwnProperty("src_medium")&&e.hasOwnProperty("src_campaign")?(this._delegate("addCampaignProperties",[e]),this):(t.error("Campaign properties must contain channel, medium, and campaign"),this)},T.prototype.addProperty=function(e,n){if("string"==typeof e){if(null!=n){var i={};return i[e]=n,this.addProperties(i)}t.error("Property cannot be null/undefined")}else t.error("Property key must be a string")},T.prototype.addManagedLabel=function(e,t){return this._delegate("addManagedLabel",[T.LabelCleanser.cleanLabelKey(e),T.LabelCleanser.cleanLabelValue(e,t)]),this},T.prototype.removeLabels=function(e){return this.removeProperties(e)},T.prototype.removeLabel=function(e){return this.removeProperty(e)},T.prototype.removeProperties=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(T.LabelCleanser.cleanLabelKey(e[n]));return this._delegate("removeProperties",[t]),this},T.prototype.removeProperty=function(e){return this.removeProperties([e])},T.prototype.setLoggedInToBBCId=function(e){return this._delegate("setLoggedInToBBCId",[e]),this},T.prototype.setLoggedOutOfBBCId=function(){return this._delegate("setLoggedOutOfBBCId"),this._shouldClearDeviceIdOnLogOut()&&(t.info("Clearing device id on logout"),this.setDeviceId(void 0)),this},T.prototype.setAppVersion=function(e){return this._delegate("setAppVersion",[e]),this},T.prototype.setDestination=function(e){return this._delegate("setDestination",[a.get(e)]),this},T.prototype.setProducer=function(e){return this._setProducer(e,!1)},T.prototype.setNationsProducer=function(e){var n=l.getName(e);void 0!==n?n&&n!==l.NONE?this.addProperty(d.EchoLabelKeys.NATIONS_PRODUCER,n):this.removeProperty(d.EchoLabelKeys.NATIONS_PRODUCER):t.info("Setting nations producer failed: nations producer "+e+" is not valid")},T.prototype.setProducerByMasterbrand=function(e){return this._setProducer(e,!0)},T.prototype._setProducer=function(e,n){var i,r,o;(r=this._remoteConfigManager.getProducers(),o=this._remoteConfigManager.getMasterbrands(),e&&"NULL"!==e.toUpperCase())?i=n?r&&o&&o[e]&&r[o[e]]?r[o[e]]:u.getProducerId(e):r&&r[e]?r[e]:c.getId(e):i="0";if(!i){var a=n?"Masterbrand":"Producer";t.warn(a+" ["+e+"] not recognised")}return i&&this._delegate("setProducer",[i]),this},T.prototype.setCounterName=function(e){var t=T.LabelCleanser.cleanCounterName(e),n=this._delegate("setCounterName",[e],[t]);return this.state.counterNameSet=!0,n},T.prototype.setContentLanguage=function(e){return this._delegate("setContentLanguage",[e]),this},T.prototype.setCacheMode=function(e){return this._delegate("setCacheMode",[e]),this._cacheMode=e,this},T.prototype.getCacheMode=function(){return this._cacheMode},T.prototype.clearCache=function(){this._isEnabled&&this._delegate("clearCache")},T.prototype.flushCache=function(){this._isEnabled&&this._delegate("flushCache")},T.prototype.viewEvent=function(e,t){if(this._eventsEnabled()){var n=T.LabelCleanser.cleanCounterName(e),i=T.LabelCleanser.cleanLabels(t);this.consumers[T.Consumers.COMSCORE]&&(this.state.comscoreEventSent=!0);var r=this._delegate("viewEvent",[e,t],[n,i]);return this.state.counterNameSet=!0,this.consumers[T.Consumers.COMSCORE]&&(this.state.comscoreEventSent=!0),r}},T.prototype.userActionEvent=function(e,n,i){if(this._eventsEnabled())return this.state.counterNameSet?(this._delegate("userActionEvent",[e,n,T.LabelCleanser.cleanLabels(i)]),this.consumers[T.Consumers.COMSCORE]&&(this.state.comscoreEventSent=!0),this):(t.error("Counter name must be set before a userActionEvent (via viewEvent or setCounterName)"),this)},T.prototype.errorEvent=function(e,t){if(this._eventsEnabled())return this._delegate("errorEvent",[e,T.LabelCleanser.cleanLabels(t)]),this},T.prototype.setPlayerName=function(e){i.assert("string"==typeof e&&e.length>0,'setPlayerName: name must be string with length, got "'+e+'"');var t=T.LabelCleanser.cleanLabelValue("player_name",e);return this._delegate("setPlayerName",[e],[t])},T.prototype.setPlayerVersion=function(e){i.assert("string"==typeof e&&e.length>0,'setPlayerVersion: version must be string with length, got "'+e+'"');var t=T.LabelCleanser.cleanLabelValue("player_version",e);return this._delegate("setPlayerVersion",[e],[t])},T.prototype.setPlayerIsPopped=function(e){return i.assert("boolean"==typeof e,'setPlayerIsPopped: isPopped must be boolean, got "'+e+'"'),this._delegate("setPlayerIsPopped",[e]),this},T.prototype.setPlayerWindowState=function(e){return i.assertContainsValue(d.WindowState,e,'The window state must be set as a member of Enums.WindowState, got "'+e+'"'),this._delegate("setPlayerWindowState",[e]),this},T.prototype.setPlayerVolume=function(e){return i.assert(e<=100&&e>=0,"volume must be 0-100, got: "+e),e<=100&&e>=0&&this._delegate("setPlayerVolume",[e]),this},T.prototype.setPlayerIsSubtitled=function(e){return i.assert("boolean"==typeof e,'setPlayerIsSubtitled: isSubtitled must be a boolean, got "'+e+'"'),this._delegate("setPlayerIsSubtitled",[e]),this},T.prototype.setPlayerDelegate=function(e){e=e||{};var t,n,r,o=["getTimestamp","getPosition"],a=!1;for(n=0;n<o.length;n++)t=o[n],r=e.hasOwnProperty(t)&&"function"==typeof e[t],i.assert(r,'The player delegate must implement "'+t+'"'),r||(a=!0);return a||(this._playerDelegate=e),this},T.prototype.setMedia=function(e){var n,i=this;if(this._eventsEnabled()){this._clearMedia();var r=e.getClone();if(this.state.counterNameSet){this.media=r,this.addLabel(_.ESS_ENABLED,this._essEnabled?"true":"false");var o=d.MediaConsumptionMode.LIVE;this.media.getMediaConsumptionMode()===o?this._initLiveBroker():this._initOnDemandBroker(),this.media.setRemoteProducers(this._remoteConfigManager.getProducers()),this.media.setRemoteMasterbrands(this._remoteConfigManager.getMasterbrands()),n||(n=setInterval(function(){i.media&&(i.media.setRemoteProducers(i._remoteConfigManager.getProducers()),i.media.setRemoteMasterbrands(i._remoteConfigManager.getMasterbrands()))},v)),this._delegate("setMedia",[this.media])}else t.error("setMedia: Must have a countername set or view event sent first")}},T.prototype.liveMediaUpdate=function(e,t,n){this._eventsEnabled()&&this._avEventsEnabled()&&e&&(this._suppressingPlayEvent=!1,this.media=e,this._delegate("liveMediaUpdate",[e,t,n]))},T.prototype.setMediaLength=function(e){return this.media?this.media.isOnDemand()?"number"!=typeof(e=this._cleanPosition(e))?(t.error("setMediaLength: Length must be a positive number"),this):(this._delegate("setMediaLength",[e]),this.media.setLength(e),this):(t.error("setMediaLength: Length should be set to zero prior to passing the media object to Echo for live media"),this):(t.error("setMediaLength: Must call setMedia first"),this)},T.prototype.setMediaBitrate=function(){},T.prototype.setMediaCodec=function(){},T.prototype.setMediaCDN=function(){},T.prototype.setEssSuccess=function(e){this.addLabel(_.ESS_SUCCESS,e?"true":"false")},T.prototype.setEssError=function(e,t){this.addLabel(_.ESS_ERROR,e.toString().toLowerCase()),void 0!==e&&e.toString()===d.EssError.STATUS_CODE.toString()&&this.addLabel(_.ESS_STATUS_CODE,t),this._delegate("liveEnrichmentFailed")},T.prototype._avEventsEnabled=function(){return i.assert(Boolean(this.media),"setMedia() must be called prior to this method",r)&&i.assert(Boolean(this._playerDelegate),"setPlayerDelegate not called or not configured correctly",r)},T.prototype.getLiveBroker=function(){return this._liveBroker},T.prototype._initLiveBroker=function(){this._avEventsEnabled()&&this.media.getMediaConsumptionMode()===d.MediaConsumptionMode.LIVE&&(this._liveBroker=new p(this._playerDelegate,this.media,this,this._env,this._essEnabled),this._delegate("setBroker",[this._liveBroker]))},T.prototype.getOnDemandBroker=function(){return this._onDemandBroker},T.prototype._initOnDemandBroker=function(){this._avEventsEnabled()&&this.media.getMediaConsumptionMode()!==d.MediaConsumptionMode.LIVE&&(this._onDemandBroker=new h(this._playerDelegate,this.media,this),this._delegate("setBroker",[this._onDemandBroker]))},T.prototype._cleanPosition=function(e){return null!=e&&(e=Math.floor(e)),(void 0===e||isNaN(e)||!isFinite(e)||e<0)&&(e=0),e},T.prototype.avPlayEvent=function(e,t){if(this._eventsEnabled()&&this._avEventsEnabled()){var n=this.media.isLive();if(this._isPlaying=!0,n&&this._liveBroker)e=this._liveBroker.getPosition(),this._liveBroker.start();else if(!n&&this._onDemandBroker){if(e=this._cleanPosition(e),this._previousPlayPosition=e,this._positionExceedsMediaLength(e))return;this._onDemandBroker.setPosition(e),this._onDemandBroker.start()}return n&&this.media.isEssEnriched()&&this._suppressingPlayEvent?this._suppressedPlayEventLabels=t:(this._delegate("avPlayEvent",[e,T.LabelCleanser.cleanLabels(t)]),this.media.setBuffering(!1),this.media.setPlaying(!0)),this.consumers[T.Consumers.COMSCORE]&&(this.state.comscoreEventSent=!0),this}},T.prototype._avNavigationEvent=function(e,t,n,i){this._avEventsEnabled()&&(this._isPlaying=!1,this.media.isLive()?(this._liveBroker&&(this._liveBroker.stop(),t=this._liveBroker.getPosition()),this.media.isEssEnriched()&&!this._suppressingPlayEvent&&(this._suppressingPlayEvent=!0)):this._onDemandBroker&&(t=this._cleanPosition(t),t=this._preventPositionExceedingMediaLength(t),this._onDemandBroker.stop()),"avRewindEvent"===e||"avFastForwardEvent"===e?this._delegate(e,[t,i,T.LabelCleanser.cleanLabels(n)]):this._delegate(e,[t,T.LabelCleanser.cleanLabels(n)]))},T.prototype.avPauseEvent=function(e,t){if(this._eventsEnabled()&&this._avEventsEnabled())return this.media.setPlaying(!1),this._avNavigationEvent("avPauseEvent",e,t),this},T.prototype.avBufferEvent=function(e,t){if(this._eventsEnabled()&&this._avEventsEnabled()&&this.media.getPlaying())return this.media.setPlaying(!1),this._avNavigationEvent("avBufferEvent",e,t),this.media.setBuffering(!0),this},T.prototype.avEndEvent=function(e,t){if(this._eventsEnabled()&&this._avEventsEnabled())return this.media.setPlaying(!1),this._avNavigationEvent("avEndEvent",e,t),this.media=null,this},T.prototype.avRewindEvent=function(e,t,n){if(this._eventsEnabled()&&this._avEventsEnabled())return this._avNavigationEvent("avRewindEvent",e,n,t),this},T.prototype.avFastForwardEvent=function(e,t,n){if(this._eventsEnabled()&&this._avEventsEnabled())return this._avNavigationEvent("avFastForwardEvent",e,n,t),this},T.prototype.avSeekEvent=function(e,t){if(this._eventsEnabled()&&this._avEventsEnabled())return this._avNavigationEvent("avSeekEvent",e,t),this},T.prototype.avUserActionEvent=function(e,t,n,i){if(this._eventsEnabled()&&this._avEventsEnabled()){this._liveBroker?n=this._liveBroker.getPosition():(n=this._cleanPosition(n),n=this._preventPositionExceedingMediaLength(n));var r=T.LabelCleanser.cleanLabels(i);return this._delegate("avUserActionEvent",[e,t,n,r]),this}},T.prototype.releaseSuppressedPlay=function(){if(this._eventsEnabled()&&this._avEventsEnabled())return this._suppressingPlayEvent&&(this._suppressingPlayEvent=!1,this.avPlayEvent(this._liveBroker.getPosition(),this._suppressedPlayEventLabels)),this},T.prototype._clearMedia=function(){this.removeLabel(_.MEDIA_TIMESTAMP),this.removeLabel(_.ESS_ENABLED),this.removeLabel(_.ESS_ENRICHED),this.removeLabel(_.ESS_SUCCESS),this.removeLabel(_.ESS_ERROR),this.removeLabel(_.ESS_STATUS_CODE),null!==this.media&&(this.media=null),this._liveBroker instanceof p&&(this._liveBroker.stop(),this._liveBroker=null),this._onDemandBroker instanceof h&&(this._onDemandBroker.stop(),this._onDemandBroker=null),this._isPlaying=void 0,this._previousPlayPosition=void 0},T.prototype._positionExceedsMediaLength=function(e){return!!(this.media&&this.media.length>0&&e>=this.media.length-1e3)},T.prototype._preventPositionExceedingMediaLength=function(e){return this._positionExceedsMediaLength(e)?this.media.length:e},T.Consumers={COMSCORE:1,BARB:2,ATI:4},T}.call(t,n,t,e))||(e.exports=i)},138:function(e,t,n){var i;void 0===(i=function(){"use strict";return{getCookieValueByName:function(e,t){var n=e+"=",i=(t||window).document,r={};if(void 0===i||"string"!=typeof i.cookie)return null;for(var o=0,a=(r=i.cookie.split(";")).length;o<a;o++){var s=r[o];if(" "===s.charAt(0)&&(s=s.substring(1,s.length)),0===s.indexOf(n))return s.substring(n.length,s.length)}return null}}}.call(t,n,t,e))||(e.exports=i)},204:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(6419),i=n(7950),r=function(e,t){this.idType=e,this.value=null,this.isSet=!1,this.isValid=!1,this.requiresValidation=t};return r.prototype.getIdType=function(){return this.idType},r.prototype.setValue=function(e){this.isSet=!0,null==e||"string"!=typeof e||0===e.length?(t.assert(!1,"MediaId: The value for "+this.idType+"Id is invalid",!0),this.isValid=!1):this.isValid=!0,this.value=i.cleanMediaId(e)},r.prototype.getValue=function(){return this.value},r.prototype.isValueSet=function(){return this.isSet},r.prototype.isValueValid=function(){return this.isValid},r.prototype._validateValue=function(e){return"string"==typeof e&&this.validValueRegex.test(e)},r}.call(t,n,t,e))||(e.exports=i)},225:function(e,t,n){var i;void 0===(i=function(){"use strict";function e(e,t){this.namespace=e,this.env=t}return e.prototype.preloadImage=function(e){return this.env.getHttpGet()(e)},e.prototype.getLocalStorageItem=function(e){return this.env.getGetLocalStorageItem()(e)},e.prototype.setLocalStorageItem=function(e,t){return this.env.getSetLocalStorageItem()(e,t)},e.prototype.getWindowLocationURL=function(){return this.env.getURL()},e}.call(t,n,t,e))||(e.exports=i)},567:function(e,t,n){var i;void 0===(i=function(){"use strict";return{httpGet:function(e,t,n){var i=new Image;i.onload=t,i.onerror=n,i.src=e},executeCrossDomainGet:function(e,t){var n,i,r;i=!1,r=!1;var o=function(e,n){t.onError&&t.onError(e,n)};if(window.JSON&&window.JSON.parse&&void 0!==window.XMLHttpRequest&&"withCredentials"in(n=new XMLHttpRequest)&&(r=!0),r){try{n.open("GET",e,!0),n.onload=function(){(void 0===n.status||n.status<400)&&null!==n.responseText?function(){var e;if(t.onSuccess){try{e=window.JSON.parse(n.responseText)}catch(e){o("json")}"object"==typeof e&&setTimeout(function(){t.onSuccess(e)})}}():o(n.responseText,n.status)},n.onerror=function(e){o(e)},n.timeout=1e4,n.ontimeout=function(e){o(e)}}catch(e){!function(e){i||o(e)}(e)}try{n.send(null)}catch(e){i=!0,n.onload=n.onerror=n.onreadystatechange=null,n.abort(),o(e)}}else o()}}}.call(t,n,t,e))||(e.exports=i)},1294:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(6326),i=n(3916),r=n(2491),o=n(7950),a=n(5419);return{APP_NAME:void 0,APP_CATEGORY:void 0,bbc_content_id:1,bbc_app_type:2,bbc_app_name:3,language:4,bbc_url:5,bbc_referrer_url:6,bbc_content_type:7,bbc_library_version:8,page_title:9,custom_var_1:11,custom_var_2:12,custom_var_3:13,custom_var_4:14,custom_var_5:15,custom_var_6:16,custom_var_7:17,custom_var_8:18,custom_var_9:19,custom_var_10:20,create:function(e,t,n,r,o,s){var u;return this.APP_NAME=e,n&&n[i.APP_CATEGORY]?this.APP_CATEGORY=n[i.APP_CATEGORY]:this.APP_CATEGORY="",u=this._setCustomVariable(u,i.APP_TYPE,t),u=this._setCustomVariable(u,i.APP_NAME,e),u=this._setCustomVariable(u,i.LIBRARY_VERSION,a.getLibraryName()+"-"+a.getLibraryVersion()),s&&(u=this._setDocumentCustomVariables(u,s)),o&&(u=this._setOrbitCustomVariables(u,o)),this._applyLabels(u,n),this._applyLabels(u,r),u},_initialise:function(){return{site:{}}},_applyLabels:function(e,t){if(t){var n=this._getAppName(t);t[i.APP_CATEGORY]&&(e=this._setCustomVariable(e,i.APP_NAME,n),delete t[i.APP_CATEGORY]),Object.keys(t).forEach(function(r){this._isInvalidPropertyKey(r)&&delete t[r],this._isCustomVariable(r)&&(r===i.APP_NAME&&(t[r]=n),e=this._setCustomVariable(e,r,t[r]),delete t[r])},this)}},_getAppName:function(e){var t="";return e[i.APP_CATEGORY]?t=e[i.APP_CATEGORY]+"-":this.APP_CATEGORY&&(t=this.APP_CATEGORY+"-"),e[i.APP_NAME]?t+=e[i.APP_NAME]:t+=this.APP_NAME,t},_isCustomVariable:function(e){return void 0!==this[e]&&this.hasOwnProperty(e)&&"function"!=typeof this[e]},_isInvalidPropertyKey:function(e){return!!r.hasOwnProperty(e)&&(t.warn(r[e].message),!0)},_setCustomVariable:function(e,t,n){if(n){e||(e=this._initialise());var i=o.removeSensitiveInfo(n),r=o.cleanCustomVariable(i),a=this[t];e.site[a]="["+encodeURIComponent(r)+"]"}return e},_setDocumentCustomVariables:function(e,t){return t&&(e=this._setCustomVariable(e,i.URL,t.URL),e=this._setCustomVariable(e,i.REFERRER_URL,t.referrer),e=this._setCustomVariable(e,i.PAGE_TITLE,t.title)),e},_setOrbitCustomVariables:function(e,t){return t&&(e=this._setCustomVariable(e,i.CONTENT_ID,t.contentId),e=this._setCustomVariable(e,i.CONTENT_TYPE,t.contentType),e=this._setCustomVariable(e,i.LANGUAGE,t.language),e=this._setProductCustomVariables(e,t.additionalProperties)),e},_setProductCustomVariables:function(e,t){return t&&(t.app_category&&(e=this._setCustomVariable(e,i.APP_NAME,this._getAppName(t))),t.content_language&&(e=this._setCustomVariable(e,i.LANGUAGE,t.content_language)),e=this._setCustomVariable(e,i.CUSTOM_VAR_1,t.custom_var_1),e=this._setCustomVariable(e,i.CUSTOM_VAR_2,t.custom_var_2),e=this._setCustomVariable(e,i.CUSTOM_VAR_3,t.custom_var_3),e=this._setCustomVariable(e,i.CUSTOM_VAR_4,t.custom_var_4),e=this._setCustomVariable(e,i.CUSTOM_VAR_5,t.custom_var_5),e=this._setCustomVariable(e,i.CUSTOM_VAR_6,t.custom_var_6),e=this._setCustomVariable(e,i.CUSTOM_VAR_7,t.custom_var_7),e=this._setCustomVariable(e,i.CUSTOM_VAR_8,t.custom_var_8),e=this._setCustomVariable(e,i.CUSTOM_VAR_9,t.custom_var_9),e=this._setCustomVariable(e,i.CUSTOM_VAR_10,t.custom_var_10)),e}}}.call(t,n,t,e))||(e.exports=i)},1835:function(e,t,n){var i;void 0===(i=function(){"use strict";return{ECHO_ENABLED:"enabled",ECHO_AUTO_START:"auto_start",ECHO_TRACE:"trace",ECHO_DEVICE_ID:"device_id",REPORTING_PROFILE:"reporting_profile",ECHO_CACHE_MODE:"cache_mode",DEBUG_MODE:"disabled",ECHO_NAME:"lib_name",ECHO_VERSION:"lib_version",USE_SSC:"use_ssc",SSC_HOSTNAME:"ssc_hostname",COMSCORE_ENABLED:"comscore.enabled",COMSCORE_HOST:"comscore.host",COMSCORE_SITE:"comscore.site",COMSCORE_CUSTOMER_ID:"comscore.customer_id",COMSCORE_PUBLISHER_SECRET:"comscore.publisher_secret",ATI_ENABLED:"ati.enabled",ATI_LOG:"ati.log",ATI_SSL_LOG:"ati.ssl_log",ATI_DOMAIN:"ati.domain",ATI_PIXEL_PATH:"ati.pixel_path",ATI_FORCE_HTTP:"ati.force_http",ATI_FORCE_HTTPS:"ati.force_https",ATI_CACHE_MODE_ALWAYS:"always",ATI_CACHE_MODE_REQUIRED:"required",ATI_CACHE_MODE_NEVER:"never",APP_CATEGORY:"app_category",ATI_DISABLE_COOKIE:"ati.disable_cookie",ATI_USE_DEFAULT_COOKIE_DOMAIN:"ati.use_default_cookie_domain",ATI_COLLECT_DOMAIN:"ati.collect_domain",ATI_COLLECT_DOMAIN_SSL:"ati.collect_domain_ssl",DESTINATION:"bbc_destination",PRODUCER:"bbc_producer",TEST_SERVICE_ENABLED:"test.enabled",TEST_SERVICE_URL:"test.url",BARB_ENABLED:"barb.enabled",BARB_SITE_CODE:"barb.site_code",BARB_DEBUG:"barb.debug",BARB_DEBUG_ENABLE_SHORT_MEDIA:"barb.debug_enable_short_media",USE_ESS:"use_ess",ESS_HOSTNAME:"ess.hostname",REMOTE_CONFIG_MANAGER:"remote_config_manager",REMOTE_CONFIG_URL:"remote_config_url",PRODUCER_CONFIG_FILENAME:"producer_config_filename",MASTERBRAND_CONFIG_FILENAME:"masterbrand_config_filename"}}.call(t,n,t,e))||(e.exports=i)},1982:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(6326),i=n(7342),r=n(6419),o=n(4642),a=n(1835),s={};s[a.ECHO_ENABLED]=!0,s[a.ECHO_AUTO_START]=!0,s[a.ECHO_DEVICE_ID]=null,s[a.REPORTING_PROFILE]="PUBLIC_SERVICE",s[a.ECHO_CACHE_MODE]="NEVER",s[a.COMSCORE_ENABLED]=!1,s[a.ATI_ENABLED]=!0,s[a.BARB_ENABLED]=!0,s[a.BARB_DEBUG]=!1,s[a.BARB_SITE_CODE]="bbcdotcom",s[a.BARB_DEBUG_ENABLE_SHORT_MEDIA]=!1,s[a.TEST_SERVICE_ENABLED]=!1,s[a.USE_ESS]=!1,s[a.ESS_HOSTNAME]="ess.api.bbci.co.uk",s[a.USE_SSC]=!1,s[a.SSC_HOSTNAME]=null;var u={};function c(e){return"string"==typeof e&&e.length>0}function l(e){return"string"==typeof(n=e[a.ECHO_CACHE_MODE])&&(n=n.toUpperCase(),i.EchoCacheMode.hasOwnProperty(n))?r.assert("boolean"==typeof e[a.ECHO_ENABLED],'Config: "enabled" must be boolean, got '+e[a.ECHO_ENABLED])&&r.assert("boolean"==typeof e[a.ECHO_AUTO_START],'Config: "auto_start" must be boolean, got '+e[a.ECHO_AUTO_START])&&r.assert(null===e[a.ECHO_DEVICE_ID]||"string"==typeof e[a.ECHO_DEVICE_ID]&&e[a.ECHO_DEVICE_ID].length,"ECHO.DEVICE_ID must be an non-empty string"):(t.error("Config Error: KEYS.ECHO_CACHE_MODE Invalid cache mode specified"),!1);var n}function d(e){if(!1===e[a.COMSCORE_ENABLED])return!0;if(!c(e[a.REPORTING_PROFILE])){if(!c(e[a.COMSCORE_HOST]))return t.error("Config Error: Must have config value for COMSCORE_HOST or REPORTING_PROFILE"),!1;if("scorecardresearch.com"!==e[a.COMSCORE_HOST]&&"sa.bbc.co.uk"!==e[a.COMSCORE_HOST])return t.error("Config Error: KEYS.COMSCORE_HOST Should be one of scorecardresearch.com or sa.bbc.co.uk"),!1}return"string"==typeof(n=e[a.REPORTING_PROFILE])&&(n=n.toUpperCase(),i.ReportingProfiles.hasOwnProperty(n))?r.assert("boolean"==typeof e[a.COMSCORE_ENABLED],'ComScore config: "ENABLED" must be boolean'):(t.error("Config Error: KEYS.REPORTING_PROFILE Invalid reporting profile specified"),!1);var n}function p(e){return"string"==typeof e&&(e=e.toUpperCase(),i.ReportingProfiles.hasOwnProperty(e))?i.ReportingProfiles[e]:null}function h(e){return"string"==typeof e&&(e=e.toUpperCase(),i.EchoCacheMode.hasOwnProperty(e))?i.EchoCacheMode[e]:null}return u[a.ECHO_NAME]=o.NAME,u[a.ECHO_VERSION]=o.VERSION,{defaultConfig:s,fixedConfig:u,generate:function(e){var n,i;(e=e||{})[a.REPORTING_PROFILE]&&(n=p(e[a.REPORTING_PROFILE])),n||(n=p("PUBLIC_SERVICE")),e[a.ECHO_CACHE_MODE]&&(i=h(e[a.ECHO_CACHE_MODE])),i||(i=h("NEVER"));var o,_=r.extend(s,!0,n,e||{},u);return l(_)&&d(_)&&(!1===(o=_)[a.BARB_ENABLED]||!(c(o[a.BARB_SITE_CODE])?o[a.BARB_SITE_CODE].match(/[a-zA-Z]+/)?"boolean"!=typeof o[a.BARB_DEBUG]?(t.error("Config Error: KEYS.BARB_DEBUG must be a boolean"),1):"boolean"!=typeof o[a.BARB_DEBUG_ENABLE_SHORT_MEDIA]&&(t.error("Config Error: KEYS.BARB_DEBUG_ENABLE_SHORT_MEDIA must be a boolean"),1):(t.error("Config Error: KEYS.BARB_SITE_CODE must match [a-zA-Z]"),1):(t.error("Config Error: KEYS.BARB_SITE_CODE must have a value"),1)))?_:null}}}.call(t,n,t,e))||(e.exports=i)},2032:function(e){e.exports={STRICT:"strict",COUNTERNAME:"countername",EVENT_MASTER_BRAND:"event_master_brand",NO_CLEANSING:"no_cleansing",CUSTOM:"custom"}},2311:function(e,t){"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,n,r,o,a){return i((s=i(i(t,e),i(r,a)))<<(u=o)|s>>>32-u,n);var s,u}function o(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function u(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,i="0123456789abcdef";for(let r=0;r<n;r+=8){const n=e[r>>5]>>>r%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,c=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,p=c,h=l,_=d;r=o(r,c,l,d,e[t],7,-680876936),d=o(d,r,c,l,e[t+1],12,-389564586),l=o(l,d,r,c,e[t+2],17,606105819),c=o(c,l,d,r,e[t+3],22,-1044525330),r=o(r,c,l,d,e[t+4],7,-176418897),d=o(d,r,c,l,e[t+5],12,1200080426),l=o(l,d,r,c,e[t+6],17,-1473231341),c=o(c,l,d,r,e[t+7],22,-45705983),r=o(r,c,l,d,e[t+8],7,1770035416),d=o(d,r,c,l,e[t+9],12,-1958414417),l=o(l,d,r,c,e[t+10],17,-42063),c=o(c,l,d,r,e[t+11],22,-1990404162),r=o(r,c,l,d,e[t+12],7,1804603682),d=o(d,r,c,l,e[t+13],12,-40341101),l=o(l,d,r,c,e[t+14],17,-1502002290),c=o(c,l,d,r,e[t+15],22,1236535329),r=a(r,c,l,d,e[t+1],5,-165796510),d=a(d,r,c,l,e[t+6],9,-1069501632),l=a(l,d,r,c,e[t+11],14,643717713),c=a(c,l,d,r,e[t],20,-373897302),r=a(r,c,l,d,e[t+5],5,-701558691),d=a(d,r,c,l,e[t+10],9,38016083),l=a(l,d,r,c,e[t+15],14,-660478335),c=a(c,l,d,r,e[t+4],20,-405537848),r=a(r,c,l,d,e[t+9],5,568446438),d=a(d,r,c,l,e[t+14],9,-1019803690),l=a(l,d,r,c,e[t+3],14,-187363961),c=a(c,l,d,r,e[t+8],20,1163531501),r=a(r,c,l,d,e[t+13],5,-1444681467),d=a(d,r,c,l,e[t+2],9,-51403784),l=a(l,d,r,c,e[t+7],14,1735328473),c=a(c,l,d,r,e[t+12],20,-1926607734),r=s(r,c,l,d,e[t+5],4,-378558),d=s(d,r,c,l,e[t+8],11,-2022574463),l=s(l,d,r,c,e[t+11],16,1839030562),c=s(c,l,d,r,e[t+14],23,-35309556),r=s(r,c,l,d,e[t+1],4,-1530992060),d=s(d,r,c,l,e[t+4],11,1272893353),l=s(l,d,r,c,e[t+7],16,-155497632),c=s(c,l,d,r,e[t+10],23,-1094730640),r=s(r,c,l,d,e[t+13],4,681279174),d=s(d,r,c,l,e[t],11,-358537222),l=s(l,d,r,c,e[t+3],16,-722521979),c=s(c,l,d,r,e[t+6],23,76029189),r=s(r,c,l,d,e[t+9],4,-640364487),d=s(d,r,c,l,e[t+12],11,-421815835),l=s(l,d,r,c,e[t+15],16,530742520),c=s(c,l,d,r,e[t+2],23,-995338651),r=u(r,c,l,d,e[t],6,-198630844),d=u(d,r,c,l,e[t+7],10,1126891415),l=u(l,d,r,c,e[t+14],15,-1416354905),c=u(c,l,d,r,e[t+5],21,-57434055),r=u(r,c,l,d,e[t+12],6,1700485571),d=u(d,r,c,l,e[t+3],10,-1894986606),l=u(l,d,r,c,e[t+10],15,-1051523),c=u(c,l,d,r,e[t+1],21,-2054922799),r=u(r,c,l,d,e[t+8],6,1873313359),d=u(d,r,c,l,e[t+15],10,-30611744),l=u(l,d,r,c,e[t+6],15,-1560198380),c=u(c,l,d,r,e[t+13],21,1309151649),r=u(r,c,l,d,e[t+4],6,-145523070),d=u(d,r,c,l,e[t+11],10,-1120210379),l=u(l,d,r,c,e[t+2],15,718787259),c=u(c,l,d,r,e[t+9],21,-343485551),r=i(r,n),c=i(c,p),l=i(l,h),d=i(d,_)}return[r,c,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,i=new Uint32Array(n(t));for(let n=0;n<t;n+=8)i[n>>5]|=(255&e[n/8])<<n%32;return i}(e),8*e.length))};t.default=c},2476:function(e,t,n){var i,r;i=[n(6697)],void 0===(r=function(e){"use strict";function t(e,t,n){this._persistantLabels={},this._urlParams="",this._cut="",this._httpGet=e,this._eventCount=0,this._isApp=t,this._isScorecardDomain=!0===n,this._hasStarted=!1}return t.IS_ECHO_APP_TAG=!0,t.URL_LIMIT=2048,t.prototype.setPixelURL=function(e){this._url=this._makeBaseUrl(e)},t.prototype.setCustomerC2=function(t){this.setLabel(e.COMSCORE_CUSTOMER,t)},t.prototype.start=function(){this._hasStarted||(this._hasStarted=!0)},t.prototype.setLabel=function(e,t){null===t?this.removeLabel(e):this._persistantLabels[e]=t},t.prototype.removeLabels=function(e){for(var t in e)void 0!==this._persistantLabels[e[t]]&&delete this._persistantLabels[e[t]]},t.prototype.removeLabel=function(e){void 0!==this._persistantLabels[e]&&delete this._persistantLabels[e]},t.prototype.view=function(e){this.send("view",e)},t.prototype.hidden=function(e){this.send("hidden",e)},t.prototype.send=function(e,t,n){var i,r,o=this._persistantLabels,a={};if(this._hasStarted){for(r in this._eventCount++,o)a[r]=o[r];for(r in t)a[r]=t[r];a.ns_type=e,this._isApp&&(a.ns_ap_ev=e,a.ns_ap_ec=this._eventCount),a[this._isApp?"ns_ts":"ns__t"]=+new Date,i=this._createUrl(a),this._httpGet(i,n)}},t.prototype._createUrl=function(t){var n,i=window.encodeURIComponent||escape,r=this._url;for(n in this._urlParams="",this._cut="",t.hasOwnProperty("name")&&this._addUrlParam("name",t.name),t)"name"!==n&&"ns_referrer"!==n&&this._addUrlParam(n,t[n]);return t.hasOwnProperty("ns_referrer")&&this._addUrlParam(this._isScorecardDomain?e.ENV_REFERRER:"ns_referrer",t.ns_referrer),r+=this._urlParams,this._cut.length?r+="ns_cut="+i(this._cut.replace(/&$/,"")):r=r.replace(/&$/,""),r},t.prototype._addUrlParam=function(e,n){var i=window.encodeURIComponent||escape,r=i(e)+"="+i(n)+"&",o=t.URL_LIMIT-8;this._url.length+this._urlParams.length+r.length<o?this._urlParams+=r:this._cut+=r},t.prototype._makeBaseUrl=function(e){for(var t=-1,n=e.charAt(e.length-1),i=0,r=e.length;i<r;i++)"?"===e.charAt(i)&&(t=i);return-1===t?e+="?":"?"!==n&&"&"!==n&&(e+="&"),e},t}.apply(t,i))||(e.exports=r)},2491:function(e){e.exports={page:{message:"Warning: Please use the method pageView or setCounterName when setting page name. Custom property 'page' has not been set"}}},2688:function(e,t,n){var i;void 0===(i=function(){"use strict";return{ACADEMY:125,ACCOUNT:1,AFAAN_OROMOO:2,AFRIQUE:3,AMHARIC:4,ARABIC:5,AZERI:6,BBC:7,BBC_ALBA:8,BBC_ARCHIVE:127,BBC_ARTS:9,BBC_ASIAN_NETWORK:10,BBC_FOOD:11,BBC_FOUR:12,BBC_HD:13,BBC_MUSIC:14,BBC_NEWS_CHANNEL:15,BBC_ONE:16,BBC_PARLIAMENT_CHANNEL:17,BBC_RADIO:18,BBC_RADIO_1:19,BBC_RADIO_1XTRA:20,BBC_RADIO_2:21,BBC_RADIO_3:22,BBC_RADIO_4:23,BBC_RADIO_4_EXTRA:24,BBC_RADIO_5_LIVE:25,BBC_RADIO_6_MUSIC:26,BBC_SCOTLAND:120,BBC_SEND:121,BBC_STUDIOS:128,BBC_THREE:28,BBC_TWO:29,BBC_WORLD_NEWS:30,BENGALI:31,BITESIZE:32,BRASIL:33,BRITBOX:34,BRITBOX_AU:132,BURMESE:35,CBBC:36,CBEEBIES:37,CHINESE:38,ENGLISH_REGIONS:39,GAHUZA:40,GATEWAY:41,GNL_AUTOS:42,GNL_CAPITAL:43,GNL_CULTURE:44,GNL_EARTH:45,GNL_FUTURE:46,GNL_HOMEPAGE:47,GNL_STORYWORKS:48,GNL_TRAVEL:49,GUJARATI:50,HAUSA:51,HINDI:52,HUNGARIAN:134,IGBO:53,INDONESIAN:54,IPLAYER:55,JAPANESE:56,KOREAN:57,KYRGYZ:58,MARATHI:59,MEDIA_ACTION:60,MONITORING:61,MUNDO:62,NEPALI:63,NEWS:64,NEWS_LABS:129,NEWSROUND:65,NORTHERN_IRELAND:66,OPTIMO:137,OTHER:67,OWN_IT:118,PARTICIPATION:130,PASHTO:68,PASSPORT_CONTROL:138,PERSIAN:69,PIDGIN:70,POLISH:135,PROGRAMMES:71,PS_HOMEPAGE:72,PUNJABI:73,RD:126,RECEPTION:124,REEL:74,ROMANIAN:136,RUSSIAN:75,S4C:76,SCHOOL_RADIO:77,SCHOOL_REPORT:78,SCOTLAND:79,SEARCH:80,SERBIAN:81,SINHALA:82,SOMALI:83,SOUNDS:84,SPORT:85,SWAHILI:86,TAMIL:87,TASTER:88,TEACH:119,TELESCOPE:139,TELUGU:89,THAI:90,TIGRINYA:91,TIPO:140,TURKISH:92,TV_CERTIFICATION:131,UK_CHINA:93,UKRAINIAN:94,URDU:95,UZBEK:96,VIETNAMESE:97,VIVO:141,VOICE:98,VOICE_FIRST_FORMATS:99,VOLT:122,WALES:100,WEATHER:101,WEATHER_WATCHERS:102,WEBAPPS:133,WORLD_SERVICE_ENGLISH:103,WORKLIFE:104,WS_LEARNING_ENGLISH:105,WS_PARTNERS_B2B:106,YORUBA:107,NEWS_ENGLISH_REGIONS:108,SPORT_ENGLISH_REGIONS:109,NEWS_SCOTLAND:110,SPORT_SCOTLAND:111,NEWS_WALES:112,SPORT_WALES:113,NEWS_NORTHERN_IRELAND:114,SPORT_NORTHERN_IRELAND:115,AUDIENCE_SERVICES:116,WORLD_NEWS_PROGRAMMES:117,getId:function(e){var t;return e&&(t=this[e.toUpperCase()]),t}}}.call(t,n,t,e))||(e.exports=i)},2691:function(e,t,n){var i;void 0===(i=function(){"use strict";function e(){}return e.sendRefreshEvent=function(e,t,n){if(n){var i=n;t(i=(i=(i=i.replace(/a\=play/g,"a=refresh")).replace(/ts\=[0-9\.]+/g,"ts="+(new Date).getTime())).replace(/(prich\=|s2rich\=).*?(&|$)/g,""),function(){e.emit("Tracker:Hit:Sent:Ok",i)}.bind(e))}},e}.call(t,n,t,e))||(e.exports=i)},2831:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var i=p(n(3518)),r=p(n(4948)),o=p(n(5073)),a=p(n(7186)),s=p(n(4808)),u=p(n(7775)),c=p(n(7037)),l=p(n(9910)),d=p(n(6792));function p(e){return e&&e.__esModule?e:{default:e}}},2858:function(e,t){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)},3089:function(e){e.exports={STREAM:"stream",PID:"cq",WIDTH:"sx",HEIGHT:"sy",PLAYER_DESC:"pl",PLAYER_VERSION:"plv"}},3266:function(e,t,n){var i;void 0===(i=function(){"use strict";return{WALES:"wales",ENGLAND:"england",SCOTLAND:"scotland",NORTHERN_IRELAND:"northern_ireland",NONE:"",getName:function(e){var t;return void 0!==e&&(t=e?this[e.toUpperCase()]:this.NONE),t}}}.call(t,n,t,e))||(e.exports=i)},3518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(2858))&&i.__esModule?i:{default:i},o=n(9910);let a,s,u=0,c=0;var l=function(e,t,n){let i=t&&n||0;const l=t||new Array(16);let d=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==p){const t=e.random||(e.rng||r.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==p&&(p=s=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),_=void 0!==e.nsecs?e.nsecs:c+1;const f=h-u+(_-c)/1e4;if(f<0&&void 0===e.clockseq&&(p=p+1&16383),(f<0||h>u)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,c=_,s=p,h+=122192928e5;const E=(1e4*(268435455&h)+_)%4294967296;l[i++]=E>>>24&255,l[i++]=E>>>16&255,l[i++]=E>>>8&255,l[i++]=255&E;const g=h/4294967296*1e4&268435455;l[i++]=g>>>8&255,l[i++]=255&g,l[i++]=g>>>24&15|16,l[i++]=g>>>16&255,l[i++]=p>>>8|128,l[i++]=255&p;for(let e=0;e<6;++e)l[i+e]=d[e];return t||(0,o.unsafeStringify)(l)};t.default=l},3729:function(e,t,n){var i,r;i=[n(8250)],void 0===(r=function(e){"use strict";function t(t,n,i){this._playerDelegate=t,this._media=n,this._echoClient=i,this._playhead=new e,this._isStarted=!1,this._interval=null,this._playerDelegatePosition=0,this._playingTime=0,this._currentIntervalMaxPosition=0,this._hb3NotSentYet=!0,this._hb5NotSentYet=!0,this._previousPlayingTime=0}return t.prototype.setPlayhead=function(e){this._playhead=e},t.prototype.start=function(){var e=this;this._isStarted||(this._interval=setInterval(function(){e._update()},1e3),this._isStarted=!0,this._playhead.start())},t.prototype.stop=function(){clearInterval(this._interval),this._playhead.stop(),this._isStarted=!1},t.prototype.setPosition=function(e){"number"==typeof e&&e>=0&&!this.arePositionsWithinTolerance(this.getPosition(),e)&&(this._playerDelegatePosition=e,this._playingTime+=this._playhead.getPosition(),this._restartPlayhead(),this._currentIntervalMaxPosition=e)},t.prototype.getCurrentIntervalMaxPosition=function(){return this._currentIntervalMaxPosition},t.prototype._update=function(){var e=parseInt(this._playerDelegate.getPosition(),10),t=this.getPosition(),n=this._playingTime+this._playhead.getPosition(),i=Math.abs(n-(this._previousPlayingTime||n));this._previousPlayingTime=n,"number"==typeof e&&e!==this._playerDelegatePosition&&e>0&&(0!==this._playerDelegatePosition&&this.arePositionsWithinTolerance(e,t)||(this._playerDelegatePosition=e,t=this._playerDelegatePosition,this._restartPlayhead())),t>this._currentIntervalMaxPosition&&(this._currentIntervalMaxPosition=t),n>=3e3&&this._hb3NotSentYet&&i<1500&&(this._echoClient.avUserActionEvent("echo_hb","echo_hb_3",t),this._hb3NotSentYet=!1),n>=5e3&&this._hb5NotSentYet&&i<1500&&(this._echoClient.avUserActionEvent("echo_hb","echo_hb_5",t),this._hb5NotSentYet=!1),this._media.length>0&&t>=this._media.length&&this._echoClient.avPauseEvent(this._media.length,{echo_pause_at_media_length:1})},t.prototype._restartPlayhead=function(){this._playhead.reset(),this._playhead.start()},t.prototype.getPosition=function(){var e=this._playhead.getPosition();return this._playerDelegatePosition+e},t.prototype.getTimestamp=function(){return 0},t.prototype.arePositionsWithinTolerance=function(e,t){var n=e-t;return n>=-1500&&n<=1500},t}.apply(t,i))||(e.exports=r)},3916:function(e){e.exports={BBC_COUNTER_NAME:"name",ECHO_EVENT_NAME:"echo_event",APP_VERSION:"apvr",HASHED_ID:"at",LEVEL_1_SITE:"site",LEVEL_2_SITE:"level2",SECTION:"section",CHAPTER_1:"chapter1",CHAPTER_2:"chapter2",CHAPTER_3:"chapter3",CONTENT_ID:"bbc_content_id",APP_TYPE:"bbc_app_type",APP_NAME:"bbc_app_name",APP_CATEGORY:"app_category",LANGUAGE:"language",URL:"bbc_url",REFERRER_URL:"bbc_referrer_url",CONTENT_TYPE:"bbc_content_type",NATIONS_PRODUCER:"nations_producer",LIBRARY_VERSION:"bbc_library_version",PAGE_TITLE:"page_title",CUSTOM_VAR_1:"custom_var_1",CUSTOM_VAR_2:"custom_var_2",CUSTOM_VAR_3:"custom_var_3",CUSTOM_VAR_4:"custom_var_4",CUSTOM_VAR_5:"custom_var_5",CUSTOM_VAR_6:"custom_var_6",CUSTOM_VAR_7:"custom_var_7",CUSTOM_VAR_8:"custom_var_8",CUSTOM_VAR_9:"custom_var_9",CUSTOM_VAR_10:"custom_var_10",MEDIA_PLAYER:"bbc_media_player",LOGGED_IN:"bbc_identity",BBC_HID:"bbc_hid",MEDIA_BRAND:"brand",MEDIA_SERIES:"series",MEDIA_WS_PARTNER_ID:"ptnrID",CASTING_DEVICE_REFERRER:"devR",IS_BACKGROUND:"is_background",SOURCE:"source",CONTAINER:"container",METADATA:"metadata",PERSONALISATION:"personalisation",RESULT:"result",TEST_COOKIE_DOMAIN:"testCookieDomain",EVENT_CATEGORY:"event_category",EVENT_ACTION:"event_action",CHANNEL:"src_channel",MEDIUM:"src_medium",CAMPAIGN:"src_campaign",CAMPAIGN_GROUP:"src_campaign_group",VENDOR:"src_vendor",CREATION:"src_creation",FORMAT:"src_format",AFFILIATE_TYPE:"src_aff_type"}},4027:function(e,t,n){var i,r;i=[n(6419),n(6326),n(7342)],void 0===(r=function(e,t,n){"use strict";function i(e,t,n){this._schedule=[],this.serviceId=null,this._media=e,this._environment=t,this._echoClient=n,this._fetchData()}return i.prototype.getBroadcast=function(e){var t,n;for(t=0;t<this._schedule.length;t++)if(e<(n=this._schedule[t].published_time).end&&e>=n.start)return this._schedule[t]},i.essHost="ess.api.bbci.co.uk",i.prototype._fetchData=function(){var e,n=this;e=this._environment.getExecuteCrossDomainGet();var r=this._environment.getProtocol()+i.essHost.replace(/^(\/+)?/,"//")+"/schedules";if(this._media){if(this._media.getServiceId())r+="?serviceId="+encodeURIComponent(this._media.getServiceId()),t.info("Get ServiceID: "+r);else if(this._media.getVersionId())r+="?versionId="+encodeURIComponent(this._media.getVersionId()),t.info("Get VersionID: "+r);else{if(!this._media.getVpId())return t.info("Unable to determine serviceId, versionId or VpId for schedule"),void t.info(r);t.info("Get VPid: "+r),r+="?vpid="+encodeURIComponent(this._media.getVpId())}e(r,{onSuccess:function(e){n._dataSuccessHandler(e)},onError:function(e,t){var i="error";"json"===e?i="json":"object"==typeof e&&"timeout"===e.type&&(i="timeout"),n._dataErrorHandler(i,t)}})}},i.prototype.hasData=function(){return this._schedule.length>0},i.prototype._dataSuccessHandler=function(e){var n,i,r,o,a=[];if(t.info("Cross-domain schedule request success."),e){for(this._echoClient.setEssSuccess(!0),this.serviceId=e.service.id,e.items=e.items||[],n=0;n<e.items.length;n++)r=e.items[n].published_time.start,o=e.items[n].published_time.end,(i=e.items[n]).published_time.start=new Date(r).getTime(),i.published_time.end=new Date(o).getTime(),a.push(i);this._schedule=a}},i.prototype._dataErrorHandler=function(e,i){this._schedule=[],t.warn("There was a problem requesting the schedule from ESS: "+e),this._echoClient.setEssSuccess(!1),"json"===e?this._echoClient.setEssError(n.EssError.JSON,i):"timeout"===e?this._echoClient.setEssError(n.EssError.TIMEOUT,i):"error"===e&&void 0!==i?this._echoClient.setEssError(n.EssError.STATUS_CODE,i):this._echoClient.setEssError(n.EssError.RUNTIME,"0")},i}.apply(t,i))||(e.exports=r)},4642:function(e){e.exports={NAME:"echo_js",VERSION:"13.3.1"}},4712:function(e,t,n){var i;void 0===(i=function(){"use strict";var e=n(6326),t=n(5419),i={NAME:"name",WS_PARTNER_ID:"ptnrID",PLIST:"pList"},r={RETRIEVAL_TYPE:"retType",APP_NAME:"appN",APP_TYPE:"appT"},o={PLAYER_NAME:"mpN",PLAYER_VERSION:"mpV",LIBRARY_NAME:"mlN",LIBRARY_VERSION:"mlV",CASTING_DEVICE_REFERRER:"devR"};return{buildTheme:function(e,t,n){return e+"="+encodeURIComponent(function(e){return e||""}(t))+(n?"":"~")},constructThemeOne:function(t,n){var r="";return t&&(t.isLive()&&n?r+=this.buildTheme(i.NAME,""):r+=this.buildTheme(i.NAME,t.getName()),r+=this.buildTheme(i.WS_PARTNER_ID,t.getWsPartnerId()),t.isLive()?r+=this.buildTheme(i.PLIST,t.getServiceId(),!0):r+=this.buildTheme(i.PLIST,t.getPlaylist(),!0)),e.info("Setting media theme 1: "+r),r},constructThemeTwo:function(t){var n="";return t&&(n=this.buildTheme(r.RETRIEVAL_TYPE,t.getRetrievalType()),n+=this.buildTheme(r.APP_NAME,t.getAppName()),n+=this.buildTheme(r.APP_TYPE,t.getAppType())),e.info("Setting media theme 2: "+n),n},constructThemeThree:function(n){var i="";return n&&(i=this.buildTheme(o.PLAYER_NAME,n.getMediaPlayerName()),i+=this.buildTheme(o.PLAYER_VERSION,n.getMediaPlayerVersion()),i+=this.buildTheme(o.LIBRARY_NAME,t.getLibraryName()),i+=this.buildTheme(o.LIBRARY_VERSION,t.getLibraryVersion()),i+=this.buildTheme(o.CASTING_DEVICE_REFERRER,n.getCastingDeviceReferrer(),!0)),e.info("Setting media theme 3: "+i),i}}}.call(t,n,t,e))||(e.exports=i)},4808:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},4888:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(2688),i=n(7751),r=n(204),o=n(7342),a=n(6419),s=n(3916),u=n(6697),c=n(7950),l=n(6326),d=o.MediaConsumptionMode;var p=function(e,t){this.avType=function(e){return e===o.AvType.AUDIO||e===o.AvType.VIDEO}(e)?e:null,this.consumptionMode=function(e){return e===d.ON_DEMAND||e===d.DOWNLOAD||e===d.LIVE}(t)?t:null,a.assert(this.avType,"Media: Invalid avType: "+this.avType,!0),a.assert(this.consumptionMode,"Media: Invalid consumptionMode: "+this.consumptionMode,!0),this.serviceIdObject=new r(o.MediaIdType.SERVICE,!0),this.versionIdObject=new r(o.MediaIdType.VERSION,!0),this.clipIdObject=new r(o.MediaIdType.CLIP,!0),this.episodeIdObject=new r(o.MediaIdType.EPISODE,!0),this.vpIdObject=new r(o.MediaIdType.VPID,!0),this.nonPipsContentIdObject=new r(o.MediaIdType.NONPIPSCONTENT,!1),this.producer=0,this.masterbrand=0,this.useMasterbrandProducer=!1,this.brand="",this.series="",this.length=0,this.bufferLength=0,this.supplier=null,this.mediaSet=null,this.transferFormat=null,this.essEnrichedData=!1,this._isPlaying=!1,this._isBuffering=!1,this._isEmbedded=!1,this.name="",this.type=o.MediaClipType.UNDEFINED,this.playlist="",this.wsPartnerId="",this.initiationType=o.MediaInitiationType.UNDEFINED,this.adsEnabled=!1,this.mediaPlayerName="",this.mediaPlayerVersion="",this.transportMode="",this.castingDeviceReferrer="",this.remoteProducers=null,this.remoteMasterbrands=null};return p.prototype.setRemoteProducers=function(e){this.remoteProducers=e},p.prototype.setRemoteMasterbrands=function(e){this.remoteMasterbrands=e},p.prototype.isEssEnriched=function(){return!0===this.essEnrichedData},p.prototype.setEssEnriched=function(e){this.essEnrichedData=e},p.prototype.getAvType=function(){return this.avType},p.prototype.getMediaConsumptionMode=function(){return this.consumptionMode},p.prototype.getClone=function(){var e=new p(this.avType,this.consumptionMode);return e.brand=this.brand,e.series=this.series,e.serviceIdObject=this.serviceIdObject,e.versionIdObject=this.versionIdObject,e.clipIdObject=this.clipIdObject,e.episodeIdObject=this.episodeIdObject,e.vpIdObject=this.vpIdObject,e.name=this.name,e.type=this.type,e.playlist=this.playlist,e.initiationType=this.initiationType,e.adsEnabled=this.adsEnabled,e.mediaPlayerVersion=this.mediaPlayerVersion,e.mediaPlayerName=this.mediaPlayerName,e.transportMode=this.transportMode,e.castingDeviceReferrer=this.castingDeviceReferrer,e.wsPartnerId=this.wsPartnerId,e.nonPipsContentIdObject=this.nonPipsContentIdObject,e.appName=this.appName,e.appType=this.appType,e.producer=this.producer,e.masterbrand=this.masterbrand,e.remoteProducers=this.remoteProducers,e.remoteMasterbrands=this.remoteMasterbrands,e.useMasterbrandProducer=this.useMasterbrandProducer,e.bufferLength=this.bufferLength,e.mediaSet=this.mediaSet,e.supplier=this.supplier,e.transferFormat=this.transferFormat,e.length=this.length,e.essEnrichedData=this.essEnrichedData,e},p.prototype.isEmbedded=function(){return this._isEmbedded},p.prototype.setIsEmbedded=function(e){return this._isEmbedded=e,this},p.prototype.setVersionId=function(e){return this.versionIdObject.setValue(e),this},p.prototype.setBrand=function(e){return this.brand=c.cleanLabelValue(s.MEDIA_BRAND,e),this},p.prototype.setSeries=function(e){return this.series=c.cleanLabelValue(s.MEDIA_SERIES,e),this},p.prototype.setWsPartnerId=function(e){return this.wsPartnerId=c.cleanLabelValue(s.MEDIA_WS_PARTNER_ID,e),this},p.prototype.setClipId=function(e){return this.clipIdObject.setValue(e),this},p.prototype.setServiceId=function(e){return this.serviceIdObject.setValue(e),this},p.prototype.setEpisodeId=function(e){return this.episodeIdObject.setValue(e),this},p.prototype.setVpId=function(e){return this.vpIdObject.setValue(e),this},p.prototype.setNonPipsContentId=function(e){return this.nonPipsContentIdObject.setValue(c.cleanLabelValue(u.MEDIA_NON_PIPS_CONTENT_ID,e)),this},p.prototype.getSupplier=function(){return this.supplier},p.prototype.setSupplier=function(e){if(null!==e){var t=a.trim(e);0!==t.length&&(this.supplier=t)}return this},p.prototype.setMediaSet=function(e){if(null!==e){var t=a.trim(e);0!==t.length&&(this.mediaSet=t)}return this},p.prototype.getTransferFormat=function(){return this.transferFormat},p.prototype.setTransferFormat=function(e){if(null!==e){var t=a.trim(e);0!==t.length&&(this.transferFormat=t)}return this},p.prototype.isAdsEnabled=function(){return this.adsEnabled},p.prototype.setAdsEnabled=function(e){return this.adsEnabled=e,this},p.prototype.getName=function(){return this.name},p.prototype.setName=function(e){return this.name=e,this},p.prototype.getAppName=function(){return this.appName},p.prototype.setAppName=function(e){return this.appName=e,this},p.prototype.getAppType=function(){return this.appType},p.prototype.setAppType=function(e){return this.appType=e,this},p.prototype.getType=function(){return this.type},p.prototype.setType=function(e){return this.type=e,this},p.prototype.getPlaylist=function(){return this.playlist},p.prototype.setPlaylist=function(e){return this.playlist=e,this},p.prototype.getInitiationType=function(){return this.initiationType},p.prototype.setInitiationType=function(e){return this.initiationType=e,this},p.prototype.getMediaPlayerName=function(){return this.mediaPlayerName},p.prototype.setMediaPlayerName=function(e){return this.mediaPlayerName=e,this},p.prototype.getMediaPlayerVersion=function(){return this.mediaPlayerVersion},p.prototype.setMediaPlayerVersion=function(e){return this.mediaPlayerVersion=e,this},p.prototype.getTransportMode=function(){return this.transportMode},p.prototype.setTransportMode=function(e){return this.transportMode=e,this},p.prototype.setCastingDeviceReferrer=function(e){return this.castingDeviceReferrer=c.cleanLabelValue(s.CASTING_DEVICE_REFERRER,e),this},p.prototype.getLength=function(){return this.length},p.prototype.setLength=function(e){return null!=e&&(e=Math.floor(e)),(void 0===e||isNaN(e)||!isFinite(e)||e<0)&&(l.warn("Media: length must be an integer of 0 or greater. Echo will report as 0."),e=0),this.length=e,this},p.prototype.getProducer=function(){return this.producer},p.prototype.getMasterbrand=function(){return this.masterbrand},p.prototype.setProducer=function(e){this.useMasterbrandProducer=!1,this.producer=e?e.toUpperCase():null},p.prototype.getProducerId=function(){return this.useMasterbrandProducer?this.getProducerIdFromMasterbrand():this.getProducerIdFromProducer()},p.prototype.getProducerIdFromMasterbrand=function(){return this.remoteProducers&&this.remoteMasterbrands&&this.remoteMasterbrands[this.masterbrand]&&this.remoteProducers[this.remoteMasterbrands[this.masterbrand]]?this.remoteProducers[this.remoteMasterbrands[this.masterbrand]]:i.getProducerId(this.masterbrand)?i.getProducerId(this.masterbrand):(null===this.masterbrand||this.masterbrand&&"NULL"===this.masterbrand.toUpperCase()||""===this.masterbrand||l.info("Masterbrand ["+this.masterbrand+"] not recognised, producer will be set to undefined (0)"),0)},p.prototype.getProducerIdFromProducer=function(){return this.remoteProducers&&this.remoteProducers[this.producer]?this.remoteProducers[this.producer]:t.getId(this.producer)?t.getId(this.producer):0},p.prototype.setProducerById=function(e){return e&&(this.producer=e),this},p.prototype.setProducerByMasterbrand=function(e){this.useMasterbrandProducer=!0,this.masterbrand=e?e.toUpperCase():null},p.prototype.getVersionIdObject=function(){return this.versionIdObject},p.prototype.getClipIdObject=function(){return this.clipIdObject},p.prototype.getServiceIdObject=function(){return this.serviceIdObject},p.prototype.getWsPartnerId=function(){return this.wsPartnerId},p.prototype.getCastingDeviceReferrer=function(){return this.castingDeviceReferrer},p.prototype.getEpisodeIdObject=function(){return this.episodeIdObject},p.prototype.getVpIdObject=function(){return this.vpIdObject},p.prototype.getNonPipsContentIdObject=function(){return this.nonPipsContentIdObject},p.prototype.getBrand=function(){return this.brand},p.prototype.getSeries=function(){return this.series},p.prototype.getMediaSet=function(){return this.mediaSet},p.prototype.getVersionId=function(){return this.versionIdObject.getValue()},p.prototype.getClipId=function(){return this.clipIdObject.getValue()},p.prototype.getServiceId=function(){return this.serviceIdObject.getValue()},p.prototype.getEpisodeId=function(){return this.episodeIdObject.getValue()},p.prototype.getVpId=function(){return this.vpIdObject.getValue()},p.prototype.getNonPipsContentId=function(){return this.nonPipsContentIdObject.getValue()},p.prototype.getRetrievalType=function(){return null===this.consumptionMode?null:this.consumptionMode===d.DOWNLOAD?o.RetrievalType.DOWNLOAD:o.RetrievalType.STREAM},p.prototype.isOnDemand=function(){return this.consumptionMode===d.ON_DEMAND},p.prototype.isDownload=function(){return this.consumptionMode===d.DOWNLOAD},p.prototype.isLive=function(){return this.consumptionMode===d.LIVE},p.prototype.isVideo=function(){return this.avType===o.AvType.VIDEO},p.prototype.getPlayerId=function(){return"1"},p.prototype.setPlaying=function(e){return this._isPlaying=Boolean(e),this},p.prototype.getPlaying=function(){return this._isPlaying},p.prototype.setBuffering=function(e){return this._isBuffering=Boolean(e),this},p.prototype.getBuffering=function(){return this._isBuffering},p}.call(t,n,t,e))||(e.exports=i)},4948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9025)),r=o(n(2311));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,i.default)("v3",48,r.default);t.default=a},5073:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6140)),r=a(n(2858)),o=n(9910);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(i.default.randomUUID&&!t&&!e)return i.default.randomUUID();const a=(e=e||{}).random||(e.rng||r.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,o.unsafeStringify)(a)};t.default=s},5164:function(e,t,n){var i;void 0===(i=function(){"use strict";var e=n(6326);function t(){}return t.sendEvent=function(t,n,i,r){if(n){var o={action:i,playerId:n.playerId,mediaLabel:n.mediaLabel,mediaTheme1:n.mediaTheme1,mediaTheme2:n.mediaTheme2,mediaTheme3:n.mediaTheme3};for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);t.richMedia.send(o),e.info("Sending "+i+" media event")}},t}.call(t,n,t,e))||(e.exports=i)},5419:function(e,t,n){var i;void 0===(i=function(){"use strict";return{getLibraryName:function(){return"echo_js"},getLibraryVersion:function(){return"13.3.1"}}}.call(t,n,t,e))||(e.exports=i)},5808:function(e,t,n){var i;void 0===(i=function(){"use strict";var e=n(6326),t=n(6964).Promise;function i(){}return i.get=function(){if(window&&window.bbcpage){return t.all(["getDestination","getProducer","getSection","getContentId","getContentType","getLanguage","getAdditionalProperties","getName"].map(function(e){return function(e){return window.bbcpage[e]&&"function"==typeof window.bbcpage[e]?window.bbcpage[e]():t.resolve(null)}(e)})).then(function(t){return t=i._decodeFromOrbit(t),e.info("Got Orbit Variables: "+JSON.stringify(t)),{destination:t[0],producer:t[1],section:t[2],contentId:t[3],contentType:t[4],language:t[5],additionalProperties:t[6],pageName:t[7]}})}return t.resolve(void 0)},i.getUser=function(){if(window&&window.bbcuser){return t.all(["getHashedId","isSignedIn"].map(function(e){return function(e){return window.bbcuser[e]&&"function"==typeof window.bbcuser[e]?window.bbcuser[e]():t.resolve(null)}(e)})).then(function(t){return e.info("Got Orbit User Variables: "+JSON.stringify(t)),{hashedId:t[0],isSignedIn:t[1]}})}return t.resolve(void 0)},i._decodeFromOrbit=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)if(e[t[n]]&&"object"!=typeof e[t[n]]){var r=new RegExp("&#x2F;","g");e[t[n]]=e[t[n]].replace(r,"/")}else e[t[n]]&&"object"==typeof e[t[n]]&&(e[t[n]]=i._decodeFromOrbit(e[t[n]]));return e},i}.call(t,n,t,e))||(e.exports=i)},6140:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},6189:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t,i,r=n(7950),o=n(138),a=n(567),s=!1,u=[];function c(){var e=window.screen||{},t=window.navigator||{},n=window.document||{};this._platformRuntimeEnvironment="html",this._platformOSVersion="5",this._screenResolution=(e.width||"-")+"x"+(e.height||"-"),this._language=t.language||"",this._platformName=t.platform||"",this._charset=n.characterSet||n.defaultCharset||"",this._title=n.title||"",this._url=n.URL||"",this._referrer=n.referrer||"",this._deviceName=null,this._httpGet=null,this._executeCrossDomainGet=null,this._getCookie=null,this._setCookie=null,this._setLocalStorageItem=null,this._getLocalStorageItem=null}return c._defaultHttpGet=a.httpGet,c._defaultGetCookie=o.getCookieValueByName,c.prototype.getPlatformName=function(){return this._platformName},c.prototype.getPlatformRuntimeEnvironment=function(){return this._platformRuntimeEnvironment},c.prototype.getPlatformOSVersion=function(){return this._platformOSVersion},c.prototype.getDeviceName=function(){return this._deviceName},c.prototype.getScreenResolution=function(){return this._screenResolution},c.prototype.getLanguage=function(){return this._language},c.prototype.getHttpGet=function(){return this._httpGet},c.prototype.setExecuteCrossDomainGet=function(e){this._executeCrossDomainGet=e},c.prototype.getExecuteCrossDomainGet=function(){return this._executeCrossDomainGet?this._executeCrossDomainGet:a.executeCrossDomainGet},c.prototype.getCookieGetter=function(){return this._getCookie},c.prototype.getCookieSetter=function(){return this._setCookie},c.prototype.getCharSet=function(){return this._charset},c.prototype.getTitle=function(){return this._title},c.prototype.getURL=function(){return this._url},c.prototype.getProtocol=function(){return 0!==this.getURL().toLowerCase().indexOf("http:",0)?"https:":"http:"},c.prototype.getReferrer=function(){return this._referrer},c.prototype.setSetLocalStorageItem=function(e){this._setLocalStorageItem=e},c.prototype.getSetLocalStorageItem=function(){return this._setLocalStorageItem},c.prototype.setGetLocalStorageItem=function(e){this._getLocalStorageItem=e},c.prototype.getGetLocalStorageItem=function(){return this._getLocalStorageItem},c.prototype.setPlatformName=function(e){return this._platformName=e,this},c.prototype.setPlatform=function(e,t){return this._platformRuntimeEnvironment=e,this._platformOSVersion=t,this},c.prototype.setDeviceName=function(e){return this._deviceName=e,this},c.prototype.setScreenResolution=function(e){return this._screenResolution=e,this},c.prototype.setLanguage=function(e){return this._language=r.cleanLanguage(e),this},c.prototype.setHttpGet=function(e){return this._httpGet=e,this},c.prototype.setCookieGetter=function(e){return this._getCookie=e,this},c.prototype.setCookieSetter=function(e){return this._setCookie=e,this},c.prototype.setCharSet=function(e){return this._charset=e,this},c.prototype.setTitle=function(e){return this._title=e,this},c.prototype.setURL=function(e){return this._url=e,this},c.prototype.setReferrer=function(e){return this._referrer=e,this},c.setOrbIdCta=function(e){return t=e,this},c.getOrbIdCta=function(e){var n=function(e,t){e&&"function"==typeof e&&e(t)};if(void 0===t)if(!1!==i){u.push(e);var r=window.require;void 0===i&&r?!(i="function"==typeof r.defined&&r.defined("idcta/idcta-1"))&&r.s&&r.s.contexts&&r.s.contexts._&&r.s.contexts._.config&&r.s.contexts._.config.paths&&r.s.contexts._.config.paths.idcta&&(i=!0):i=!1,i&&!s?(s=!0,window.require(["idcta/idcta-1"],function(e){for(t=e,0;0<u.length;u++)u[0]&&"function"==typeof u[0]&&n(u[0],t)})):!1===i&&n(e)}else n(e);else n(e,t)},c}.call(t,n,t,e))||(e.exports=i)},6326:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=!1,n={INFO:0,WARN:1,ERROR:2},i=n.ERROR;function r(e,t){"object"==typeof console&&"function"==typeof console[e]&&console[e](t)}return{enable:function(){t=!0},disable:function(){t=!1},getState:function(){return t},getLevel:function(){return i},setLevel:function(e){i=e>n.ERROR?n.ERROR:e<n.INFO?n.INFO:e},info:function(e){t&&i===n.INFO&&r("log","ECHO_DEBUG [info]: "+e)},warn:function(e){t&&i<=n.WARN&&r("log","ECHO_DEBUG [warning]: "+e)},error:function(e){if(t&&i<=n.ERROR)throw new Error("ECHO_DEBUG: "+e)},DebugLevels:n}}.call(t,n,t,e))||(e.exports=i)},6419:function(e,t,n){var i;i=function(e){"use strict";var t=n(6326);function i(e){var t={};for(var n in e)try{e[n].constructor===Object?t[n]=i(e[n]):t[n]=e[n]}catch(i){t[n]=e[n]}return t}function r(e,t,n){var o=n?e:i(e);for(var a in t)"__proto__"!==a&&"constructor"!==a?t[a]&&t[a].constructor===Object?o[a]=r(o.hasOwnProperty(a)?o[a]:{},t[a]):o[a]=t[a]:console.log("combineObjects: Skipping prototype-polluting property: "+a);return o}function o(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return!0;return!1}function a(e,t){for(var n=(t?i(e):e)||{},o=arguments,a=2,s=o.length;a<s;a++)"object"==typeof o[a]?r(n,o[a],!0):n[o[a]]=o[++a];return n}function s(e,n,i){return e||(i?t.warn("AssertionFailed: "+n):t.error("AssertionFailed: "+n)),e}return{clone:i,combineObjects:r,addKV:function(e,t,n){return n?a(e,!0,t,n):a(e,!0,t)},containsValue:o,startsWith:function(e,t){return 0===e.indexOf(t)},extend:a,assert:s,assertContainsValue:function(e,t,n){return s(o(e,t),n)},trim:function(e){if("string"==typeof e&&e.length<1e4)return e=String.prototype.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}}}.call(t,n,t,e),void 0===i||(e.exports=i)},6697:function(e){e.exports={BBC_APPLICATION_NAME:"app_name",BBC_APPLICATION_TYPE:"app_type",BBC_APPLICATION_VERSION:"app_version",BBC_COUNTER_NAME:"name",DESTINATION:"bbc_destination",PRODUCER:"bbc_producer",BBC_LANGUAGE:"language",DEVICE_ID:"ns_alias",COMSCORE_C1:"c1",COMSCORE_C7:"c7",BBC_MEASUREMENT_LIB_NAME:"ml_name",BBC_MEASUREMENT_LIB_VERSION:"ml_version",ECHO_TRACE:"trace",ECHO_EVENT_NAME:"echo_event",EVENT_TRIGGERED_BY_USER:"ns_st_ui",STREAMSENSE_CUSTOM_EVENT_TYPE:"ns_st_ev",USER_ACTION_TYPE:"action_type",USER_ACTION_NAME:"action_name",PLAYLIST_END:"ns_st_pe",REWIND_FF_RATE:"ffrw_rate",COMSCORE_SITE:"ns_site",COMSCORE_CUSTOMER:"c2",COMSCORE_ENDPOINT:"comscore_endpoint",PLAYER_NAME:"ns_st_mp",PLAYER_VERSION:"ns_st_mv",PLAYER_WINDOW_STATE:"ns_st_ws",PLAYER_VOLUME:"ns_st_vo",PLAYER_POPPED:"bbc_st_pop",PLAYER_SUBTITLED:"bbc_st_sub",PLAYLIST_NAME:"ns_st_pl",PLAYLIST_CLIP_COUNT:"ns_st_cp",PLAYLIST_LENGTH:"ns_st_ca",MEDIA_PID:"ns_st_ci",MEDIA_LENGTH:"ns_st_cl",MEDIA_STREAM_TYPE:"ns_st_ty",MEDIA_IS_LIVE:"ns_st_li",MEDIA_EPISODE_ID:"episode_id",MEDIA_CLIP_ID:"clip_id",MEDIA_CLIP_NUMBER:"ns_st_cn",MEDIA_PART_NUMBER:"ns_st_pn",MEDIA_TOTAL_PARTS:"ns_st_tp",MEDIA_MEDIUM:"bbc_st_med",MEDIA_LIVE_OR_ONDEMAND:"bbc_st_lod",MEDIA_FORM:"bbc_st_mf",MEDIA_RETRIEVAL_TYPE:"bbc_st_ret",MEDIA_SCHEDULE_INDICATOR:"bbc_st_sch",MEDIA_VERSION_ID:"version_id",MEDIA_SERVICE_ID:"service_id",MEDIA_NON_PIPS_CONTENT_ID:"non_pips_content_id",MEDIA_AMBIGUOUS_ID:"ambig_ci",MEDIA_TIMESTAMP:"bbc_st_live_ts",ESS_SUCCESS:"ess_success",ESS_ERROR:"ess_error",ESS_STATUS_CODE:"ess_status_code",APP_PLATFORM_NAME:"ns_ap_pn",APP_PLATFORM_RUNTIME:"ns_ap_pfm",APP_OS_VERSION:"ns_ap_pfv",APP_DEVICE_NAME:"ns_ap_device",APP_SCREEN_RESOLUTION:"ns_ap_res",APP_LANGUAGE:"ns_ap_lang",ENV_CHAR_SET:"ns_c",ENV_TITLE:"c8",ENV_URL:"c7",ENV_REFERRER:"c9",APP_NAME:"ns_ap_an",APP_VERSION:"ns_ap_ver",NO_COOKIES:"ns_nc",COOKIE_POLICY:"bbc_mc",BBC_ID_LOGGED_IN:"bbc_identity",WEB_SCREEN_RES:"screen_resolution",ESS_ENABLED:"ess_enabled",ESS_ENRICHED:"ess_enriched"}},6792:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(7037))&&i.__esModule?i:{default:i};var o=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=o},6964:function(e,t,n){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,o=void 0,a=void 0,s=function(e,t){T[r]=e,T[r+1]=t,2===(r+=2)&&(a?a(I):S())};function u(e){a=e}function c(e){s=e}var l="undefined"!=typeof window?window:void 0,d=l||{},p=d.MutationObserver||d.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),_="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){return function(){return process.nextTick(I)}}function E(){return void 0!==o?function(){o(I)}:v()}function g(){var e=0,t=new p(I),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function m(){var e=new MessageChannel;return e.port1.onmessage=I,function(){return e.port2.postMessage(0)}}function v(){var e=setTimeout;return function(){return e(I,1)}}var T=new Array(1e3);function I(){for(var e=0;e<r;e+=2)(0,T[e])(T[e+1]),T[e]=void 0,T[e+1]=void 0;r=0}function C(){try{var e=Function("return this")().require("vertx");return o=e.runOnLoop||e.runOnContext,E()}catch(e){return v()}}var S=void 0;function A(e,t){var n=this,i=new this.constructor(P);void 0===i[O]&&q(i);var r=n._state;if(r){var o=arguments[r-1];s(function(){return F(r,i,o,n._result)})}else G(n,i,e,t);return i}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(P);return V(n,e),n}S=h?f():p?g():_?m():void 0===l?C():v();var O=Math.random().toString(36).substring(2);function P(){}var b=void 0,R=1,N=2;function L(){return new TypeError("You cannot resolve a promise with itself")}function B(){return new TypeError("A promises callback cannot return that same promise.")}function D(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function M(e,t,n){s(function(e){var i=!1,r=D(n,t,function(n){i||(i=!0,t!==n?V(e,n):x(e,n))},function(t){i||(i=!0,H(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,H(e,r))},e)}function w(e,t){t._state===R?x(e,t._result):t._state===N?H(e,t._result):G(t,void 0,function(t){return V(e,t)},function(t){return H(e,t)})}function U(e,n,i){n.constructor===e.constructor&&i===A&&n.constructor.resolve===y?w(e,n):void 0===i?x(e,n):t(i)?M(e,n,i):x(e,n)}function V(t,n){if(t===n)H(t,L());else if(e(n)){var i=void 0;try{i=n.then}catch(e){return void H(t,e)}U(t,n,i)}else x(t,n)}function k(e){e._onerror&&e._onerror(e._result),j(e)}function x(e,t){e._state===b&&(e._result=t,e._state=R,0!==e._subscribers.length&&s(j,e))}function H(e,t){e._state===b&&(e._state=N,e._result=t,s(k,e))}function G(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+R]=n,r[o+N]=i,0===o&&e._state&&s(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)i=t[a],r=t[a+n],i?F(n,i,r,o):r(o);e._subscribers.length=0}}function F(e,n,i,r){var o=t(i),a=void 0,s=void 0,u=!0;if(o){try{a=i(r)}catch(e){u=!1,s=e}if(n===a)return void H(n,B())}else a=r;n._state!==b||(o&&u?V(n,a):!1===u?H(n,s):e===R?x(n,a):e===N&&H(n,a))}function W(e,t){try{t(function(t){V(e,t)},function(t){H(e,t)})}catch(t){H(e,t)}}var Y=0;function K(){return Y++}function q(e){e[O]=Y++,e._state=void 0,e._result=void 0,e._subscribers=[]}function z(){return new Error("Array Methods must be provided an Array")}var Q=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(P),this.promise[O]||q(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&x(this.promise,this._result))):H(this.promise,z())}return e.prototype._enumerate=function(e){for(var t=0;this._state===b&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===y){var r=void 0,o=void 0,a=!1;try{r=e.then}catch(e){a=!0,o=e}if(r===A&&e._state!==b)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===te){var s=new n(P);a?H(s,o):U(s,e,r),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===b&&(this._remaining--,e===N?H(i,n):this._result[t]=n),0===this._remaining&&x(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;G(e,void 0,function(e){return n._settledAt(R,t,e)},function(e){return n._settledAt(N,t,e)})},e}();function X(e){return new Q(this,e).promise}function $(e){var t=this;return i(e)?new t(function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}function Z(e){var t=new this(P);return H(t,e),t}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[O]=K(),this._result=this._state=void 0,this._subscribers=[],P!==t&&("function"!=typeof t&&J(),this instanceof e?W(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,i=n.constructor;return t(e)?n.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){throw t})}):n.then(e,e)},e}();function ne(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=te}return te.prototype.then=A,te.all=X,te.race=$,te.resolve=y,te.reject=Z,te._setScheduler=u,te._setAsap=c,te._asap=s,te.polyfill=ne,te.Promise=te,te}()},7037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(7656))&&i.__esModule?i:{default:i};var o=function(e){return"string"==typeof e&&r.default.test(e)};t.default=o},7143:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(4642),i=n(6189);return{EchoClient:n(137),Media:n(4888),MediaId:n(204),Environment:i,Enums:n(7342),ConfigKeys:n(1835),Debug:n(6326),MediaPlayer:function(){},getImplementationVersion:function(){return t.VERSION}}}.call(t,n,t,e))||(e.exports=i)},7186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9025)),r=o(n(9042));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,i.default)("v5",80,r.default);t.default=a},7342:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(8482),i=n(2688),r=n(3266),o=n(7751),a=n(1835),s=n(3916),u={};Object.keys(t).map(function(e){u[e]=e});var c={};Object.keys(i).map(function(e){c[e]=e});var l={};Object.keys(r).map(function(e){l[e]=e});var d={};Object.keys(o).map(function(e){d[e]=e});var p="16060501",h="19293874",_="19999701",f="19774467",E="19774474",g="19774472",m="18897612",v="23239715",T="18897612";function I(e,t,n){var i={};return i[a.COMSCORE_CUSTOMER_ID]=e,i[a.COMSCORE_SITE]=t,i[a.COMSCORE_HOST]=n,i}function C(e){return I(p,e,"sa.bbc.co.uk")}function S(e,t){return I(e,t,"scorecardresearch.com")}var A={};return A.PUBLIC_SERVICE=C("bbc"),A.PUBLIC_SERVICE_STAGE=C("stage"),A.PUBLIC_SERVICE_TEST=C("test"),A.PUBLIC_SERVICE_INT=C("int"),A.PUBLIC_SERVICE_INTRANET=C("intranet"),A.GNL=S(h,"bbc"),A.GNL_ACCEPTANCE=S(m,"gnl-test"),A.WORLD_SERVICE=S(_,"bbc"),A.WORLD_SERVICE_ACCEPTANCE=S(m,"ws-test"),A.WORLDWIDE_FEATURES=S(f,"bbc"),A.WORLDWIDE_FEATURES_ACCEPTANCE=S(m,"features-test"),A.STORE_NONCOMMERCIAL=S(E,"bbc"),A.STORE_COMMERCIAL=S(g,"bbc"),A.BRITBOX_ACCEPTANCE=S(T,"bbc-global-test"),A.BRITBOX=S(v,"bbc"),{ApplicationType:{WEB:"web",MOBILE_WEB:"mobile-web",RESPONSIVE:"responsive",MOBILE_APP:"mobile-app",BIGSCREEN_HTML:"bigscreen-html",BIGSCREEN_FLASH:"bigscreen-flash",BIGSCREEN_APP:"bigscreen-app",BIGSCREEN_CAST:"bigscreen-cast",DESKTOP_APP:"desktop-app",AMP:"amp"},WindowState:{FULL:"full",NORMAL:"norm",MINIMISED:"min",MAXIMISED:"max",PICTUREINPICTURE:"picture-in-picture"},MediaIdType:{VERSION:"version",CLIP:"clip",EPISODE:"episode",SERVICE:"service",VPID:"vpid",NONPIPSCONTENTID:"nonpipscontentid",PRODUCER:"producer",BRAND:"brand",SERIES:"series",WSPARTNERID:"ptnrID"},MediaClipType:{UNDEFINED:void 0,CLIP:"clip",EPISODE:"episode"},MediaInitiationType:{UNDEFINED:void 0,USER:"user",AUTO:"auto"},AvType:{AUDIO:"audio",VIDEO:"video"},RetrievalType:{STREAM:"stream",DOWNLOAD:"download"},Form:{LONG:"long",SHORT:"short"},PIPsType:{CLIP:"clip",EPISODE:"ep"},MediaConsumptionMode:{ON_DEMAND:"ondemand",LIVE:"live",DOWNLOAD:"download"},EchoCacheMode:{NEVER:"never",OFFLINE:"offline",ALL:"all"},ManagedLabels:{EVENT_MASTER_BRAND:"event_master_brand",BBC_SITE:"bbc_site",IPLAYER_STATE:"iplayer_state",STORE_ED_TYPE:"store_ed_type",IPLAYER_AVAIL:"iplayer_avail",STORE_REFERRAL:"store_referral",BBC_HASHED_ID:"bbc_hid"},ReportingProfiles:A,EssError:{STATUS_CODE:"status_code",TIMEOUT:"timeout",JSON:"json",RUNTIME:"runtime_error"},Destinations:u,Producers:c,NationsProducer:l,Masterbrands:d,EchoLabelKeys:s}}.call(t,n,t,e))||(e.exports=i)},7368:function(e,t,n){var i,r;i=[n(8250),n(6697),n(4027),n(4888)],void 0===(r=function(e,t,n){"use strict";var i="no-broadcast";function r(t,r,o,a,s){this._playerDelegate=t,this._playhead=new e,this._isStarted=!1,this._interval=null,this._echoClient=o,this._broadcast=i,this._playerDelegateTimestamp=0,this._previousPosition=0,this._playingTime=0,this._media=r,this._environment=a,this._essEnabled=s,this._hb3NotSentYet=!0,this._hb5NotSentYet=!0,this._isRecievingPlayerTimestamp=!1,this._updateTime=0,this._essEnabled&&(this._schedule=new n(r,a,o))}return r.prototype.start=function(){var e=this;this._isStarted||(this._interval=setInterval(function(){e._update()},1e3),this._isStarted=!0,this._isRecievingPlayerTimestamp||this._playhead.start())},r.prototype.stop=function(){clearInterval(this._interval),this._playhead.stop(),this._isStarted=!1},r.prototype._update=function(){var e,n=parseInt(this._playerDelegate.getTimestamp(),10),i=!1,r=!1,o=!1,a=this.getTimestamp(),s=new Date,u=(s=s.getTime())-this._updateTime;this._updateTime=s,"number"==typeof n&&n>0&&(r=!0,this._isRecievingPlayerTimestamp=!0,this._playerDelegateTimestamp!==n&&(i=!0,this._echoClient.addLabel(t.MEDIA_TIMESTAMP,n)),e=n-a,r&&(0===this._playerDelegateTimestamp||e<0-u-1500||e>u+1500)&&(o=!0,this._playerDelegateTimestamp=n,this._playingTime+=this._playhead.getPosition(),this._restartPlayhead(),a=this.getTimestamp())),o||(0!==this._playerDelegateTimestamp&&!i||this._isRecievingPlayerTimestamp&&!r?this._playhead.stop():this._playhead.start()),this._updateSchedule(a)?(this._playingTime=0,this._playerDelegateTimestamp=n,this._restartPlayhead(),this._hb3NotSentYet=!0,this._hb5NotSentYet=!0):i&&this._echoClient.releaseSuppressedPlay(),this._updateHeartbeats(),this._previousPosition=this.getPosition()},r.prototype._updateSchedule=function(e){var t,n,r,o,a,s=!1;return this._essEnabled&&this._schedule.hasData()&&e>0&&(t=this._schedule.getBroadcast(e),(o=this._media.getClone()).setServiceId(this._schedule.serviceId),t||this._broadcast===i?!t||this._broadcast!==i&&t.version.id===this._broadcast.version.id||(this._broadcast=t,r=(n=t.published_time).end-n.start,o.setEssEnriched(!0),o.setVersionId(t.version.id),o.setLength(r),t.masterbrand&&t.masterbrand.id&&(a=t.masterbrand.id),o.setProducerByMasterbrand(a),t.episode&&t.episode.id&&o.setEpisodeId(t.episode.id),this._updateMedia(o),s=!0):(this._broadcast=i,o.setVersionId(null),o.setEpisodeId(null),o.setClipId(null),o.setVpId(null),this._updateMedia(o),s=!0)),s},r.prototype._updateHeartbeats=function(){var e,t;this._broadcast!==i&&(this._hb3NotSentYet||this._hb5NotSentYet)&&(e=this._playingTime+this._playhead.getPosition(),t=this.getPosition(),e>=3e3&&this._hb3NotSentYet&&(this._echoClient.avUserActionEvent("echo_hb","echo_hb_3",t),this._hb3NotSentYet=!1),e>=5e3&&this._hb5NotSentYet&&(this._echoClient.avUserActionEvent("echo_hb","echo_hb_5",t),this._hb5NotSentYet=!1))},r.prototype._updateMedia=function(e){var t=this.getPosition();this._echoClient.liveMediaUpdate(e,t,this._previousPosition),this._previousPosition=t},r.prototype._restartPlayhead=function(){this._playhead.reset(),this._playhead.start()},r.prototype.getPosition=function(){return this._broadcast&&this._broadcast!==i?this._playerDelegateTimestamp-this._broadcast.published_time.start+this._playhead.getPosition():this._playhead.getPosition()},r.prototype.getTimestamp=function(){return this._playerDelegateTimestamp+this._playhead.getPosition()},r}.apply(t,i))||(e.exports=r)},7656:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},7751:function(e,t,n){var i;void 0===(i=function(){"use strict";var e=n(2688);return{BBC_NEWS:e.BBC_NEWS_CHANNEL,BBC_NEWS24:e.BBC_NEWS_CHANNEL,BBC_WORLD_NEWS:e.BBC_WORLD_NEWS,BBC_AFRIQUE_RADIO:e.AFRIQUE,BBC_AFRIQUE_TV:e.AFRIQUE,BBC_AMHARIC_RADIO:e.AMHARIC,BBC_ARABIC_RADIO:e.ARABIC,BBC_ARABIC_TV:e.ARABIC,BBC_BENGALI_RADIO:e.BENGALI,BBC_BRASIL:e.BRASIL,BBC_BURMESES_RADIO:e.BURMESE,BBC_BURMESES_TV:e.BURMESE,BBC_CANTONESE_RADIO:e.CHINESE,BBC_DARI_RADIO:e.PERSIAN,BBC_GAHUZA_RADIO:e.GAHUZA,BBC_GUJARATI_TV:e.GUJARATI,BBC_HAUSA_RADIO:e.HAUSA,BBC_HAUSA_TV:e.HAUSA,BBC_HINDI_RADIO:e.HINDI,BBC_HINDI_TV:e.HINDI,BBC_IGBO_RADIO:e.IGBO,BBC_IGBO_TV:e.IGBO,BBC_INDONESIAN_RADIO:e.INDONESIAN,BBC_KOREAN_RADIO:e.KOREAN,BBC_KOREAN_TV:e.KOREAN,BBC_KYRGYZ_RADIO:e.KYRGYZ,BBC_KYRGYZ_TV:e.KYRGYZ,BBC_LEARNING_ENGLISH:e.WS_LEARNING_ENGLISH,BBC_MARATHI_TV:e.MARATHI,BBC_MUNDO:e.MUNDO,BBC_NEPALI_RADIO:e.NEPALI,BBC_OROMO_RADIO:e.AFAAN_OROMOO,BBC_PARLIAMENT:e.BBC_PARLIAMENT_CHANNEL,BBC_PASHTO_RADIO:e.PASHTO,BBC_PASHTO_TV:e.PASHTO,BBC_PERSIAN_RADIO:e.PERSIAN,BBC_PERSIAN_TV:e.PERSIAN,BBC_PIDGIN_RADIO:e.PIDGIN,BBC_PIDGIN_TV:e.PIDGIN,BBC_PUNJABI_TV:e.PUNJABI,BBC_RUSSIAN_RADIO:e.RUSSIAN,BBC_RUSSIAN_TV:e.RUSSIAN,BBC_SINHALA_RADIO:e.SINHALA,BBC_SOMALI_RADIO:e.SOMALI,BBC_SOMALI_TV:e.SOMALI,BBC_SWAHILI_RADIO:e.SWAHILI,BBC_SWAHILI_TV:e.SWAHILI,BBC_TAMIL_RADIO:e.TAMIL,BBC_TAMIL_TV:e.TAMIL,BBC_TELUGU_TV:e.TELUGU,BBC_THAI:e.THAI,BBC_TIGRINYA_RADIO:e.TIGRINYA,BBC_UKRAINIAN_TV:e.UKRAINIAN,BBC_URDU_RADIO:e.URDU,BBC_URDU_TV:e.URDU,BBC_UZBEK_RADIO:e.UZBEK,BBC_UZBEK_TV:e.UZBEK,BBC_WEATHER:e.WEATHER,BBC_WORLD_SERVICE:e.WORLD_SERVICE_ENGLISH,BBC_WORLD_SERVICE_TV:e.WORLD_SERVICE_ENGLISH,BBC_YORUBA_RADIO:e.YORUBA,BBC_YORUBA_TV:e.YORUBA,PARLIAMENTS_ONLINE:e.BBC_PARLIAMENT_CHANNEL,BBC_ALBA:e.BBC_ALBA,BBC_CYMRU:e.WALES,BBC_FOUR:e.BBC_FOUR,BBC_HD:e.BBC_HD,BBC_LONDON:e.ENGLISH_REGIONS,BBC_MUSIC:e.BBC_MUSIC,BBC_MUSIC_JAZZ:e.BBC_MUSIC,BBC_ONE:e.BBC_ONE,BBC_ONE_EAST:e.ENGLISH_REGIONS,BBC_ONE_EAST_MIDLANDS:e.ENGLISH_REGIONS,BBC_ONE_EAST_YORKSHIRE:e.ENGLISH_REGIONS,BBC_ONE_LONDON:e.ENGLISH_REGIONS,BBC_ONE_NORTH_EAST:e.ENGLISH_REGIONS,BBC_ONE_NORTH_WEST:e.ENGLISH_REGIONS,BBC_ONE_NORTHERN_IRELAND:e.NORTHERN_IRELAND,BBC_ONE_SCOTLAND:e.SCOTLAND,BBC_ONE_SOUTH:e.ENGLISH_REGIONS,BBC_ONE_SOUTH_EAST:e.ENGLISH_REGIONS,BBC_ONE_SOUTH_WEST:e.ENGLISH_REGIONS,BBC_ONE_WALES:e.WALES,BBC_ONE_WEST:e.ENGLISH_REGIONS,BBC_ONE_WEST_MIDLANDS:e.ENGLISH_REGIONS,BBC_ONE_YORKS:e.ENGLISH_REGIONS,BBC_SCOTLAND:e.BBC_SCOTLAND,BBC_TEES:e.ENGLISH_REGIONS,BBC_THREE:e.BBC_THREE,BBC_TWO:e.BBC_TWO,BBC_TWO_ENGLAND:e.ENGLISH_REGIONS,BBC_TWO_NORTHERN_IRELAND:e.NORTHERN_IRELAND,BBC_TWO_NORTHERN_IRELAND_DIGITAL:e.NORTHERN_IRELAND,BBC_TWO_SCOTLAND:e.SCOTLAND,BBC_TWO_WALES:e.WALES,BBC_WALES:e.WALES,BBC_WM:e.ENGLISH_REGIONS,CBBC:e.CBBC,CBEEBIES:e.CBEEBIES,BBC_1XTRA:e.BBC_RADIO_1XTRA,BBC_6MUSIC:e.BBC_RADIO_6_MUSIC,BBC_7:e.BBC_RADIO_4_EXTRA,BBC_ASIAN_NETWORK:e.BBC_ASIAN_NETWORK,BBC_RADIO_BERKSHIRE:e.ENGLISH_REGIONS,BBC_RADIO_BRISTOL:e.ENGLISH_REGIONS,BBC_RADIO_CAMBRIDGE:e.ENGLISH_REGIONS,BBC_RADIO_CORNWALL:e.ENGLISH_REGIONS,BBC_RADIO_COVENTRY_WARWICKSHIRE:e.ENGLISH_REGIONS,BBC_RADIO_CUMBRIA:e.ENGLISH_REGIONS,BBC_RADIO_CYMRU:e.WALES,BBC_RADIO_CYMRU_2:e.WALES,BBC_RADIO_CYMRU_MWY:e.WALES,BBC_RADIO_DERBY:e.ENGLISH_REGIONS,BBC_RADIO_DEVON:e.ENGLISH_REGIONS,BBC_RADIO_ESSEX:e.ENGLISH_REGIONS,BBC_RADIO_FIVE_LIVE:e.BBC_RADIO_5_LIVE,BBC_RADIO_FIVE_LIVE_OLYMPICS_EXTRA:e.BBC_RADIO_5_LIVE,BBC_RADIO_FIVE_LIVE_SPORTS_EXTRA:e.BBC_RADIO_5_LIVE,BBC_RADIO_FOUR:e.BBC_RADIO_4,BBC_RADIO_FOUR_EXTRA:e.BBC_RADIO_4_EXTRA,BBC_RADIO_FOYLE:e.NORTHERN_IRELAND,BBC_RADIO_GLOUCESTERSHIRE:e.ENGLISH_REGIONS,BBC_RADIO_GUERNSEY:e.ENGLISH_REGIONS,BBC_RADIO_HEREFORD_WORCESTER:e.ENGLISH_REGIONS,BBC_RADIO_HUMBERSIDE:e.ENGLISH_REGIONS,BBC_RADIO_JERSEY:e.ENGLISH_REGIONS,BBC_RADIO_KENT:e.ENGLISH_REGIONS,BBC_RADIO_LANCASHIRE:e.ENGLISH_REGIONS,BBC_RADIO_LEEDS:e.ENGLISH_REGIONS,BBC_RADIO_LEICESTER:e.ENGLISH_REGIONS,BBC_RADIO_LINCOLNSHIRE:e.ENGLISH_REGIONS,BBC_RADIO_MANCHESTER:e.ENGLISH_REGIONS,BBC_RADIO_MERSEYSIDE:e.ENGLISH_REGIONS,BBC_RADIO_NAN_GAIDHEAL:e.SCOTLAND,BBC_RADIO_NEWCASTLE:e.ENGLISH_REGIONS,BBC_RADIO_NORFOLK:e.ENGLISH_REGIONS,BBC_RADIO_NORTHAMPTON:e.ENGLISH_REGIONS,BBC_RADIO_NOTTINGHAM:e.ENGLISH_REGIONS,BBC_RADIO_ONE:e.BBC_RADIO_1,BBC_RADIO_ONE_VINTAGE:e.BBC_RADIO_1,BBC_RADIO_OXFORD:e.ENGLISH_REGIONS,BBC_RADIO_SCOTLAND:e.SCOTLAND,BBC_RADIO_SCOTLAND_FM:e.SCOTLAND,BBC_RADIO_SCOTLAND_MUSIC_EXTRA:e.SCOTLAND,BBC_RADIO_SHEFFIELD:e.ENGLISH_REGIONS,BBC_RADIO_SHROPSHIRE:e.ENGLISH_REGIONS,BBC_RADIO_SOLENT:e.ENGLISH_REGIONS,BBC_RADIO_SOMERSET_SOUND:e.ENGLISH_REGIONS,BBC_RADIO_STOKE:e.ENGLISH_REGIONS,BBC_RADIO_SUFFOLK:e.ENGLISH_REGIONS,BBC_RADIO_SURREY:e.ENGLISH_REGIONS,BBC_RADIO_SUSSEX:e.ENGLISH_REGIONS,BBC_RADIO_SWINDON:e.ENGLISH_REGIONS,BBC_RADIO_THREE:e.BBC_RADIO_3,BBC_RADIO_TWO:e.BBC_RADIO_2,BBC_RADIO_TWO_COUNTRY:e.BBC_RADIO_2,BBC_RADIO_TWO_EUROVISION:e.BBC_RADIO_2,BBC_RADIO_TWO_FIFTIES:e.BBC_RADIO_2,BBC_RADIO_ULSTER:e.NORTHERN_IRELAND,BBC_RADIO_WALES:e.WALES,BBC_RADIO_WILTSHIRE:e.ENGLISH_REGIONS,BBC_RADIO_YORK:e.ENGLISH_REGIONS,BBC_SOUNDS_MIXES:e.SOUNDS,BBC_SOUNDS_PODCASTS:e.SOUNDS,BBC_SOUTHERN_COUNTIES_RADIO:e.ENGLISH_REGIONS,BBC_THREE_COUNTIES_RADIO:e.ENGLISH_REGIONS,CBEEBIES_RADIO:e.CBEEBIES,BBC_SPORT:e.SPORT,getProducerId:function(e){var t;return e&&(t=this[e.toUpperCase()]),t}}}.call(t,n,t,e))||(e.exports=i)},7775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(7037))&&i.__esModule?i:{default:i};var o=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=o},7950:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(6419),i=n(6326),r=n(7342),o=n(2032),a=["player_name","ns_st_ws","bbc_site","app_type","app_name","bbc_store_pf","bbc_store_ed","bbc_store_fr","bbc_store_src"],s=["token","guardianToken","nonce","dateOfBirthDay","dateOfBirthMonth","dateOfBirthYear","dateOfBirth","permissionToken"],u={name:o.COUNTERNAME};u[r.ManagedLabels.EVENT_MASTER_BRAND]=o.EVENT_MASTER_BRAND;for(var c=0;c<a.length;c++)u[a[c]]=o.STRICT;function l(e){if(!e)return e;for(var t=e.toLowerCase().replace(/[^a-z0-9]+/g,"_");"_"===t.charAt(0);)t=t.slice(1);for(;"_"===t.charAt(t.length-1);)t=t.slice(0,-1);return t}function d(e){var n=l(e);return t.assert(e===n,'Label key can only contain: [a-z0-9_], and no consecutive "_"s or "_" at the begining or end, got "'+e+'". This will be sent as "'+n+'"',!0),n}function p(e){if("string"!=typeof e||e.length>1e3)return"no.name.page";var t=e&&e.toLowerCase().replace(/[^a-z0-9\.]+/g,"_").replace(/\.+/g,".").replace(/^_+/,"").replace(/_+$/,"")||"no.name.page";return e!==t&&(e&&-1!==e.search(/-/)?i.warn('Submitted countername ("'+e+'") contains at least one "-". Dashes are not permitted but, for legacy reasons, "-" and "_" are equivalent in DAx. Echo converts dashes to underscores, so the countername will be sent as "'+t+'"'):i.warn('countername may only contain: [a-z0-9._], got "'+e+'". This will be cleaned up and sent as "'+t+'"')),-1===t.search(/\.page$/)&&(t+=".page"),t}function h(e,n){var r,a="",s=n,c=(r=e,u.hasOwnProperty(r)?u[r]:o.CUSTOM);if(c===o.COUNTERNAME&&(n=p(n)),"number"==typeof n||"boolean"==typeof n)return n.toString();if("string"==typeof n){switch(c){case o.EVENT_MASTER_BRAND:a='Label value can only contain [0-9a-z], and no consecutive "_"s and no "_"s or whitespace at the start or end.',s=function(e){return l(e)}(n);break;case o.STRICT:a='Strict Label values can only contain [ 0-9a-z-], and no consecutive "-"s and no "-"s or whitespace at the start or end.',s=function(e){return e&&t.trim(e).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}(n);break;case o.NO_CLEANSING:break;default:a="Custom Label value cannot contain whitespace at start or end or pipes (|).",s=function(e){return e&&t.trim(e).replace(/\|/g,"!")}(n)}return a+='Got "'+n+'", will be replaced with "'+s+'"',t.assert(n===s,a,!0),s}i.error("Label "+e+" must have number, boolean or string value")}return{cleanCounterName:p,cleanLabelKey:d,cleanLabelValue:h,cleanLanguage:function(e){if("number"==typeof e||"boolean"==typeof e)return e.toString();var n=e&&t.trim(e).replace(/[^0-9a-zA-Z._]+/g,"-").replace(/(^-)|(-$)/g,"")||"";return t.assert(e===n,'Language label value can only contain [0-9a-zA-Z._-], and no consecutive "-"s and no - at the start or end. Got "'+e+'", will be replaced with "'+n+'"',!0),n},cleanLabels:function(e){var t,n={};for(var i in e)n[t=d(i)]=h(t,e[i]);return n},cleanCustomVariable:function(e){return e&&e.toString().replace(/[\u200B-\u200D\uFEFF]+/g,"").trim().replace(/\[|\]/g,"").replace(/&/g,"$").replace(/\s{1,}/g," ")},cleanMediaId:function(e){return"string"!=typeof e?e:e&&t.trim(e).replace(/\s+/g,"_").replace(/[^a-zA-Z0-9/.~\-_]/g,"")},removeSensitiveInfo:function(e){if(e&&"string"==typeof e)for(c=0;c<s.length;c++){var t=new RegExp(s[c]+"=[^&]*","g");e=e.replace(t,s[c]+"=XXXX")}return e},removeUndefined:function(e){return Object.keys(e).forEach(function(t){void 0===e[t]&&(i.info("Removing key "+t+" as value is undefined"),delete e[t])}),e}}}.call(t,n,t,e))||(e.exports=i)},8149:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(3089),i=n(1835),r=n(6326),o=n(7342),a=n(225);function s(){return-1}function u(e,t,n,r){this._sensors=null,this._broker=null,this._media=null,this._meta={},this._stream=null,this._env=r,this._siteCode=n[i.BARB_SITE_CODE],this._debug=n[i.BARB_DEBUG],this._debugEnableShortMedia=n[i.BARB_DEBUG_ENABLE_SHORT_MEDIA],this._traceId=null,this._isPlaying=!1,this._isEssEnabled=!1,this._isEnabled=!0,this._hasStarted=!1,n[i.ECHO_TRACE]&&this.setTraceId(n[i.ECHO_TRACE]),n[i.USE_ESS]&&(this._isEssEnabled=!0),n&&!1===n[i.BARB_ENABLED]?this._isEnabled=!1:this._isEnabled=!0}return u.prototype.start=function(){this._hasStarted||(this._hasStarted=!0)},u.prototype.enable=function(){this._isEnabled||(this._isEnabled=!0)},u.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1,this.clearMedia())},u.prototype.setTraceId=function(e){this._traceId=e},u.SpringStreams=n(8215),u.prototype.addLabels=s,u.prototype.addLabel=s,u.prototype.addProperties=s,u.prototype.addCampaignProperties=s,u.prototype.addProperty=s,u.prototype.addManagedLabel=s,u.prototype.removeLabels=s,u.prototype.removeLabel=s,u.prototype.removeProperties=s,u.prototype.removeProperty=s,u.prototype.setLoggedInToBBCId=s,u.prototype.setLoggedOutOfBBCId=s,u.prototype.setAppVersion=s,u.prototype.setCounterName=s,u.prototype.setContentLanguage=s,u.prototype.setCacheMode=s,u.prototype.clearCache=s,u.prototype.flushCache=s,u.prototype.setESSEnabled=s,u.prototype.viewEvent=s,u.prototype.errorEvent=s,u.prototype.userActionEvent=s,u.prototype.setPlayerName=function(e){this._meta[t.PLAYER_DESC]=e},u.prototype.setPlayerVersion=function(e){this._meta[t.PLAYER_VERSION]=e},u.prototype.setPlayerIsPopped=s,u.prototype.setPlayerWindowState=s,u.prototype.setPlayerVolume=s,u.prototype.setPlayerIsSubtitled=s,u.prototype.setDestination=s,u.prototype.setProducer=s,u.prototype.setBroker=function(e){return this._broker=e,this},u.prototype.setMedia=function(e){this._eventsEnabled()&&(this.clearMedia(),this._media=e.getClone())},u.prototype.setMediaLength=function(e){this._media.setLength(e)},u.prototype.liveMediaUpdate=function(e){this._media=e.getClone(),this._isPlaying&&this._startTracking()},u.prototype.liveEnrichmentFailed=function(){this._media&&!this._media.getServiceId()&&this._media.setServiceId("no-service-id-found"),this._isPlaying&&this._startTracking()},u.prototype.avPlayEvent=function(e,t){!this._eventsEnabled()||!this._debugEnableShortMedia&&this._isShortMedia()&&this._media.isOnDemand()||this.isValidMedia()&&this._broker&&(this._initSensors(),this._isPlaying=!0,this._media.isLive()&&!this._media.getServiceId()?this._isEssEnabled&&(this._media.getVersionId()||this._media.getVpId())||(this._media.setServiceId("invalid-data"),this._startTracking()):this._startTracking())},u.prototype._initSensors=function(){if(null===this._sensors){if(this._sensors=new u.SpringStreams(this._siteCode),null!==this._env.getSetLocalStorageItem()&&null!==this._env.getGetLocalStorageItem()&&null!==this._env.getHttpGet()){r.info("Using custom PageContext for BARB");var e=new a("com.kma.springstreams",this._env);this._sensors.setPageContext(e)}this._debug&&(this._sensors.debug=function(e){r.info("Spring DEBUG: "+e)})}},u.prototype._startTracking=function(){if(null===this._stream){var e=this._getAttributes(),n=e[t.PID]||" ";this._stream=this._sensors.track(n,e,this._getAdaptor())}},u.prototype._getMostPrecedentIdObject=function(){var e=this._media.getVersionIdObject(),t=this._media.getEpisodeIdObject(),n=this._media.getClipIdObject(),i=this._media.getVpIdObject(),r=this._media.getServiceIdObject();return e.isValueValid()?e:t.isValueValid()?t:n.isValueValid()?n:i.isValueValid()?i:r.isValueValid()?r:null},u.prototype._getAttributes=function(){var e=this._media,n={};if(this._traceId&&(n[i.ECHO_TRACE]=this._traceId),!e.isLive()){var r=this._getMostPrecedentIdObject();null!==r&&(n[t.PID]=r.getValue())}return e.isOnDemand()?n[t.STREAM]="od":e.isDownload()?n[t.STREAM]="dwn":e.isLive()&&e.getServiceIdObject().isValueValid()&&(n[t.STREAM]="live/"+e.getServiceId()),n},u.prototype._getAdaptor=function(){var e,t=this;return e=this._media.isLive()?function(){return t._broker.getTimestamp()}:function(){return t._broker.getPosition()},{getMeta:function(e){return t._meta},getDuration:function(e){var n=0;return t._media.isLive()||(n=Math.floor(t._media.getLength()/1e3)),n},getPosition:function(t){return Math.floor(e()/1e3)}}},u.prototype._eventsEnabled=function(){return this._isEnabled&&this._hasStarted},u.prototype.avPauseEvent=function(){},u.prototype.avBufferEvent=function(){},u.prototype.avEndEvent=function(){!this._eventsEnabled()||!this._debugEnableShortMedia&&this._isShortMedia()&&this._media.isOnDemand()||(this._isPlaying=!1,this.isValidMedia()&&this.clearMedia())},u.prototype.avRewindEvent=function(){},u.prototype.avFastForwardEvent=function(){},u.prototype.avSeekEvent=function(){},u.prototype.avUserActionEvent=s,u.prototype.clearMedia=function(){this.isValidMedia()&&(this._stream&&this._stream.stop(),this._stream=null,this._media=null)},u.prototype.isValidMedia=function(){return null!==this._media&&this._media.avType===o.AvType.VIDEO},u.prototype.isValidLiveMedia=function(){return this.isValidMedia()&&this._media.isLive()},u.prototype.setDeviceId=s,u.prototype.requiresLabelCleansing=function(){return!0},u.prototype._isShortMedia=function(){return null!==this._media&&this._media.getLength()<3e4&&0!==this._media.getLength()},u}.call(t,n,t,e))||(e.exports=i)},8215:function(e,t,n){var i;void 0===(i=function(){function e(e,n){this.namespace="com.kantarmedia.sensors.javascript",this.version="3.0.0";var i="2cnt.net",r="default",o=new Array;this.namespace="com.kma.springstreams",this.updateTimer=!1,this.syncTimer=!1,this.syncrate=20,this.pausesync=6,this.maxstates=100,this.workerRunning=!1;var a,s=!0;this.nextuid="";var u,c={"+":"%2B",",":"%2C",";":"%3B","=":"%3D","~":"%7E","*":"%2A","'":"%27","!":"%21","(":"%28",")":"%29"},l=this,d=!0;!function(e){var t;if(e){for(var n in e)n===i&&(t=e[n]);t&&function(e){e&&(u=e)}(t.syncrates)}}({"2cnt.net":{syncrates:[3,7,10,10,10,10,10,60]}}),e&&(r=e);var p=null;n&&n.tan&&(p=function(e){try{var t=function(e){var t=/^([\d\w]{16})\.([\d\w]+)\.([\d\w]{16})$/;if(t.test(e)){var n=e.match(t),i=parseInt(n[2],36);if(!isNaN(i))return{value:n[1],expiryDate:i,hash:n[3]}}return null}(e);return t||function(e){var t=e.split(".");if(3===t.length){var n=parseInt(t[1],36);if(!isNaN(n))return{value:t[0],expiryDate:n,hash:t[2]}}return console.warn("Invalid TAN"),null}(e)}catch(e){return console.warn("Invalid TAN"),null}}(n.tan))&&!L()&&console.warn("TAN expired, please generate a new one");var h=!1;if((window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&(h=!0),(!window.URL||!window.Blob||!window.Worker||h||n&&0==n.worker)&&(d=!1),d)var _=new Blob(['onmessage = function (evt) {if(evt.data == "start"){postMessage("open");if(!self.updateTimer)self.updateTimer = setInterval(function(){postMessage("update")},200);if(!self.syncTimer)self.syncTimer = setInterval(function(){postMessage("sync")},2000);}if(evt.data == "stop"){clearInterval(self.updateTimer);clearInterval(self.syncTimer);postMessage("close");self.close();}};'],{type:"text/javascript"}),f=URL.createObjectURL(_);function E(){a=new Worker(f),l.workerRunning=!0,a.onmessage=function(e){"open"==e.data&&(l.updateTimer=l.syncTimer=!0),"sync"==e.data&&T(),"update"==e.data&&v(),"close"==e.data&&(l.workerRunning=!1)},a.onerror=function(e){l.workerRunning=!1,a.postMessage("stop"),console.error(e.message),g()}}if(d)try{E()}catch(e){l.workerRunning=!1,d=!1}function g(){l.updateTimer||(l.updateTimer=setInterval(v,200)),l.syncTimer||(l.syncTimer=setInterval(T,2e3))}function m(){this.nextuid="",clearInterval(l.updateTimer),clearInterval(l.syncTimer),l.updateTimer=!1,l.syncTimer=!1,this.workerRunning=!1,d&&a.postMessage("stop");for(var e=0;e<o.length;++e)try{o[e].stop()}catch(e){I(e)}}function v(e){for(var t=0;t<o.length;++t)try{o[t].update(e)}catch(e){I(e)}}function T(e){for(var t=0;t<o.length;++t)try{o[t].sync()}catch(e){I(e)}}function I(e){O("",e)}function C(e,t){return P([[e,t]])}function S(e){return e&&void 0!==e.site?e.site:r}function A(){return void 0===l.pageContext.getWindowLocationURL()?"http://":"https"===l.pageContext.getWindowLocationURL().slice(0,5)?"https://":"http://"}function y(){if(!l.nlso)try{var e,t="i00";if(void 0!==l.pageContext.getUniqueId&&(t=i),e=l.pageContext.getLocalStorageItem(t))return"&c="+e;var n="0000",r=n+Math.ceil((new Date).getTime()/1e3).toString(16)+(32768|65535*Math.random()).toString(16)+n;l.pageContext.setLocalStorageItem(t,r)}catch(e){l.warn("error"+e)}return""}function O(e,t){var r;(void 0!==l.pageContext.tracking&&(s=l.pageContext.tracking),s)&&(void 0===t.stream||""==t.stream?l.warn("Stream is mandatory for measurement"):(n&&n.tan&&L()&&(e.tan=n.tan),r=A()+S(t)+"."+i+"/j0="+C(e,t)+"?lt="+(new Date).getTime().toString(36)+y(),l.pageContext.preloadImage(r),l.debug(r)))}function P(e){var t,n,i,r,o,a=/[+&,;=~!*'()]/g;switch(typeof e){case"string":return a.test(e)?encodeURIComponent(e).replace(a,function(e){var t=c[e];return t||e}):encodeURIComponent(e);case"number":return isFinite(e)?e.toString():"null";case"boolean":case"null":return e.toString();case"object":if(!e)return"null";if(t=[],"number"==typeof e.length&&!e.propertyIsEnumerable("length")){for(r=e.length,n=0;n<r;n+=1)t.push(P(e[n])||"null");return","+t.join("+")+";"}for(i in e)"string"==typeof i&&"site"!==i&&(o=P(e[i]))&&t.push(P(i)+"="+o);return","+t.join("+")+";"}return""}function b(e,t,n,i){var r,o="";o=e.getNextUID(),e.nextuid=null,""==o&&(r=Math.round(1e10*Math.random()).toString(36),o=(new Date).getTime().toString(36)+r);var a,s,u,c,d,p,h,_,f=Math.round((new Date).getTime()/1e3),E=[0,0,f.toString(36)],g=0,m=0,v=!0,T=!1,C=0;function S(e){(function(e){u.length<a.maxstates&&u.push(e)})(E=[e,e,Math.round((new Date).getTime()/1e3).toString(36)]),v=!0,g=0}function A(){null!=h&&_<h.length&&(p=h[_++],a.debug("switch syncrate to "+p))}function y(){void 0!==l.pageContext.getSerialNumber?l.pageContext.getSerialNumber(O):O()}function O(){if(v){try{s.width&&(c.sx=s.width),s.videoWidth&&(c.sx=s.videoWidth),s.height&&(c.sy=s.height),s.videoHeight&&(c.sy=s.videoHeight)}catch(e){}var e;c.uid=o,c.pst=u;try{c.dur&&0!==c.dur||(c.dur=d.getDuration(s))}catch(e){}try{e=d.getMeta(s),void 0!==l.pageContext.getDeviceID&&void 0!==l.pageContext.getDeviceID()&&(e[l.pageContext.getDeviceID().id_name]=l.pageContext.getDeviceID().id_value)}catch(e){}void 0===e.v&&(e.v="js "+l.version),c.vt=Math.round((new Date).getTime()/1e3)-f,void 0!==l.pageContext.getUniqueId&&(e.psid=l.pageContext.getUniqueId()),void 0!==l.pageContext&&void 0!==l.pageContext.addElectronParameters&&(l.pageContext.addElectronParameters(e),e.v="E "+l.version),void 0!==l.pageContext&&void 0!==l.pageContext.isCasting&&l.pageContext.isCasting(),void 0!==l.pageContext&&void 0!==l.pageContext.getChromecastID&&(e.v="C "+l.version,e.cid=l.pageContext.getChromecastID()),a.send(e,c),m=E[1]}v=!1}a=e,s=t,d=i||a.HTML5Adapter,c=function(e){var t=new Object;for(var n in e)t[n]=e[n];return t}(n),(u=new Array).push(E),_=0,p=e.syncrate,h=e.getSyncRates(),A(),this.update=function(e){if(!T){var t=E[1],n=t;try{n=Math.round(d.getPosition(s))}catch(e){}try{if(t===n)return void(g>=0&&++g===a.pausesync&&(v=!0));g>=a.pausesync?S(n):t<n-1||t>n?function(e){setTimeout(function(){e==Math.round(d.getPosition(s))||e+1==Math.round(d.getPosition(s))?++C>=5&&(C=0,(e-E[1]>1||E[1]-e>1)&&S(e)):C=0},200)}(n):(E[1]=n,E[1]-E[0]>=p&&n-m>=p&&(v=!0,A()),g=0)}catch(e){I=!0,a.error(e)}}},this.stop=function(){T||(v=!0,T=!0,y())},this.sync=y}function R(e,t){localStorage.setItem(e,t)}function N(e){return localStorage.getItem(e)}function L(){if(!p)return!1;var e=Math.floor(Date.now()/1e3);return e<p.expiryDate&&e>p.expiryDate-7200}this.getSyncRates=function(){return u},this.track=function(e,t,n){d?function(){l.workerRunning||E();a.postMessage("start")}():g();var i=n;if(void 0===l.pageContext&&(window.cordova?"browser"===device.platform?(l.debug("Detected cordova browser-mode falling back to HTML5 context / adapter"),l.pageContext=l.defaultPageContext,i=this.HTML5Adapter):(l.nlso=!0,l.debug("Detected cordova context"),l.pageContext=l.cordovaPageContext):l.pageContext=l.defaultPageContext),void 0!==l.pageContext.generateId&&l.pageContext.generateId(),e){void 0!==l.pageContext&&void 0!==l.pageContext.initHooks&&l.pageContext.initHooks();var r=new b(this,e,t,i);return o.push(r),r}},this.trackWithUID=function(e,t,n,i){return i!=this.nextuid?void 0:this.track(e,t,n)},this.getNextUID=function(){var e;return""!=this.nextuid&&null!=this.nextuid||(this.nextuid=(e=Math.round(1e10*Math.random()).toString(36),(new Date).getTime().toString(36)+e)),this.nextuid},this.unload=m,this.doUpdate=v,this.doSync=T,this.error=I,this.debug=function(e){console.debug(e)},this.warn=function(e){console.warn(e)},this.send=O,this.defaultPageContext={getLocalStorageItem:N,setLocalStorageItem:R,preloadImage:function(e){(new Image).src=e},getWindowLocationURL:function(){return document.location.href},initHooks:function(){}},this.cordovaPageContext={getLocalStorageItem:N,setLocalStorageItem:R,preloadImage:function(e){var t="Cordova <"+device.platform+" "+device.version+">";cordova.plugin.http.setHeader("User-Agent",t),cordova.plugin.http.sendRequest(e,{method:"get"},function(e){l.debug("Request respopnse: "+e.status)},function(e){l.warn("Request respopnse: "+e.status+":"+e.error)})},getWindowLocationURL:function(){return"https://"},initHooks:function(){if(null==l.cordovaSetCloseHook){l.cordovaSetCloseHook,document.addEventListener("pause",function(){m()},!1)}}},this.HTML5Adapter={getMeta:function(e){return{pl:"HTML 5 Video",plv:"HTML 5",sx:screen.width,sy:screen.height}},getPosition:function(e){return e.currentTime},getDuration:function(e){return Math.round(e.duration)}},this.DefaultAdapter={getMeta:function(e){return{pl:"DEF",plv:version,sx:screen.width,sy:screen.height}},getPosition:function(e){return(new Date).getTime()/1e3},getDuration:function(e){return 0}},this.WMStreamAdapter={getMeta:function(e){return{pl:"MSWM",plv:e.versionInfo,sx:screen.width,sy:screen.height}},getPosition:function(e){if(e.CurrentPosition)return e.CurrentPosition;if(e.currentPosition)return e.currentPosition;if(e.controls&&e.controls.currentPosition)return e.controls.currentPosition;if(e.Controls&&e.Controls.currentPosition)return e.Controls.currentPosition;return 0},getDuration:function(e){if(e.currentMedia){if(e.currentMedia.Duration)return e.currentMedia.Duration;if(e.currentMedia.duration)return e.currentMedia.duration}else if(e.CurrentMedia){if(e.CurrentMedia.duration)return e.CurrentMedia.duration;if(e.CurrentMedia.Duration)return e.CurrentMedia.Duration}}},this.RVStreamAdapter={getMeta:function(e){return{pl:"RV",plv:e.GetVersionInfo(),sx:screen.width,sy:screen.height}},getPosition:function(e){return e.GetPosition()/1e3},getDuration:function(e){return e.GetLength()/1e3}},this.HTML5CordovaAdapter={getMeta:function(e){var n="CDV "+l.version;void 0===l.cordovaAppName&&(l.cordovaAppName="",cordova.getAppVersion.getAppName().then(function(e){l.cordovaAppName=e}));void 0===l.cordovaAppVersion&&(l.cordovaAppVersion="",cordova.getAppVersion.getVersionNumber().then(function(e){l.cordovaAppVersion=e}));return"Android"==device.platform?(l.cordovaGID=t(device.uuid).substring(0,16),void 0===l.cordovaAID&&(l.cordovaAID="",void 0!==cordova.plugins.idfa&&cordova.plugins.idfa.getInfo().then(function(e){l.cordovaAID=t(e.aaid).substring(0,16),l.cordovaLimitAdTracking=e.limitAdTracking})),{pl:"HTML 5 Video",plv:"HTML 5",v:n,sx:screen.width,sy:screen.height,aid:l.cordovaAID,gid:l.cordovaGID,os:device.platform,osv:device.version,av:l.cordovaAppVersion,an:l.cordovaAppName,app:l.cordovaAppName}):"iOS"==device.platform?(l.cordovaIFV=t(device.uuid).substring(0,16),{pl:"HTML 5 Video",plv:"HTML 5",v:n,sx:screen.width,sy:screen.height,ifv:l.cordovaIFV,os:device.platform,osv:device.version,av:l.cordovaAppVersion,an:l.cordovaAppName,app:l.cordovaAppName}):{pl:"HTML 5 Video",plv:"HTML 5",v:n,sx:screen.width,sy:screen.height,os:device.platform,osv:device.version,an:l.cordovaAppName,av:l.cordovaAppVersion}},getPosition:function(e){return e.currentTime},getDuration:function(e){return Math.round(e.duration)}}}function t(e){var t,n,i,r,o,a,s,u,c,l,d,p=function(e,t){return e<<t|e>>>32-t},h=function(e,t){var n,i,r,o,a;return r=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(i=1073741824&t)?2147483648^a^r^o:n|i?1073741824&a?3221225472^a^r^o:1073741824^a^r^o:a^r^o},_=function(e,t,n,i,r,o,a){var s;return e=h(e,h(h((s=t)&n|~s&i,r),a)),h(p(e,o),t)},f=function(e,t,n,i,r,o,a){var s;return e=h(e,h(h(t&(s=i)|n&~s,r),a)),h(p(e,o),t)},E=function(e,t,n,i,r,o,a){return e=h(e,h(h(t^n^i,r),a)),h(p(e,o),t)},g=function(e,t,n,i,r,o,a){return e=h(e,h(h(n^(t|~i),r),a)),h(p(e,o),t)},m=function(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n};for(u=1732584193,c=4023233417,l=2562383102,d=271733878,t=(n=function(e){for(var t,n=e.length,i=n+8,r=16*((i-i%64)/64+1),o=new Array(r-1),a=0,s=0;s<n;)a=s%4*8,o[t=(s-s%4)/4]=o[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,o[t=(s-s%4)/4]=o[t]|128<<a,o[r-2]=n<<3,o[r-1]=n>>>29,o}(e=function(e){var t,n,i,r="";t=n=0,i=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length;for(var o=0;o<i;o++){var a=e.charCodeAt(o),s=null;a<128?n++:s=a>127&&a<2048?String.fromCharCode(a>>6|192)+String.fromCharCode(63&a|128):String.fromCharCode(a>>12|224)+String.fromCharCode(a>>6&63|128)+String.fromCharCode(63&a|128),null!=s&&(n>t&&(r+=e.substring(t,n)),r+=s,t=n=o+1)}return n>t&&(r+=e.substring(t,e.length)),r}(e))).length,i=0;i<t;i+=16)r=u,o=c,a=l,s=d,u=_(u,c,l,d,n[i+0],7,3614090360),d=_(d,u,c,l,n[i+1],12,3905402710),l=_(l,d,u,c,n[i+2],17,606105819),c=_(c,l,d,u,n[i+3],22,3250441966),u=_(u,c,l,d,n[i+4],7,4118548399),d=_(d,u,c,l,n[i+5],12,1200080426),l=_(l,d,u,c,n[i+6],17,2821735955),c=_(c,l,d,u,n[i+7],22,4249261313),u=_(u,c,l,d,n[i+8],7,1770035416),d=_(d,u,c,l,n[i+9],12,2336552879),l=_(l,d,u,c,n[i+10],17,4294925233),c=_(c,l,d,u,n[i+11],22,2304563134),u=_(u,c,l,d,n[i+12],7,1804603682),d=_(d,u,c,l,n[i+13],12,4254626195),l=_(l,d,u,c,n[i+14],17,2792965006),u=f(u,c=_(c,l,d,u,n[i+15],22,1236535329),l,d,n[i+1],5,4129170786),d=f(d,u,c,l,n[i+6],9,3225465664),l=f(l,d,u,c,n[i+11],14,643717713),c=f(c,l,d,u,n[i+0],20,3921069994),u=f(u,c,l,d,n[i+5],5,3593408605),d=f(d,u,c,l,n[i+10],9,38016083),l=f(l,d,u,c,n[i+15],14,3634488961),c=f(c,l,d,u,n[i+4],20,3889429448),u=f(u,c,l,d,n[i+9],5,568446438),d=f(d,u,c,l,n[i+14],9,3275163606),l=f(l,d,u,c,n[i+3],14,4107603335),c=f(c,l,d,u,n[i+8],20,1163531501),u=f(u,c,l,d,n[i+13],5,2850285829),d=f(d,u,c,l,n[i+2],9,4243563512),l=f(l,d,u,c,n[i+7],14,1735328473),u=E(u,c=f(c,l,d,u,n[i+12],20,2368359562),l,d,n[i+5],4,4294588738),d=E(d,u,c,l,n[i+8],11,2272392833),l=E(l,d,u,c,n[i+11],16,1839030562),c=E(c,l,d,u,n[i+14],23,4259657740),u=E(u,c,l,d,n[i+1],4,2763975236),d=E(d,u,c,l,n[i+4],11,1272893353),l=E(l,d,u,c,n[i+7],16,4139469664),c=E(c,l,d,u,n[i+10],23,3200236656),u=E(u,c,l,d,n[i+13],4,681279174),d=E(d,u,c,l,n[i+0],11,3936430074),l=E(l,d,u,c,n[i+3],16,3572445317),c=E(c,l,d,u,n[i+6],23,76029189),u=E(u,c,l,d,n[i+9],4,3654602809),d=E(d,u,c,l,n[i+12],11,3873151461),l=E(l,d,u,c,n[i+15],16,530742520),u=g(u,c=E(c,l,d,u,n[i+2],23,3299628645),l,d,n[i+0],6,4096336452),d=g(d,u,c,l,n[i+7],10,1126891415),l=g(l,d,u,c,n[i+14],15,2878612391),c=g(c,l,d,u,n[i+5],21,4237533241),u=g(u,c,l,d,n[i+12],6,1700485571),d=g(d,u,c,l,n[i+3],10,2399980690),l=g(l,d,u,c,n[i+10],15,4293915773),c=g(c,l,d,u,n[i+1],21,2240044497),u=g(u,c,l,d,n[i+8],6,1873313359),d=g(d,u,c,l,n[i+15],10,4264355552),l=g(l,d,u,c,n[i+6],15,2734768916),c=g(c,l,d,u,n[i+13],21,1309151649),u=g(u,c,l,d,n[i+4],6,4149444226),d=g(d,u,c,l,n[i+11],10,3174756917),l=g(l,d,u,c,n[i+2],15,718787259),c=g(c,l,d,u,n[i+9],21,3951481745),u=h(u,r),c=h(c,o),l=h(l,a),d=h(d,s);return(m(u)+m(c)+m(l)+m(d)).toLowerCase()}return e.prototype.setPageContext=function(e){this.pageContext=e},e}.call(t,n,t,e))||(e.exports=i)},8250:function(e,t,n){var i;void 0===(i=function(){"use strict";function e(){this.reset()}return e.prototype.start=function(){!0!==this._isPlaying&&(this._isPlaying=!0,this._startTime=this._getCurrentTime())},e.prototype.reset=function(){this._isPlaying=!1,this._position=0,this._startTime=0},e.prototype.stop=function(){this._isPlaying&&(this._isPlaying=!1,this._position+=this._getCurrentTime()-this._startTime,this._startTime=0)},e.prototype.getPosition=function(){var e=this._position;return!0===this._isPlaying&&(e+=this._getCurrentTime()-this._startTime),e},e.prototype._getCurrentTime=function(){return Date.now||(Date.now=function(){return(new Date).getTime()}),Date.now()},e}.call(t,n,t,e))||(e.exports=i)},8341:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(6697),i=n(1835),r=n(6189),o=n(6419),a=n(9109),s=n(7342),u="invalid-data",c=n(6326),l=n(138),d="scorecardresearch.com",p=[s.ApplicationType.WEB,s.ApplicationType.MOBILE_WEB,s.ApplicationType.RESPONSIVE];function h(){return-1}function _(e,t,n){return e===d?(i=t)+"//"+("https:"===i?"s":"")+"b."+d+"/p?":function(e,t){return e+"//sa.bbc.co.uk/bbc/"+t+"/s"}(t,n);var i}function f(e,n,a,h){var E,g,m,v,T,I,C=a[i.COMSCORE_SITE];this._deviceId=null,this._broker=null,this.media=null,this._clips=[],this._isEnabled=!0,this._hasStartedAppTag=!1,this._hasCreatedAsset=!1,this._storedAssetLabels={},T=a[i.COMSCORE_HOST],C=a[i.COMSCORE_SITE],!0===a[i.USE_SSC]&&c.warn("Setting USE_SSC is now deprecated and will have no effect"),this._deviceId=a[i.ECHO_DEVICE_ID]||void 0,o.containsValue(s.ApplicationType,n)||(n=u),E=_(T,h.getProtocol(),C),!0===a[i.TEST_SERVICE_ENABLED]&&(m=E,E=a[i.TEST_SERVICE_URL]+"/comscore",this._isUsingComscoreOTTLibrary&&(g=a[i.TEST_SERVICE_URL]+"/offline")),this._isApp=!o.containsValue(p,n),I=h.getHttpGet(),v=T===d,this._isUsingComscoreOTTLibrary=!(!f.AppTag||!f.AppTag.ns_),this._isUsingComscoreOTTLibrary?(this.appTag=f.AppTag.ns_.comScore,this.appTag.setPlatformAPI(f.AppTag.ns_.PlatformAPIs.html5),I&&(this.appTag.getPlatformAPI().httpGet=I),this.appTag.setPublisherSecret(a[i.COMSCORE_PUBLISHER_SECRET]),this.appTag.setAppContext()):this.appTag=new f.AppTag(I||r._defaultHttpGet,this._isApp,v),v&&(this.appTag.setCustomerC2(a[i.COMSCORE_CUSTOMER_ID]),this.addLabel(t.COMSCORE_C1,"2"),this.addLabel(t.COMSCORE_SITE,C)),this.appTag.setPixelURL(E),this._deviceId?this.addLabel(t.DEVICE_ID,this._deviceId):"sa.bbc.co.uk"===T&&(this._deviceId=l.getCookieValueByName("s1")),!0===a[i.TEST_SERVICE_ENABLED]&&(this.addLabel(t.COMSCORE_ENDPOINT,m),this._isUsingComscoreOTTLibrary&&this.appTag.setOfflineURL(g)),this.addLabel(t.BBC_APPLICATION_NAME,e),this.addLabel(t.BBC_APPLICATION_TYPE,n),this.setCacheMode(a[i.ECHO_CACHE_MODE]),this.addLabel(t.BBC_MEASUREMENT_LIB_NAME,a[i.ECHO_NAME]),this.addLabel(t.BBC_MEASUREMENT_LIB_VERSION,a[i.ECHO_VERSION]),this._isApp?(this._isUsingComscoreOTTLibrary?this.appTag.setAppName(e):this.addLabel(t.APP_NAME,e),this.addLabel(t.APP_PLATFORM_NAME,h.getPlatformName()),this.addLabel(t.APP_PLATFORM_RUNTIME,h.getPlatformRuntimeEnvironment()),this.addLabel(t.APP_OS_VERSION,h.getPlatformOSVersion()),this.addLabel(t.APP_DEVICE_NAME,h.getDeviceName()),this.addLabel(t.APP_SCREEN_RESOLUTION,h.getScreenResolution()),this.addLabel(t.APP_LANGUAGE,h.getLanguage())):this.addLabel(t.WEB_SCREEN_RES,h.getScreenResolution()),this.addLabel(t.ENV_CHAR_SET,h.getCharSet()),this.addLabel(t.ENV_TITLE,h.getTitle()),this.addLabel(t.ENV_REFERRER,h.getReferrer()),-1===h.getURL().indexOf("file:",0)&&this.addLabel(t.ENV_URL,h.getURL()),a[i.ECHO_TRACE]&&this.setTraceId(a[i.ECHO_TRACE]),this.addLabel(s.ManagedLabels.BBC_SITE,u),this._mediaIsLive=null,a&&!1===a[i.COMSCORE_ENABLED]?this._isEnabled=!1:this._isEnabled=!0}return f.prototype.start=function(){this._isEnabled&&!this._hasStartedAppTag&&(this.appTag.start(),this._hasStartedAppTag=!0)},f.prototype.enable=function(){this._isEnabled||(this._isEnabled=!0)},f.prototype.disable=function(){this._isEnabled&&(this.clearMedia(),this._isEnabled=!1)},f.prototype.getDeviceId=function(){return this._deviceId},f.prototype._buildStreamSenseClip=function(e){},f.prototype.setTraceId=function(e){this.addLabel(i.ECHO_TRACE,e)},f.AppTag=n(2476),f.prototype.addLabels=function(e){this.addProperties(e)},f.prototype.addProperties=function(e){if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&this.addProperty(t,e[t])},f.prototype.addCampaignProperties=h,f.prototype.addLabel=function(e,t){this.addProperty(e,t)},f.prototype.addProperty=function(e,t){this.appTag.setLabel(e,t)},f.prototype.addManagedLabel=function(e,t){var n=a.isValidManagedLabel(e,t)?t:u;for(var i in s.ManagedLabels)s.ManagedLabels[i]===e&&this.addLabel(e,n)},f.prototype.removeLabels=function(e){this.removeProperties(e)},f.prototype.removeProperties=function(e){for(var t=0,n=e.length;t<n;t++)this.removeProperty(e[t])},f.prototype.removeLabel=function(e){this.removeProperty(e)},f.prototype.removeProperty=function(e){this.appTag.setLabel(e,null)},f.prototype.setLoggedInToBBCId=function(e){this.addLabel(t.BBC_ID_LOGGED_IN,"1"),e&&e.length>0?this.addManagedLabel(s.ManagedLabels.BBC_HASHED_ID,e):this.removeLabel(s.ManagedLabels.BBC_HASHED_ID)},f.prototype.setLoggedOutOfBBCId=function(){this.removeLabels([t.BBC_ID_LOGGED_IN,s.ManagedLabels.BBC_HASHED_ID])},f.prototype.setAppVersion=function(e){"function"==typeof this.appTag.setAppVersion?this.appTag.setAppVersion(e):e&&this._isApp?this.addLabel(t.APP_VERSION,e.toString()):e&&this.addLabel(t.BBC_APPLICATION_VERSION,e.toString())},f.prototype.setCounterName=function(e){this._isEnabled&&this.addLabel(t.BBC_COUNTER_NAME,e)},f.prototype.setDestination=function(e){this.addLabel(t.DESTINATION,e)},f.prototype.setProducer=function(e){this.addLabel(t.PRODUCER,e)},f.prototype.setContentLanguage=function(e){this.addLabel(t.BBC_LANGUAGE,e)},f.prototype.setCacheMode=function(e){if(this._isUsingComscoreOTTLibrary&&e!==this._cacheMode){switch(e){case s.EchoCacheMode.ALL:this.appTag.allowLiveTransmission(this.appTag.TransmissionMode.NEVER),this.appTag.allowOfflineTransmission(this.appTag.TransmissionMode.NEVER);break;case s.EchoCacheMode.OFFLINE:this.appTag.allowLiveTransmission(this.appTag.TransmissionMode.DEFAULT),this.appTag.allowOfflineTransmission(this.appTag.TransmissionMode.DEFAULT)}this._cacheMode=e}},f.prototype.flushCache=function(){this._isUsingComscoreOTTLibrary&&this.appTag.flushCache()},f.prototype.clearCache=h,f.prototype.viewEvent=function(e,n){if(this._eventsEnabled()){this.addLabel(t.BBC_COUNTER_NAME,e);var i=o.extend(n,!0,t.ECHO_EVENT_NAME,"view");i.name=e,this.appTag.view(i)}},f.prototype.errorEvent=h,f.prototype.userActionEvent=function(e,n,i){if(this._eventsEnabled()){var r=o.extend(i,!0,t.USER_ACTION_TYPE,e,t.USER_ACTION_NAME,n,t.ECHO_EVENT_NAME,"userAct");this.appTag.hidden(r)}},f.prototype.setPlayerName=function(e){},f.prototype.setPlayerVersion=function(e){},f.prototype.setPlayerIsPopped=function(e){},f.prototype.setPlayerWindowState=function(e){},f.prototype.setPlayerVolume=function(e){},f.prototype.setPlayerIsSubtitled=function(e){},f.prototype.setBroker=function(e){return this._broker=e,this},f.prototype.setMedia=function(e){},f.prototype.liveMediaUpdate=function(e,t,n){},f.prototype.liveEnrichmentFailed=h,f.prototype.setMediaLength=function(e){},f.prototype.avPlayEvent=function(e,t){},f.prototype.avPauseEvent=function(e,t){},f.prototype.avBufferEvent=function(e,t){},f.prototype.avEndEvent=function(e,t){},f.prototype.avRewindEvent=function(e,t,n){},f.prototype.avFastForwardEvent=function(e,t,n){},f.prototype.avSeekEvent=function(e,t){},f.prototype.avUserActionEvent=function(e,t,n,i){},f.prototype.clearMedia=function(){},f.prototype.setDeviceId=h,f.prototype.requiresLabelCleansing=function(){return!0},f.prototype._eventsEnabled=function(){return this._isEnabled&&this._hasStartedAppTag},f}.call(t,n,t,e))||(e.exports=i)},8382:function(e,t,n){var i;void 0===(i=function(){"use strict";var e=n(6326),t=n(1835),i="",r="",o={},a={};function s(e,n){this._config=e,this._env=n;var o=e[t.REMOTE_CONFIG_URL];o||(o="https://mybbc-analytics.files.bbci.co.uk/analytics-remote-config/");var a=e[t.PRODUCER_CONFIG_FILENAME];a||(a="producers.json");var s=e[t.MASTERBRAND_CONFIG_FILENAME];s||(s="masterbrands.json"),i=o+a,r=o+s,this.fetchRemoteData(i,r)}return s.prototype.getData=function(t,n){this._env.getExecuteCrossDomainGet()(t,{onSuccess:function(e){n(e)},onError:function(t,i){var r="error";"json"===t?r="json":"object"==typeof t&&"timeout"===t.type&&(r="timeout"),e.error("There was a problem requesting the remote config data",r,i),n()}})},s.prototype.fetchRemoteData=function(t,n){t||e.error("There was no Producer URL found"),this.getData(t,function(e){o=e}),n||e.error("There was no Masterbrand URL found"),this.getData(n,function(e){a=e})},s.prototype.getProducers=function(){return o},s.prototype.getMasterbrands=function(){return a},s}.call(t,n,t,e))||(e.exports=i)},8482:function(e,t,n){var i;void 0===(i=function(){"use strict";var e=n(2688);return{DEFAULT:{id:"596068",defaultProducer:e.BBC,isTest:!0},ACCOUNT:{id:"598250",defaultProducer:e.ACCOUNT,isTest:!1},ACCOUNT_TEST:{id:"598252",defaultProducer:e.ACCOUNT,isTest:!0},AUDIENCE_PORTAL:{id:"602136",defaultProducer:e.AUDIENCE_SERVICES,isTest:!1},AUDIENCE_PORTAL_TEST:{id:"602137",defaultProducer:e.AUDIENCE_SERVICES,isTest:!0},AUDIENCE_SERVICES_PS:{id:"602167",defaultProducer:e.AUDIENCE_SERVICES,isTest:!1},AUDIENCE_SERVICES_PS_TEST:{id:"602168",defaultProducer:e.AUDIENCE_SERVICES,isTest:!0},BBC_ARCHIVE_PS:{id:"605565",defaultProducer:e.BBC_ARCHIVE,isTest:!1},BBC_ARCHIVE_PS_TEST:{id:"605566",defaultProducer:e.BBC_ARCHIVE,isTest:!0},BBC_CORPORATE_PS:{id:"603550",defaultProducer:e.BBC,isTest:!1},BBC_CORPORATE_PS_TEST:{id:"603551",defaultProducer:e.BBC,isTest:!0},BBC_SYNDICATION:{id:"601718",defaultProducer:e.BBC,isTest:!1},BBC_SYNDICATION_TEST:{id:"601719",defaultProducer:e.BBC,isTest:!0},BBC_STUDIOS_PLAYER:{id:"606296",defaultProducer:e.BBC_STUDIOS,isTest:!1},BBC_STUDIOS_PLAYER_TEST:{id:"606293",defaultProducer:e.BBC_STUDIOS,isTest:!0},BBC_THREE:{id:"598255",defaultProducer:e.BBC_THREE,isTest:!1},BBC_THREE_TEST:{id:"598256",defaultProducer:e.BBC_THREE,isTest:!0},BITESIZE:{id:"598257",defaultProducer:e.BITESIZE,isTest:!1},BITESIZE_TEST:{id:"598258",defaultProducer:e.BITESIZE,isTest:!0},BLOGS_PS:{id:"603546",defaultProducer:e.BBC,isTest:!1},BLOGS_PS_TEST:{id:"603547",defaultProducer:e.BBC,isTest:!0},BRITBOX:{id:"598259",defaultProducer:e.BRITBOX,isTest:!1},BRITBOX_TEST:{id:"598260",defaultProducer:e.BRITBOX,isTest:!0},CBBC:{id:"598261",defaultProducer:e.CBBC,isTest:!1},CBBC_TEST:{id:"598262",defaultProducer:e.CBBC,isTest:!0},CBEEBIES:{id:"598263",defaultProducer:e.CBEEBIES,isTest:!1},CBEEBIES_TEST:{id:"598264",defaultProducer:e.CBEEBIES,isTest:!0},FEATURE_SITES_GNL:{id:"598265",defaultProducer:e.GNL_HOMEPAGE,isTest:!1},FEATURE_SITES_GNL_TEST:{id:"598266",defaultProducer:e.GNL_HOMEPAGE,isTest:!0},FOOD:{id:"598267",defaultProducer:e.BBC_FOOD,isTest:!1},FOOD_TEST:{id:"598268",defaultProducer:e.BBC_FOOD,isTest:!0},GAMES_PS:{id:"599452",defaultProducer:e.BBC,isTest:!1},GAMES_PS_TEST:{id:"599454",defaultProducer:e.BBC,isTest:!0},GATEWAY:{id:"598269",defaultProducer:e.GATEWAY,isTest:!1},GATEWAY_TEST:{id:"598270",defaultProducer:e.GATEWAY,isTest:!0},HOMEPAGE_GNL:{id:"598271",defaultProducer:e.GNL_HOMEPAGE,isTest:!1},HOMEPAGE_GNL_TEST:{id:"598272",defaultProducer:e.GNL_HOMEPAGE,isTest:!0},HOMEPAGE_PS:{id:"598273",defaultProducer:e.PS_HOMEPAGE,isTest:!1},HOMEPAGE_PS_TEST:{id:"598274",defaultProducer:e.PS_HOMEPAGE,isTest:!0},IDEAS:{id:"598275",defaultProducer:e.BBC,isTest:!1},IDEAS_TEST:{id:"598276",defaultProducer:e.BBC,isTest:!0},INTERNAL_TOOLS:{id:"646322",defaultProducer:e.BBC,isTest:!1},INTERNAL_TOOLS_TEST:{id:"646323",defaultProducer:e.BBC,isTest:!0},IPLAYER:{id:"598277",defaultProducer:e.IPLAYER,isTest:!1},IPLAYER_TEST:{id:"598278",defaultProducer:e.IPLAYER,isTest:!0},MEDIA_ACTION:{id:"598279",defaultProducer:e.MEDIA_ACTION,isTest:!1},MEDIA_ACTION_TEST:{id:"598280",defaultProducer:e.MEDIA_ACTION,isTest:!0},MONITORING:{id:"598281",defaultProducer:e.MONITORING,isTest:!1},MONITORING_TEST:{id:"598282",defaultProducer:e.MONITORING,isTest:!0},MUSIC:{id:"598283",defaultProducer:e.BBC_MUSIC,isTest:!1},MUSIC_TEST:{id:"598284",defaultProducer:e.BBC_MUSIC,isTest:!0},NATIONAL_MOMENTS_PS:{id:"605567",defaultProducer:e.BBC,isTest:!1},NATIONAL_MOMENTS_PS_TEST:{id:"605568",defaultProducer:e.BBC,isTest:!0},NEWS_PS:{id:"598285",defaultProducer:e.NEWS,isTest:!1},NEWS_PS_TEST:{id:"598286",defaultProducer:e.NEWS,isTest:!0},NEWS_GNL:{id:"598287",defaultProducer:e.NEWS,isTest:!1},NEWS_GNL_TEST:{id:"598288",defaultProducer:e.NEWS,isTest:!0},NEWS_LANGUAGES_GNL:{id:"598289",defaultProducer:e.NEWS,isTest:!1},NEWS_LANGUAGES_GNL_TEST:{id:"598290",defaultProducer:e.NEWS,isTest:!0},NEWS_LANGUAGES_PS:{id:"598291",defaultProducer:e.NEWS,isTest:!1},NEWS_LANGUAGES_PS_TEST:{id:"598292",defaultProducer:e.NEWS,isTest:!0},NEWSROUND:{id:"598293",defaultProducer:e.NEWSROUND,isTest:!1},NEWSROUND_TEST:{id:"598294",defaultProducer:e.NEWSROUND,isTest:!0},OTHER:{id:"598295",defaultProducer:e.OTHER,isTest:!1},OTHER_TEST:{id:"598297",defaultProducer:e.OTHER,isTest:!0},OTHER_EVENT_CATALOGUE:{id:"643514",defaultProducer:e.BBC,isTest:!1},OTHER_EVENT_CATALOGUE_TEST:{id:"643515",defaultProducer:e.BBC,isTest:!0},OTHER_EXPERIMENTATION:{id:"643363",defaultProducer:e.BBC,isTest:!1},OTHER_EXPERIMENTATION_TEST:{id:"643364",defaultProducer:e.BBC,isTest:!0},OTHER_TELESCOPE:{id:"643361",defaultProducer:e.BBC,isTest:!1},OTHER_TELESCOPE_TEST:{id:"643362",defaultProducer:e.BBC,isTest:!0},OTHER_VIVO:{id:"643365",defaultProducer:e.BBC,isTest:!1},OTHER_VIVO_TEST:{id:"643366",defaultProducer:e.BBC,isTest:!0},OTHER_TIPO:{id:"643367",defaultProducer:e.BBC,isTest:!1},OTHER_TIPO_TEST:{id:"643368",defaultProducer:e.BBC,isTest:!0},OWN_IT:{id:"598298",defaultProducer:e.CBBC,isTest:!1},OWN_IT_TEST:{id:"598299",defaultProducer:e.CBBC,isTest:!0},PROGRAMMES_PS:{id:"598300",defaultProducer:e.PROGRAMMES,isTest:!1},PROGRAMMES_PS_TEST:{id:"598301",defaultProducer:e.PROGRAMMES,isTest:!0},PS_ARCHIVE_SEARCH:{id:"632030",defaultProducer:e.BBC,isTest:!1},PS_AUDIENCE_ENGAGEMENT:{id:"609581",defaultProducer:e.PARTICIPATION,isTest:!1},PS_AUDIENCE_ENGAGEMENT_TEST:{id:"609582",defaultProducer:e.PARTICIPATION,isTest:!0},PS_PAN_BBC:{id:"641476",defaultProducer:e.BBC,isTest:!1},PS_PAN_BBC_TEST:{id:"641477",defaultProducer:e.BBC,isTest:!0},RED_BUTTON_PS:{id:"601192",defaultProducer:e.BBC,isTest:!1},RED_BUTTON_PS_TEST:{id:"601193",defaultProducer:e.BBC,isTest:!0},REWIND_PS:{id:"603552",defaultProducer:e.BBC,isTest:!1},REWIND_PS_TEST:{id:"603553",defaultProducer:e.BBC,isTest:!0},R_AND_D_PS:{id:"607103",defaultProducer:e.RD,isTest:!1},R_AND_D_PS_TEST:{id:"607104",defaultProducer:e.RD,isTest:!0},SEARCH_GNL:{id:"598302",defaultProducer:e.SEARCH,isTest:!1},SEARCH_GNL_TEST:{id:"598303",defaultProducer:e.SEARCH,isTest:!0},SEARCH_PS:{id:"598304",defaultProducer:e.SEARCH,isTest:!1},SEARCH_PS_TEST:{id:"598305",defaultProducer:e.SEARCH,isTest:!0},SILVER_PS:{id:"607105",defaultProducer:e.BBC,isTest:!1},SILVER_PS_TEST:{id:"607106",defaultProducer:e.BBC,isTest:!0},SOUNDS:{id:"598306",defaultProducer:e.SOUNDS,isTest:!1},SOUNDS_TEST:{id:"598307",defaultProducer:e.SOUNDS,isTest:!0},SPORT_GNL:{id:"598308",defaultProducer:e.SPORT,isTest:!1},SPORT_GNL_TEST:{id:"598309",defaultProducer:e.SPORT,isTest:!0},SPORT_PS:{id:"598310",defaultProducer:e.SPORT,isTest:!1},SPORT_PS_TEST:{id:"598311",defaultProducer:e.SPORT,isTest:!0},STORYWORKS_GNL:{id:"598312",defaultProducer:e.GNL_STORYWORKS,isTest:!1},STORYWORKS_GNL_TEST:{id:"598313",defaultProducer:e.GNL_STORYWORKS,isTest:!0},SUBTITLES_PS:{id:"603548",defaultProducer:e.PROGRAMMES,isTest:!1},SUBTITLES_PS_TEST:{id:"603549",defaultProducer:e.PROGRAMMES,isTest:!0},SYNDICATION_PARTNERS_GNL:{id:"598314",defaultProducer:e.WS_PARTNERS_B2B,isTest:!1},SYNDICATION_PARTNERS_GNL_TEST:{id:"598315",defaultProducer:e.WS_PARTNERS_B2B,isTest:!0},TASTER:{id:"598316",defaultProducer:e.TASTER,isTest:!1},TASTER_TEST:{id:"598317",defaultProducer:e.TASTER,isTest:!0},TEACH:{id:"598318",defaultProducer:e.BBC,isTest:!1},TEACH_TEST:{id:"598320",defaultProducer:e.BBC,isTest:!0},TOPICS_GNL:{id:"612991",defaultProducer:e.BBC,isTest:!1},TOPICS_GNL_TEST:{id:"614559",defaultProducer:e.BBC,isTest:!0},TOPICS_PS:{id:"612261",defaultProducer:e.BBC,isTest:!1},TOPICS_PS_TEST:{id:"612262",defaultProducer:e.BBC,isTest:!0},VOICE:{id:"598326",defaultProducer:e.VOICE,isTest:!1},VOICE_TEST:{id:"598328",defaultProducer:e.VOICE,isTest:!0},WEATHER_GNL:{id:"598330",defaultProducer:e.WEATHER,isTest:!1},WEATHER_GNL_TEST:{id:"598332",defaultProducer:e.WEATHER,isTest:!0},WEATHER_PS:{id:"598338",defaultProducer:e.WEATHER,isTest:!1},WEATHER_PS_TEST:{id:"598339",defaultProducer:e.WEATHER,isTest:!0},WS_LEARNING_ENGLISH:{id:"598340",defaultProducer:e.WS_LEARNING_ENGLISH,isTest:!1},WS_LEARNING_ENGLISH_TEST:{id:"598341",defaultProducer:e.WS_LEARNING_ENGLISH,isTest:!0},WS_NEWS_LANGUAGES:{id:"598342",defaultProducer:e.BBC_WORLD_NEWS,isTest:!1},WS_NEWS_LANGUAGES_TEST:{id:"598343",defaultProducer:e.BBC_WORLD_NEWS,isTest:!0},WS_PARTNERS_B2B:{id:"598820",defaultProducer:e.WS_PARTNERS_B2B,isTest:!1},WS_PARTNERS_B2B_TEST:{id:"598823",defaultProducer:e.WS_PARTNERS_B2B,isTest:!0},WS_PROGRAMMES:{id:"598344",defaultProducer:e.PROGRAMMES,isTest:!1},WS_PROGRAMMES_TEST:{id:"598345",defaultProducer:e.PROGRAMMES,isTest:!0},WS_SYNDICATION_PARTNERS:{id:"598346",defaultProducer:e.WS_PARTNERS_B2B,isTest:!1},WS_SYNDICATION_PARTNERS_TEST:{id:"598347",defaultProducer:e.WS_PARTNERS_B2B,isTest:!0},get:function(e){var t;return e&&(t=this[e.toUpperCase()]),t}}}.call(t,n,t,e))||(e.exports=i)},9025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function i(e,i,a,s){var u;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof i&&(i=(0,o.default)(i)),16!==(null===(u=i)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(i),c.set(e,i.length),c=n(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,a){s=s||0;for(let e=0;e<16;++e)a[s+e]=c[e];return a}return(0,r.unsafeStringify)(c)}try{i.name=e}catch(e){}return i.DNS=a,i.URL=s,i};var i,r=n(9910),o=(i=n(6792))&&i.__esModule?i:{default:i};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},9042:function(e,t){"use strict";function n(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:case 3:return t^n^i;case 2:return t&n^t&i^n&i}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a);for(let t=0;t<a;++t){const n=new Uint32Array(16);for(let i=0;i<16;++i)n[i]=e[64*t+4*i]<<24|e[64*t+4*i+1]<<16|e[64*t+4*i+2]<<8|e[64*t+4*i+3];s[t]=n}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const o=new Uint32Array(80);for(let t=0;t<16;++t)o[t]=s[e][t];for(let e=16;e<80;++e)o[e]=i(o[e-3]^o[e-8]^o[e-14]^o[e-16],1);let a=r[0],u=r[1],c=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),s=i(a,5)+n(r,u,c,l)+d+t[r]+o[e]>>>0;d=l,l=c,c=i(u,30)>>>0,u=a,a=s}r[0]=r[0]+a>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};t.default=r},9109:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(7342),i=n(6419);return{isValidManagedLabel:function(e,n){switch(e){case t.ManagedLabels.IPLAYER_STATE:if("purchased"!==n&&"free"!==n)return!1;break;case t.ManagedLabels.STORE_ED_TYPE:if("archive"!==n&&"standard"!==n)return!1;break;case t.ManagedLabels.IPLAYER_AVAIL:if("avail"!==n&&"unavail"!==n&&"soon"!==n)return!1;break;case t.ManagedLabels.STORE_REFERRAL:if("iplayer"!==n&&"store"!==n)return!1;break;case t.ManagedLabels.BBC_HASHED_ID:if("string"!=typeof n||0===i.trim(n).length)return!1}return!0}}}.call(t,n,t,e))||(e.exports=i)},9229:function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(9722),i=n(2831),r=n(3916),o=n(1835),a=n(2691),s=n(1294),u=n(4712),c=n(5164),l=n(9876),d=n(8482),p=n(2688),h=n(8382),_=n(6419),f=n(5419),E=n(6326),g=n(7950),m=n(7342),v=n(6189),T=n(138),I="info",C="move",S="pause",A="play",y="stop",O="clip",P="live",b="ati-host.net",R="logw363.ati-host.net",N="logws1363.ati-host.net",L="api.bbc.co.uk",B="a1.api.bbc.co.uk",D="a1.api.bbc.co.uk",M="content_type",w="user_id";function U(){return-1}function V(e,t,n,r){this._tag=null,this._broker=null,this._media=null,this._mediaLength=null,this._commonMediaParams=null,this._env=r,this._pageValues={},this._customParams={},this._appName=e,this._appType=t,this._config=n,this._bbc_hid=null,this._lastHitUrl=null,this._lastPlayHitUrl=null,this._lastPage=null,this._counterName=null,this._orbitVars=null,this._trace=null;var a=this;if(setInterval(function(){a._remoteConfigManager=new h(n,a._env)},36e5),this._remoteConfigManager=this._config[o.REMOTE_CONFIG_MANAGER]||new h(n,this._env),this._deviceId=n[o.ECHO_DEVICE_ID]||void 0,!0!==n[o.ATI_DISABLE_COOKIE]||this._deviceId||(this._deviceId=i.v4()),this._deviceId||(this._deviceId=T.getCookieValueByName("idrxvr")),!this._deviceId){var s=T.getCookieValueByName("atuserid");s&&(this._deviceId=JSON.parse(decodeURIComponent(s)).val)}n[o.ECHO_TRACE]&&(this._trace=n[o.ECHO_TRACE]),n&&!1===n[o.ATI_ENABLED]?this._isEnabled=!1:this._isEnabled=!0}return V.SmartTag=t,V.prototype._getHttpGetMethod=function(){return this._env.getHttpGet()||v._defaultHttpGet},V.prototype._setHTTPGetMethod=function(e){var t=this._getHttpGetMethod(),n=this,i=function(i,r){var o=function(t,i,o){return function(a){n._tag.emit(t,{lvl:o,details:{hit:i,event:a}}),r&&"function"==typeof r&&r(),e&&"function"==typeof e&&e()}},a=o("Tracker:Hit:Sent:Ok",i=n._addLengthToMediaHit(i),"INFO"),s=o("Tracker:Hit:Sent:Error",i,"ERROR");t(i,a,s)};"never"===this._tag.getConfig("Offline").storageMode?this._tag.builder.sendUrl=i:this._tag.sendUrl=i},V.prototype._getDestination=function(e,t){var n;return e&&(n=d.get(e[o.DESTINATION])),!n&&t&&(n=d.get(t.destination)),n||(E.warn("Destination not found, using default site"),n=d.DEFAULT),n},V.prototype._getProducer=function(e,t,n){var i,a;(a=this._remoteConfigManager.getProducers(),this._pageValues[r.LEVEL_2_SITE]&&(i=this._pageValues[r.LEVEL_2_SITE]),!i&&e)&&(i=!(!a||!a[e[o.PRODUCER]])?a[e[o.PRODUCER]]:p.getId(e[o.PRODUCER]));return!i&&t&&(i=a&&a[t.producer]?a[t.producer]:p.getId(t.producer)),!i&&n&&(E.warn("Producer not found, using default producer"),i=n.defaultProducer),i},V.prototype.setDestination=function(e){e||(e=d.DEFAULT,E.warn("Destination not found, using default site instead")),e&&(this.setProducer(e.defaultProducer),this._setDomain(e.isTest),this._tag.setConfig(r.LEVEL_1_SITE,e.id))},V.prototype.setProducer=function(e){this.addLabel(r.LEVEL_2_SITE,e)},V.prototype._getCookieDomain=function(e){var t;return e&&e.location&&e.location.hostname&&e.location.hostname.match(/\.bbc\.com$/)?t="bbc.com":e&&e.location&&e.location.hostname.match(/\.britbox\.com$/)?t="britbox.com":(e&&e.location&&!e.location.hostname.match(/\.bbc\.co\.uk$/)&&E.info("Cookie hostname is: "+e.location.hostname+" failing back to bbc.co.uk"),t="bbc.co.uk"),!0===this._config[o.TEST_SERVICE_ENABLED]&&this.addProperty(r.TEST_COOKIE_DOMAIN,t),t},V.prototype._setDomain=function(e){e?(this._tag.setConfig("domain",b),this._tag.setConfig("collectDomain",R),this._tag.setConfig("collectDomainSSL",N)):(this._tag.setConfig("domain",L),this._tag.setConfig("collectDomain",B),this._tag.setConfig("collectDomainSSL",D)),this._config&&(this._config[o.ATI_COLLECT_DOMAIN]&&this._tag.setConfig("collectDomain",this._config[o.ATI_COLLECT_DOMAIN]),this._config[o.ATI_COLLECT_DOMAIN_SSL]&&this._tag.setConfig("collectDomainSSL",this._config[o.ATI_COLLECT_DOMAIN_SSL]))},V.prototype._setSection=function(e,t,n){if(t){if(e&&e[r.SECTION]){var i=g.cleanCustomVariable(e[r.SECTION]).split("::",3);t[r.CHAPTER_1]=i[0],t[r.CHAPTER_2]=i[1],t[r.CHAPTER_3]=i[2],t&&delete t[r.SECTION]}else if(n&&n.section){var o=g.cleanCustomVariable(n.section).split("::",3);t[r.CHAPTER_1]=o[0],t[r.CHAPTER_2]=o[1],t[r.CHAPTER_3]=o[2]}E.info("Setting page view chapter 1: "+t[r.CHAPTER_1]),E.info("Setting page view chapter 2: "+t[r.CHAPTER_2]),E.info("Setting page view chapter 3: "+t[r.CHAPTER_3])}},V.prototype._createAtiOptions=function(e,t){var n;if(e)switch(n={collectDomain:t.isTest?R:B,collectDomainSSL:t.isTest?N:D,disableCookie:!0===e[o.ATI_DISABLE_COOKIE],cookieDomain:!0===e[o.ATI_USE_DEFAULT_COOKIE_DOMAIN]?null:this._getCookieDomain(window),domain:t.isTest?b:L,pixelPath:e[o.ATI_PIXEL_PATH]||"/hit.xiti",secure:!1!==e[o.ATI_FORCE_HTTPS],sameSite:"none",cookieSecure:!0,sameSiteStrict:!0,forceHttp:!0===e[o.ATI_FORCE_HTTP],site:t.id},!0===e[o.ATI_FORCE_HTTPS]&&E.warn("Forcing https for ATI is now deprecated and has no effect, https is the default protocol now"),e[o.ATI_LOG]&&(E.warn("Setting ATI_LOG for ATI is now deprecated, please use ATI_COLLECT_DOMAIN"),n.collectDomain=e[o.ATI_LOG]+"."+n.collectDomain),e[o.ATI_SSL_LOG]&&(E.info("Setting ATI_SSL_LOG for ATI is now deprecated, please use ATI_COLLECT_DOMAIN_SSL"),n.collectDomainSSL=e[o.ATI_SSL_LOG]+"."+n.collectDomainSSL),e[o.ATI_COLLECT_DOMAIN]&&(n.collectDomain=e[o.ATI_COLLECT_DOMAIN]),!0===e[o.ATI_FORCE_HTTP]?n.collectDomainSSL=n.collectDomain:e[o.ATI_COLLECT_DOMAIN_SSL]&&(n.collectDomainSSL=e[o.ATI_COLLECT_DOMAIN_SSL]),e[o.ECHO_DEVICE_ID]&&(n.ClientSideUserId={clientSideMode:"required",userIdCookieDuration:397,userIdExpirationMode:"fixed"}),e[o.ECHO_CACHE_MODE]){case m.EchoCacheMode.ALL:n.Offline={storageMode:o.ATI_CACHE_MODE_ALWAYS};break;case m.EchoCacheMode.OFFLINE:n.Offline={storageMode:o.ATI_CACHE_MODE_REQUIRED};break;default:n.Offline={storageMode:o.ATI_CACHE_MODE_NEVER}}return n},V.prototype._createTag=function(e){return new V.SmartTag.Tracker.Tag(e)},V.prototype._initTag=function(e){if(!this._tag){var t=this._config,n=this._getDestination(t,e),i=this._createAtiOptions(t,n);for(var a in this._tag=this._createTag(i),this._tag.onTrigger("Tracker:Hit:Sent:Ok",this._onHitSent.bind(this)),this._debug&&(this._tag.debug=function(e){E.info("ATI DEBUG: "+e)}),this._deviceId&&this._setSmartTagDeviceId(this._tag,this._deviceId),this._bbc_hid&&(this._tag.setParam(r.HASHED_ID,this._bbc_hid,{hitType:["all"],permanent:!0}),this._tag.setProp(w,this._bbc_hid,!0)),t&&t[o.APP_CATEGORY]&&this.addLabel(r.APP_CATEGORY,t[o.APP_CATEGORY]),this._setHTTPGetMethod(),this._counterName&&this.setCounterName(this._counterName),this._trace&&this.setTraceId(this._trace),this._customParams)this._tag.setParam(a,g.cleanCustomVariable(this._customParams[a]),{hitType:["all"],permanent:!0});var s={};s[r.APP_NAME]=this._appName,s[r.APP_TYPE]=this._appType,s[r.LIBRARY_VERSION]=f.getLibraryName()+"-"+f.getLibraryVersion(),s=_.combineObjects(s,this._customParams,!1),s=_.combineObjects(s,e,!1),this.setGlobalProps(s),E.info("Initialised ATI SmartTag with options:"+JSON.stringify(i))}},V.prototype._setSmartTagDeviceId=function(e,t){e.clientSideUserId.set(t)},V.prototype.start=function(e){this._orbitVars=e,this._isEnabled&&!this._hasStarted&&(this._hasStarted=!0,this._initTag(e))},V.prototype.enable=function(){this._isEnabled||(this._isEnabled=!0)},V.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1,this.clearMedia())},V.prototype._onHitSent=function(e,t){t&&t.details&&t.details.hit&&(E.info("Did send hit: ",t.details.hit),this._setLastHitUrl(t.details.hit))},V.prototype._addLengthToMediaHit=function(e){if(e&&"string"==typeof e&&e.match(/a\=(play|pause|stop|info|refresh|move)/)&&this._mediaLength){var t="m1="+Math.ceil(this._mediaLength/1e3);e=e.replace(/m1\=\d+/g,t)}return e},V.prototype._setLastHitUrl=function(e){e&&"string"==typeof e&&e.match(/a\=play/)?this._lastPlayHitUrl=e:this._lastHitUrl=e},V.prototype.setTraceId=function(e){e&&this._tag&&this._tag.setParam(o.ECHO_TRACE,e,{hitType:["all"],permanent:!0})},V.prototype.addLabels=function(e){this.addProperties(e)},V.prototype.addLabel=function(e,t){this.addProperty(e,t)},V.prototype.addProperties=function(e){if("object"==typeof e)for(var t in e.bbc_identity&&(this.setBBCUser({bbc_hid:e.bbc_hid,signed_in:"1"===e.bbc_identity}),delete e.bbc_hid,delete e.bbc_identity),e)e.hasOwnProperty(t)&&this.addProperty(t,e[t])},V.prototype.addProperty=function(e,t){if(e===r.BBC_COUNTER_NAME||e===r.LEVEL_2_SITE?this._pageValues[e]=t:this._customParams[e]=t,this._tag){var n={};n[e]=t,this.setGlobalProps(n)}},V.prototype.addCampaignProperties=function(e){this._tag?e&&"object"==typeof e&&this._tag.setProps(e,!0):E.error("Cannot set campaign properties: please enable ATI and start Echo before setting campaign properties.")},V.prototype.setLoggedInToBBCId=function(e){this.setBBCUser({bbc_hid:e,signed_in:!0}),E.info("Setting BBC user with hashed ID: "+e)},V.prototype.setLoggedOutOfBBCId=function(){this._tag&&(this._tag.delParam(r.HASHED_ID),this._tag.delProp(w)),this._bbc_hid=null,E.info("Removing User ID")},V.prototype.setAppVersion=function(e){e&&this._tag&&this._tag.setParam(r.APP_VERSION,"["+e+"]",{hitType:["all"],permanent:!0})},V.prototype.setBBCUser=function(e){e.bbc_hid?this._bbc_hid=e.bbc_hid:e.signed_in&&(this._bbc_hid="unidentified-user"),this._tag&&!this._customParams.bbc_id_wait&&(this._tag.setParam(r.HASHED_ID,this._bbc_hid,{hitType:["all"],permanent:!0}),this._tag.setProp(w,this._bbc_hid,!0)),E.info("Setting BBC user with hashed ID: "+this._bbc_hid)},V.prototype.addManagedLabel=U,V.prototype.removeLabels=function(e){this.removeProperties(e)},V.prototype.removeLabel=function(e){this.removeProperty(e)},V.prototype.removeProperties=function(e){for(var t=0,n=e.length;t<n;t++)this.removeProperty(e[t])},V.prototype.removeProperty=function(e){e===r.BBC_COUNTER_NAME||e===r.LEVEL_2_SITE?delete this._pageValues[e]:(this._tag&&this._tag.delParam(e),delete this._customParams[e])},V.prototype.setCounterName=function(e){var t=this._getDestination(this._config,this._orbitVars),n=this._getProducer(this._config,this._orbitVars,t);this.setProducer(n),this._counterName=e;var i={name:e,level2:this._pageValues[r.LEVEL_2_SITE]};this._tag&&(this._tag.page.set(i),this._lastPage=i)},V.prototype.setContentLanguage=U,V.prototype.setCacheMode=U,V.prototype.clearCache=function(){this._tag.offline.remove(),E.info("Clearing cache: this will not send cached events")},V.prototype.flushCache=function(){this._tag.offline.send(),E.info("Flushing cache: this will send cached events")},V.prototype.setESSEnabled=U,V.prototype.viewEvent=function(e,t){if(this._eventsEnabled()){this._tag.page.reset(),this._setCounterName(e),this._setProducerValues(this._getDestination(this._config,this._orbitVars));var n=_.extend(t,!0,r.ECHO_EVENT_NAME,"view"),i=_.combineObjects(this._customParams,n,!1);this._setTagCustomVars(s.create(this._appName,this._appType,i,t,this._orbitVars,document));var o=this._setParamInTagAndReturnCleanCustomVariables(i);return this._setSectionValues(n,this._setEventValues(o)),E.info("Sending page view event with countername: "+e),this}},V.prototype._setCounterName=function(e){this.addLabel(r.BBC_COUNTER_NAME,e),this._counterName=e},V.prototype._setParamInTagAndReturnCleanCustomVariables=function(e){var t={};for(var n in e)"trace"!==n?_.startsWith(n,"ess_")?t[n]=e[n]:this._tag&&this._tag.setParam(n,g.cleanCustomVariable(e[n]),{hitType:["all"],permanent:!1}):this.setTraceId(e[n]);return t},V.prototype._setSectionValues=function(e,t){this._setSection(e,t,this._orbitVars),this._tag.page.set(t),this._tag.dispatch(),this._lastPage=t},V.prototype._setProducerValues=function(e){var t=this._getProducer(this._config,this._orbitVars,e);this.setProducer(t)},V.prototype._setEventValues=function(e){var t=_.combineObjects(this._pageValues,e,!1);return t.echo_event="view",t},V.prototype._setTagCustomVars=function(e){e&&this._tag.customVars.set(e)},V.prototype.errorEvent=U,V.prototype.setGlobalProps=function(e){var t={};for(var n in t[r.APP_NAME]="app_name",t[r.APP_TYPE]="app_type",t[r.CONTENT_TYPE]=M,t.contentType=M,t[r.LIBRARY_VERSION]="library_version",e){var i=t[n];i&&this._tag.setProp(i,e[n],!0)}},V.prototype.userActionEvent=function(e,t,n){if(this._eventsEnabled()){var i=_.extend(n,!0,r.ECHO_EVENT_NAME,"userAct"),o=_.combineObjects(this._customParams,i,!1),a=_.clone(this._pageValues),s=_.combineObjects(a,o);if(s){s[r.EVENT_ACTION]=t,s[r.EVENT_CATEGORY]=e,s.user=this._bbc_hid,s[r.BBC_COUNTER_NAME]=this._counterName;var u,c=s[r.IS_BACKGROUND];for(var d in!1===c||"false"===c?u=!1:Boolean(s[r.IS_BACKGROUND])?u=!0:E.info("Unknown value for is_background: "+s[r.IS_BACKGROUND]),s)this._tag&&this._tag.setParam(d,g.cleanCustomVariable(s[d]),{hitType:["all"],permanent:!0});u?(l.sendImpressionEvent(this._tag,s),E.info("Sent Background action event: "+t)):(l.sendClickEvent(this._tag,s),E.info("Sent user action event: "+t))}}},V.prototype.setPlayerName=function(e){this._mediaPlayerName=e},V.prototype.setPlayerVersion=function(e){this._mediaPlayerVersion=e},V.prototype.setPlayerIsPopped=U,V.prototype.setPlayerWindowState=U,V.prototype.setPlayerVolume=U,V.prototype.setPlayerIsSubtitled=U,V.prototype.setBroker=function(e){return this._broker=e,this},V.prototype.setMedia=function(e){this._eventsEnabled()&&(this._mediaPlayerName&&!e.getMediaPlayerName()&&e.setMediaPlayerName(this._mediaPlayerName),this._mediaPlayerVersion&&!e.getMediaPlayerVersion()&&e.setMediaPlayerVersion(this._mediaPlayerVersion),this._appName?e.appName=this._appName:e.appName="",this._appType?e.appType=this._appType:e.appType="",this.clearMedia(),this._media=e,this.addMedia(this._media))},V.prototype.setMediaLength=function(e){this._mediaLength=e,this._media.setLength(e)},V.prototype.setMediaBitrate=U,V.prototype.setMediaCodec=U,V.prototype.setMediaCDN=U,V.prototype.liveMediaUpdate=function(e,t,n){_.assert("number"==typeof t,"newPosition must be a number"),_.assert("number"==typeof n,"oldPosition must be a number"),e.setProducerById(this._media.getProducer()),this._sendMediaEvent(y),this._media=e,this.addMedia(this._media),this._sendMediaEvent(A)},V.prototype.liveEnrichmentFailed=U,V.prototype._getIdObjectValue=function(e){return null!==e&&e.isValueValid()?e.getValue():""},V.prototype._getMostPrecedentIdObject=function(){var e=this._media.getVersionIdObject(),t=this._media.getEpisodeIdObject(),n=this._media.getClipIdObject(),i=this._media.getVpIdObject(),r=this._media.getServiceIdObject();return e.isValueValid()?e:t.isValueValid()?t:n.isValueValid()?n:i.isValueValid()?i:r.isValueValid()?r:null},V.prototype._eventsEnabled=function(){return this._isEnabled&&this._hasStarted},V.prototype.addMedia=function(e){if(this._tag&&this._tag.richMedia){this._commonMediaParams={playerId:e.getPlayerId(),mediaLabel:this._getIdObjectValue(this._getMostPrecedentIdObject()),mediaTheme1:u.constructThemeOne(e,this._config[o.USE_ESS]),mediaTheme2:u.constructThemeTwo(e),mediaTheme3:u.constructThemeThree(e)};var t={mediaType:e.getAvType(),playerId:this._commonMediaParams.playerId,duration:e&&e.getLength()?Math.ceil(e.getLength()/1e3):0,mediaLabel:this._commonMediaParams.mediaLabel,mediaTheme1:this._commonMediaParams.mediaTheme1,mediaTheme2:this._commonMediaParams.mediaTheme2,mediaTheme3:this._commonMediaParams.mediaTheme3,isEmbedded:e.isEmbedded(),broadcastMode:e.getMediaConsumptionMode()===P?P:O,refreshDuration:{0:10,1:60}};for(var n in e.getProducerId()?t.mediaLevel2=e.getProducerId():t.mediaLevel2=0,this._customParams)this._tag&&this._tag.setParam(n,g.cleanCustomVariable(this._customParams[n]),{hitType:["all"],permanent:!0});this._tag.richMedia.add(t)}},V.prototype._sendMediaEvent=function(e,t){this._commonMediaParams&&c.sendEvent(this._tag,this._commonMediaParams,e,t)},V.prototype.avPlayEvent=function(e,t){this._eventsEnabled()&&!this._media.getPlaying()&&(this._media.getBuffering()?this._sendMediaEvent(I,{isBuffering:!1}):this._sendMediaEvent(A))},V.prototype.avPauseEvent=function(){if(this._eventsEnabled()){for(var e in this._customParams)this._tag&&this._tag.setParam(e,g.cleanCustomVariable(this._customParams[e]),{hitType:["all"],permanent:!0});this._sendMediaEvent(S)}},V.prototype.avBufferEvent=function(){this._eventsEnabled()&&this._sendMediaEvent(I,{isBuffering:!0})},V.prototype.avEndEvent=function(){this._eventsEnabled()&&(this._isMediaLoaded=!1,this._sendMediaEvent(y),this.isValidMedia()&&this.clearMedia())},V.prototype.avRewindEvent=function(){this._eventsEnabled()&&this._sendMediaEvent(C)},V.prototype.avFastForwardEvent=function(){this._eventsEnabled()&&this._sendMediaEvent(C)},V.prototype.avSeekEvent=function(){this._eventsEnabled()&&this._sendMediaEvent(C)},V.prototype.avUserActionEvent=function(e,t,n,i){if(this._eventsEnabled()&&"echo_hb"===e&&"echo_hb_5"===t){var r=this._addLengthToMediaHit(this._lastPlayHitUrl);a.sendRefreshEvent(this._tag,this._getHttpGetMethod(),r),E.info("Performed 5 second heartbeat")}},V.prototype.clearMedia=function(){this.isValidMedia()&&(this._isMediaLoaded&&this.avEndEvent(),this._stream=null,this._media=null,this._commonMediaParams=null,this._tag.richMedia.removeAll())},V.prototype.isValidMedia=function(){return null!==this._media&&this._media.avType===m.AvType.VIDEO},V.prototype.isValidLiveMedia=function(){return this.isValidMedia()&&this._media.isLive()},V.prototype.getDeviceId=function(){return this._deviceId},V.prototype.setDeviceId=function(e){this._deviceId=e,this._tag&&(E.info("Updating ATI SmartTag device id:"+e),this._setSmartTagDeviceId(this._tag,e))},V.prototype.requiresLabelCleansing=function(){return!0},V}.call(t,n,t,e))||(e.exports=i)},9722:function(e,t,n){var i;i=function(){return function(){var e,t={site:596068,log:"",logSSL:"",domain:"ati-host.net",collectDomain:"logw363.ati-host.net",collectDomainSSL:"logws1363.ati-host.net",userIdOrigin:"server",pixelPath:"/hit.xiti",disableCookie:!1,disableStorage:!1,cookieSecure:!1,cookieDomain:"",preview:!1,plgs:["Campaigns","Clicks","ClientSideUserId","ContextVariables","Offline","Page","RichMedia","Events"],lazyLoadingPath:"",documentLevel:"document",redirect:!1,activateCallbacks:!0,medium:"",ignoreEmptyChapterValue:!0,base64Storage:!1,sendHitWhenOptOut:!0,forceHttp:!1,requestMethod:"GET",maxHitSize:2e3,urlPropertyAuto:!1,urlPropertyQueryString:!1,sameSiteStrict:!1};(e=window).Echo1217ATInternet=e.Echo1217ATInternet||{},e.Echo1217ATInternet.Tracker=e.Echo1217ATInternet.Tracker||{},e.Echo1217ATInternet.Tracker.Plugins=e.Echo1217ATInternet.Tracker.Plugins||{};Echo1217ATInternet.Utils=new function(){function e(t){var n=typeof t;if("object"!==n||null===t)return"string"===n&&(t='"'+t+'"'),String(t);var i,r,o=[],a=t.constructor===Array;for(i in t)t.hasOwnProperty(i)&&("function"!==(n=typeof(r=t[i]))&&"undefined"!==n&&("string"===n?r='"'+r.replace(/[^\\]"/g,'\\"')+'"':"object"===n&&null!==r&&(r=e(r)),o.push((a?"":'"'+i+'":')+String(r))));return(a?"[":"{")+String(o)+(a?"]":"}")}function t(e){return null===e?"":(e+"").replace(r,"")}var n=this,i=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,r=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");n.isLocalStorageAvailable=function(){try{var e=localStorage;return e.setItem("__storage_test__","__storage_test__"),e.removeItem("__storage_test__"),!0}catch(e){return!1}},n.isBeaconMethodAvailable=function(){return window.navigator&&"function"==typeof window.navigator.sendBeacon},n.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,r,o,a,s,u="",c=0;for(e=n.Base64._utf8_encode(e);c<e.length;)o=(t=e.charCodeAt(c++))>>2,t=(3&t)<<4|(i=e.charCodeAt(c++))>>4,a=(15&i)<<2|(r=e.charCodeAt(c++))>>6,s=63&r,isNaN(i)?a=s=64:isNaN(r)&&(s=64),u=u+this._keyStr.charAt(o)+this._keyStr.charAt(t)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return u},decode:function(e){var t,i,r,o,a,s="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=(t=this._keyStr.indexOf(e.charAt(u++)))<<2|(i=this._keyStr.indexOf(e.charAt(u++)))>>4,i=(15&i)<<4|(o=this._keyStr.indexOf(e.charAt(u++)))>>2,r=(3&o)<<6|(a=this._keyStr.indexOf(e.charAt(u++))),s+=String.fromCharCode(t),64!=o&&(s+=String.fromCharCode(i)),64!=a&&(s+=String.fromCharCode(r));return n.Base64._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):(127<i&&2048>i?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t,n,i,r="",o=0;o<e.length;)128>(t=e.charCodeAt(o))?(r+=String.fromCharCode(t),o++):191<t&&224>t?(n=e.charCodeAt(o+1),r+=String.fromCharCode((31&t)<<6|63&n),o+=2):(n=e.charCodeAt(o+1),i=e.charCodeAt(o+2),r+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&i),o+=3);return r}},n.loadScript=function(e,t){var n;t=t||function(){},(n=document.createElement("script")).type="text/javascript",n.src=e.url,n.async=!1,n.defer=!1,n.onload=n.onreadystatechange=function(e){("load"===(e=e||window.event).type||/loaded|complete/.test(n.readyState)&&(!document.documentMode||9>document.documentMode))&&(n.onload=n.onreadystatechange=n.onerror=null,t(null,e))},n.onerror=function(e){n.onload=n.onreadystatechange=n.onerror=null,t({msg:"script not loaded",event:e})};var i=document.head||document.getElementsByTagName("head")[0];i.insertBefore(n,i.lastChild)},n.cloneSimpleObject=function(e,t){if("object"!=typeof e||null===e||e instanceof Date)return e;var i,r=new e.constructor;for(i in e)e.hasOwnProperty(i)&&(void 0===i||t&&void 0===e[i]||(r[i]=n.cloneSimpleObject(e[i])));return r},n.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},n.isObject=function(e){return null!==e&&"object"==typeof e&&!(e instanceof Array)},n.ATVALUE="_ATVALUE",n.ATPREFIX="_ATPREFIX",n.object2Flatten=function(e,t,i,r,o){var a,s={},u="",c="",l=[],d="",p=0;for(a in e)if(e.hasOwnProperty(a))if(u=(s=n.splitProtocolAndKey(a,o)).prefix||r||"",c=(t?t+"_":"")+s.key,n.isObject(e[a]))n.object2Flatten(e[a],c,i,u,o);else{for(l=c.split("_"),d="",p=0;p<l.length;p++)u=(s=n.splitProtocolAndKey(l[p],o)).prefix||u,d+=s.key+(p<l.length-1?"_":"");i[c=d||c]=i[c]||{},i[c][n.ATVALUE]=e[a],i[c][n.ATPREFIX]=u}},n.flatten2Object=function(e,t,i){var r,o;for(t=t.split("_"),o=0;o<t.length-1;o++)e[r=t[o]]||(e[r]={}),e=e[r];if(e.hasOwnProperty(n.ATVALUE)){r=e[n.ATVALUE];var a=e[n.ATPREFIX];delete e[n.ATVALUE],delete e[n.ATPREFIX],e.$={},e.$[n.ATVALUE]=r,e.$[n.ATPREFIX]=a}i=n.cloneSimpleObject(i),e[t[o]]?e[t[o]].$=i:e[t[o]]=i},n.getFormattedObject=function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(e[t].hasOwnProperty(n.ATVALUE)?i[e[t][n.ATPREFIX]?e[t][n.ATPREFIX]+":"+t:t]=e[t][n.ATVALUE]:i[t]=n.getFormattedObject(e[t]));return i},n.completeFstLevelObj=function(e,t,n){if(e){if(t)for(var i in t)!t.hasOwnProperty(i)||e[i]&&!n||(e[i]=t[i])}else e=t;return e},n.getObjectKeys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},n.objectToLowercase=function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(n.isObject(e[t])?i[t.toLowerCase()]=n.objectToLowercase(e[t]):i[t.toLowerCase()]=e[t]);return i},n.splitProtocolAndKey=function(e,t){var n,i;return 2>e.length||":"!==e[1]?(n="",i=e):4>e.length||":"!==e[3]?(n=e.substring(0,1),i=e.substring(2,e.length)):(n=e.substring(0,3),i=e.substring(4,e.length)),t&&(n=n.toLowerCase(),i=i.toLowerCase()),{prefix:n,key:i}},n.jsonSerialize=function(t){try{return"undefined"!=typeof JSON&&JSON.stringify?JSON.stringify(t):e(t)}catch(e){return null}},n.jsonParse=function(e){try{return"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e+""):function(e){var n,r=null;return(e=t(e+""))&&!t(e.replace(i,function(e,t,i,o){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!o-!i,"")}))?Function("return "+e)():null}(e)}catch(e){return null}},n.trim=function(e){try{return String.prototype.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}catch(t){return e}},n.arrayIndexOf=function(e,t){if(Array.prototype.indexOf){var n=-1;return void 0!==e.indexOf(t)&&(n=e.indexOf(t)),n}return function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(1<arguments.length&&((i=Number(arguments[1]))!=i?i=0:0!=i&&1/0!=i&&-1/0!=i&&(i=(0<i||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(i=0<=i?i:Math.max(n-Math.abs(i),0);i<n;i++)if(i in t&&t[i]===e)return i;return-1}.apply(e,[t])},n.uuid=function(){function e(e){var i=Math.random();try{n&&(i=t.getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32))}catch(e){}return Math.floor((9*i+1)*Math.pow(10,e-1))}var t=window.crypto||window.msCrypto,n=null!==t&&"object"==typeof t;return{v4:function(){try{if(n)return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^t.getRandomValues(new Uint32Array(1))[0]&15>>e/4).toString(16)})}catch(e){}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},num:function(t){var n=new Date,i=function(e){return 10>(e-=100*Math.floor(e/100))?"0"+e:String(e)};return i(n.getHours())+""+i(n.getMinutes())+i(n.getSeconds())+e(t-6)}}},n.isPreview=function(){return window.navigator&&"preview"===window.navigator.loadPurpose},n.isPrerender=function(e){var t,i=!1,r=["webkit","ms"];if("prerender"===document.visibilityState)t="visibilitychange";else for(var o=0;o<r.length;o++)"prerender"===document[r[o]+"VisibilityState"]&&(t=r[o]+"visibilitychange");if(void 0!==t){var a=function(i){e(i),n.removeEvtListener(document,t,a)};n.addEvtListener(document,t,a),i=!0}return i},n.addEvtListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},n.removeEvtListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},n.hashcode=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=0|(t=(t<<5)-t+e.charCodeAt(n));return t},n.setLocation=function(e){var t=e.location;e=window[e.target]||window,t&&(e.location.href=t)},n.dispatchCallbackEvent=function(e){var t;if("function"==typeof window.Event)t=new Event("ATCallbackEvent");else try{(t=document.createEvent("Event")).initEvent&&t.initEvent("ATCallbackEvent",!0,!0)}catch(e){}t&&"function"==typeof document.dispatchEvent&&(t.name=e,document.dispatchEvent(t))},n.addCallbackEvent=function(e){n.addEvtListener(document,"ATCallbackEvent",e)},n.removeCallbackEvent=function(e){n.removeEvent("ATCallbackEvent",e)},function(){function e(e,t){var n;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(e){}return n}"function"==typeof window.CustomEvent?window.ATCustomEvent=window.CustomEvent:("function"==typeof window.Event&&(e.prototype=window.Event.prototype),window.ATCustomEvent=e)}(),n.addEvent=function(e,t,i,r){n[e]=new ATCustomEvent(e,{detail:{name:t,id:i}}),n.addEvtListener(document,e,r)},n.removeEvent=function(e,t){n.removeEvtListener(document,e,t)},n.dispatchEvent=function(e,t){n[e]=n[e]||new ATCustomEvent(e,{detail:{name:t,id:-1}});try{document.dispatchEvent(n[e])}catch(e){}},n.privacy=new function(){function e(e,t){var i,r,o=[];i={};for(var a=0;a<e.length;a++){for(var s in i={},n.object2Flatten(e[a],null,i,null,!0),i)i.hasOwnProperty(s)&&-1===n.arrayIndexOf(t,s)&&delete i[s];if(!n.isEmptyObject(i)){for(var u in r={},i)i.hasOwnProperty(u)&&n.flatten2Object(r,u,i[u]);i=n.getFormattedObject(r),o.push(i)}}return o}function t(e,n,i){1<e.length?(void 0===n[e[0]]&&(n[e[0]]={}),t(e.slice(1,e.length),n[e[0]],i)):n[e[0]]=i}function i(e,t,n,r,o){var a=r||{};if(!e||"object"!=typeof e||e instanceof Array){if(void 0!==e&&0<=n.indexOf(o)||void 0===n)a[o]=e;else for(t=0;t<n.length;t++)if(o&&0===o.indexOf(n[t])){a[o]=e;break}}else for(var s in e)e.hasOwnProperty(s)&&i(e[s],t,n,a,(o?o+t:"")+s);if(void 0===r)return a}function r(e,r,o){for(var a=[],s=0;s<e.length;s++){var u;u=i(e[s],o,r);var c=o,l={},d=void 0;for(d in u)if(u.hasOwnProperty(d)){t(d.split(c),l,u[d])}u=l,n.isEmptyObject(u)||a.push(u)}return a}function o(e,t){var n="",i={key:"",flattenedProperty:""};switch(!0){case 0===e.indexOf("stc_"):n="stc_";break;case 0===e.indexOf("stc/"):n="stc/";break;case 0===e.indexOf("events_"):n="events_";break;case 0===e.indexOf("context_"):n="context_";break;default:i.key=e}if(n){var r=n.substring(0,n.length-1);i.key=r,0>t.indexOf(r)&&(i.flattenedProperty=e.substring(n.length))}return i}function a(e){for(var t=[],n={},i=0;i<e.length;i++)if("string"==typeof e[i]){var r={};if(-1<e[i].indexOf("#")){var a=e[i].split("#");a[0]===c&&(r=o(a[1],e))}else r=o(e[i],e);r.key&&0>t.indexOf(r.key)&&t.push(r.key),r.flattenedProperty&&(n[r.key]=(n[r.key]||[]).concat(r.flattenedProperty))}else for(var s in e[i])e[i].hasOwnProperty(s)&&(0>t.indexOf(s)&&t.push(s),0>e.indexOf(s)&&(n[s]=(n[s]||[]).concat(e[i][s])));return{keys:t,values:n}}var s=this,u={storageParams:null,bufferParams:null},c="";s.CONSENTNO="Consent-NO",s.ALL="*",s.testStorageParam=function(e,t){var n;if(u.storageParams instanceof Array){for(var i,r=u.storageParams.length-1;0<=r;r--)if("string"==typeof(i=u.storageParams[r])){if(i===e||i===s.ALL)return{toSetInStorage:!0}}else{e:{n=e;var o=t,a=void 0,c=void 0;for(c in i)if(i.hasOwnProperty(c)&&n===c){if(!o){n=!0;break e}a=[],i[c]instanceof Array?a=i[c]:a.push(i[c]);for(var l=0;l<a.length;l++)if(a[l]===o){n=!0;break e}}n=!1}if(n)return{toSetInStorage:!0}}return{toSetInStorage:!1}}return{toSetInStorage:!0}},s.processStorageParams=function(e,t,i){if(i){i=i();var r=a(u.storageParams);if(r.keys[0]!==s.ALL)for(var o in i)if(i.hasOwnProperty(o)&&void 0!==i[o])if(-1===n.arrayIndexOf(r.keys,o))e&&e(o);else if(n.isObject(i[o])){var c=o,l=i[o].val,d=r.values[o],p=e,h=t;if(void 0!==d){var _=[];for(d in d instanceof Array?_=d:_.push(d),d=void 0,l)l.hasOwnProperty(d)&&-1===n.arrayIndexOf(_,d)&&p&&p([c,d]);p&&h&&n.isEmptyObject(h(c))&&p(c)}}}},s.testBufferParam=function(t,i){var o,c;if(u.bufferParams instanceof Array){for(o=a(u.bufferParams),c=0;c<o.keys.length;c++)if(o.keys[c]===t||o.keys[c]===s.ALL){if(o.values.hasOwnProperty(o.keys[c])){var l={};l[o.keys[c]]=o.values[o.keys[c]];e:{if(o=t,c=i,n.isObject(l)){var d=void 0,p=[],h=!1,_=d=d=void 0;for(_ in l)if(l.hasOwnProperty(_)&&o===_&&("string"==typeof(d=c)&&(d=n.jsonParse(d)||d),"object"==typeof d)){d instanceof Array?(p=d,h=!0):p.push(d),0===(d="stc"===o?r(p,l[_],"/"):"events"===o||"context"===o?r(p,l[_],"_"):e(p,l[_])).length?(o=!1,c=void 0):(d=h?d:d[0],o=!0,c=n.jsonSerialize(d));break e}}o=!1,c=void 0}if(o)return{toSetInBuffer:!0,value:c};break}return{toSetInBuffer:!0,value:i}}return{toSetInBuffer:!1}}return{toSetInBuffer:!0,value:i}},s.processBufferParams=function(t,i,o){if(i){i=i();var c=a(u.bufferParams);if(c.keys[0]!==s.ALL)for(var l in i)if(i.hasOwnProperty(l))if(-1===n.arrayIndexOf(c.keys,l))t&&t(l);else{var d=l,p=i[l],h=c.values[l],_=t,f=o;if(void 0!==h&&void 0!==p){var E=[],g=p._value,m=[],v=!1,T=void 0;T=void 0;h instanceof Array?E=h:E.push(h),"string"==typeof g&&(g=n.jsonParse(g)||g),"object"==typeof g&&(g instanceof Array?(m=g,v=!0):m.push(g),0===(T="stc"===d?r(m,E,"/"):"events"===d||"context"===d?r(m,E,"_"):e(m,E)).length?_&&_(d):(T=v?T:T[0],f&&f(d,n.jsonSerialize(T),p._options)))}}}},s.setMode=function(e){c=e},s.setParameters=function(e){u=e},s.getParameters=function(){return u},s.resetParameters=function(){u={storageParams:null,bufferParams:null}}},n.optedOut=null,n.addOptOutEvent=function(e,t){n.addEvent("ATOptOutEvent","clientsideuserid",e,t)},n.removeOptOutEvent=function(e){n.removeEvent("ATOptOutEvent",e)},n.dispatchOptOutEvent=function(e){n.optedOut=e,n.dispatchEvent("ATOptOutEvent","clientsideuserid")},n.userOptedOut=function(){n.dispatchOptOutEvent(!0)},n.userOptedIn=function(){n.dispatchOptOutEvent(!1)},n.isOptedOut=function(){if(null===n.optedOut){var e;if(e=null,n.isLocalStorageAvailable()&&(e=localStorage.getItem("atuserid")),null===e){var t=/(?:^| )atuserid=([^;]+)/.exec(document.cookie);null!==t&&(e=t[1])}if(null!==e)try{e=decodeURIComponent(e)}catch(e){}e&&null!==(e=n.jsonParse(e)||n.jsonParse(n.Base64.decode(e)))?e="OPT-OUT"===e.val:e=!1,n.optedOut=e}return!!n.optedOut},n.consentReceived=function(e){n.consent=!!e},n.consent=!0,n.isTabOpeningAction=function(e){var t=!1;return e||(e=window.event),e&&(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1===e.button)&&(t=!0),t},n.CLICKS_REDIRECTION="redirection",n.CLICKS_FORM="form",n.CLICKS_MAILTO="mailto"};var n=function(e){var t,n=this,i=0,r=0,o=["dz"],a=function(e,t,n,i,r,o,a){return{param:e="&"+e+"=",paramSize:e.length,str:t,strSize:t.length,truncate:n,multihit:i,separator:r||"",encode:o,last:a}},s=function(e,t){var n,i="",r=0,o=0,a=0,s=(r=-1,null),u=null;for(n in e)e.hasOwnProperty(n)&&(s=e[n])&&(r=t-o,s.last&&null!==u?u[n]=s:s.strSize+s.paramSize<=r?(i+=s.param+s.str,o+=s.paramSize+s.strSize):((u=u||{})[n]=s,s.truncate&&(a=r-s.paramSize,s.separator&&(r=s.str.substring(0,r),0<(r=s.encode?r.lastIndexOf(encodeURIComponent(s.separator)):r.lastIndexOf(s.separator))&&(a=r)),i+=s.param+s.str.substring(0,a),o+=s.paramSize+s.str.substring(0,a).length,u[n].str=s.str.substring(a,s.strSize),u[n].strSize=u[n].str.length)));return[i,u]},u=function(t,n,i){var u,c,l="",d=function(t){if(t==={})return[];var n,i=[];n={};var u,c,d,p,h,_,f,E,g,m=!1,v=void 0,T="";for(g in t)if(t.hasOwnProperty(g))if(_=h=p=d=!1,u=t[g]._value,"boolean"==typeof(c=t[g]._options||{}).encode&&(d=c.encode),"function"==typeof u&&(u=u()),u=u instanceof Array?u.join(c.separator||","):"object"==typeof u?Echo1217ATInternet.Utils.jsonSerialize(u):void 0===u?"undefined":u.toString(),d&&(u=encodeURIComponent(u)),-1<Echo1217ATInternet.Utils.arrayIndexOf(o,g)?p=!0:"boolean"==typeof c.truncate&&(p=c.truncate),"boolean"==typeof c.multihit&&(h=c.multihit),"boolean"==typeof c.last&&(_=c.last),u=a(g,u,p,h,c.separator,d,_),h)r-=u.paramSize+u.strSize,T+=u.param+u.str;else if(_)u.paramSize+u.strSize>r&&(u.str=u.str.substring(0,r-u.paramSize),u.strSize=u.str.length),f=g,E=u;else if(n[g]=u,n[g].paramSize+n[g].strSize>r&&!n[g].truncate){e.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:'Too long parameter: "'+n[g].param+'"',details:{value:n[g].str}}),m=!0,v=g;break}if(f&&(n[f]=E),t=(n=[n,m,v,T])[0],m=n[1],l=n[3],m&&((t=t[n=n[2]]).str=t.str.substring(0,r-t.paramSize),t.strSize=t.str.length,(m={}).mherr=a("mherr","1",!1,!1,"",!1,!1),m[n]=t,t=m),null===(t=s(t,r))[1])i=t[0];else for(i.push(t[0]);null!==t[1];)t=s(t[1],r),i.push(t[0]);return i},p="";if(e.buffer.presentInFilters(n,"hitType")||(n=e.buffer.addInFilters(n,"hitType",["page"])),n=e.buffer.addInFilters(n,"hitType",["all"]),Echo1217ATInternet.Utils.isObject(t)){for(u in n=e.buffer.addInFilters(n,"permanent",!0),n=e.buffer.get(n,!0),t)t.hasOwnProperty(u)&&(p={},t[u]&&"object"==typeof t[u]&&t[u].hasOwnProperty("_value")?(c=t[u]._value,t[u].hasOwnProperty("_options")&&(p=t[u]._options)):c=t[u],(c=Echo1217ATInternet.Utils.privacy.testBufferParam(u,c)).toSetInBuffer&&(n[u]={_value:c.value,_options:p}));p=d(n)}else for(u in p=d(n=e.buffer.get(n,!0)),n)n.hasOwnProperty(u)&&(n[u]._options&&n[u]._options.permanent||e.buffer.del(u));i&&i(p,l)};n.getCollectDomain=function(){var t="",n=(t=e.getConfig("logSSL")||e.getConfig("log"),e.getConfig("domain"));return t&&n?t+"."+n:e.getConfig("collectDomainSSL")||e.getConfig("collectDomain")};var c=function(t){var i="";if(o=e.getConfig("baseURL"))i=o;else{var r,o=n.getCollectDomain();"/"!==(r=(r=e.getConfig("pixelPath"))||"/").charAt(0)&&(r="/"+r),o&&(i=(e.getConfig("forceHttp")?"http://":"https://")+o+r)}o=e.getConfig("site"),i&&o?t&&t(null,i+"?s="+o):t&&t({message:"Config error"})},l=function(e,t,n){c(function(o,a){o?n&&n(o):(r=i-(a.length+27),u(e,t,function(e,t){var i=[],r=Echo1217ATInternet.Utils.uuid().num(13);if(e instanceof Array)for(var o=1;o<=e.length;o++)i.push(a+t+"&mh="+o+"-"+e.length+"-"+r+e[o-1]);else i.push(a+t+e);n&&n(null,i)}))})},d=function(t,n,i,r,o,a,s){return function(u){e.emit(t,{lvl:o,details:{hit:n,method:i,event:u,isMultiHit:a,elementType:s}}),r&&r()}};n.send=function(t,i,r,o,a){l(t,i,function(t,i){if(t)e.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:t.message,details:{}}),r&&r();else for(var s=0;s<i.length;s++)n.sendUrl(i[s],r,o,a)})},i=Math.max(e.getConfig("maxHitSize")||0,2e3),r=Math.max(e.getConfig("maxHitSize")||0,2e3),t=e.getConfig("requestMethod"),n.sendUrl=function(n,i,r,o){var a=-1<n.indexOf("&mh=");r=r||t,Echo1217ATInternet.Utils.isOptedOut()&&!e.getConfig("sendHitWhenOptOut")?d("Tracker:Hit:Sent:NoTrack",n,r,i,"INFO",a,o)():"POST"===r&&Echo1217ATInternet.Utils.isBeaconMethodAvailable()?(o="Tracker:Hit:Sent:Error",r="ERROR",window.navigator.sendBeacon(n,null)&&(o="Tracker:Hit:Sent:Ok",r="INFO"),d(o,n,"POST",i,r,a,"")()):((r=new Image).onload=d("Tracker:Hit:Sent:Ok",n,"GET",i,"INFO",a,o),r.onerror=d("Tracker:Hit:Sent:Error",n,"GET",i,"ERROR",a,o),r.src=n)}},i=function(){function e(e,t,n){for(var i=[],r=0;r<e.length;r++)e[r].callback(t,n),e[r].singleUse||i.push(e[r]);return i}function t(e,n,i,r){var o=e.shift();return"*"===o?(n["*"]=n["*"]||[],n["*"].push({callback:i,singleUse:r}),n["*"].length-1):0===e.length?t([o,"*"],n,i,r):(n["*"]=n["*"]||[],n[o]=n[o]||{},t(e,n[o],i,r))}function n(t,i,r,o){var a=i.shift();"*"!==a&&(0===i.length?n(t,[a,"*"],r,o):r[a]&&(r[a]["*"]=e(r[a]["*"],t,o),n(t,i,r[a],o)))}var i={};this.on=function(e,n,r){return r=r||!1,t(e.split(":"),i,n,r)},this.emit=function(t,r){i["*"]&&(i["*"]=e(i["*"],t,r)),n(t,t.split(":"),i,r)}},r=function(e){var t={},n={},i=0,r={},o=0,a=function(e){var n=!1;return t[e]&&(n=!0),n},s=this.unload=function(n){return a(n)?(t[n]=void 0,e.emit("Tracker:Plugin:Unload:"+n+":Ok",{lvl:"INFO"})):e.emit("Tracker:Plugin:Unload:"+n+":Error",{lvl:"ERROR",msg:"not a known plugin"}),e},u=this.load=function(r,o){return"function"==typeof o?void 0===e.getConfig.plgAllowed||0===e.getConfig.plgAllowed.length||-1<e.getConfig.plgAllowed.indexOf(r)?(t[r]=new o(e),n[r]&&a(r)&&(n[r]=!1,i--,a(r+"_ll")&&s(r+"_ll"),0===i&&e.emit("Tracker:Plugin:Lazyload:File:Complete",{lvl:"INFO",msg:"LazyLoading triggers are finished"})),e.emit("Tracker:Plugin:Load:"+r+":Ok",{lvl:"INFO"})):e.emit("Tracker:Plugin:Load:"+r+":Error",{lvl:"ERROR",msg:"Plugin not allowed",details:{}}):e.emit("Tracker:Plugin:Load:"+r+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:o}}),e},c=this.isLazyloading=function(e){return e?!0===n[e]:0!==i},l=function(e){return!a(e)&&!c(e)&&a(e+"_ll")},d=function(t){n[t]=!0,i++,Echo1217ATInternet.Utils.loadScript({url:e.getConfig("lazyLoadingPath")+t+".js"})},p=function(e){return!!l(e)&&(d(e),!0)},h=function(e,n,i,r){var o=null;n=n.split("."),a(e)&&t[e][n[0]]&&(o=1<n.length&&t[e][n[0]][n[1]]?t[e][n[0]][n[1]].apply(t[e],i):t[e][n[0]].apply(t[e],i)),r&&r(o)},_=function(t,n,i,a){!function(e){r[e]?r[e]++:r[e]=1,o++}(t),e.onTrigger("Tracker:Plugin:Load:"+t+":Ok",function(){h(t,n,i,function(n){r[t]--,0===--o&&e.emit("Tracker:Plugin:Lazyload:Exec:Complete",{lvl:"INFO",msg:"All exec waiting for lazyloading are done"}),a&&a(n)})},!0)};this.isExecWaitingLazyloading=function(){return 0!==o},e.exec=this.exec=function(e,t,n,i){l(e)?(_(e,t,n,i),d(e)):c(e)?_(e,t,n,i):h(e,t,n,i)},this.waitForDependencies=function(n,i){var r=function(e){for(var n={mcount:0,plugins:{}},i=0;i<e.length;i++)t.hasOwnProperty(e[i])||(n.mcount++,n.plugins[e[i]]=!0);return n}(n);if(0===r.mcount)e.emit("Tracker:Plugin:Dependencies:Loaded",{lvl:"INFO",details:{dependencies:n}}),i();else for(var o in r.plugins)r.plugins.hasOwnProperty(o)&&(e.emit("Tracker:Plugin:Dependencies:Error",{lvl:"WARNING",msg:"Missing plugin "+o}),e.onTrigger("Tracker:Plugin:Load:"+o,function(e,t){var n=e.split(":"),o=n[3];"Ok"===n[4]&&(r.plugins[o]=!1,r.mcount--,0===r.mcount&&i())},!0),p(o))},this.init=function(){for(var e in Echo1217ATInternet.Tracker.pluginProtos)Echo1217ATInternet.Tracker.pluginProtos.hasOwnProperty(e)&&u(e,Echo1217ATInternet.Tracker.pluginProtos[e])}},o=function(e){var t=this,n={},i=function(n){if(n.name){var i=!0,r=e.getConfig("callbacks");void 0!==r&&(r.include instanceof Array&&-1===Echo1217ATInternet.Utils.arrayIndexOf(r.include,n.name)&&(i=!1),r.exclude instanceof Array&&-1!==Echo1217ATInternet.Utils.arrayIndexOf(r.exclude,n.name)&&(i=!1)),Echo1217ATInternet.Callbacks&&Echo1217ATInternet.Callbacks.hasOwnProperty(n.name)&&((r={})[n.name]={function:Echo1217ATInternet.Callbacks[n.name]},i&&t.load(n.name,r[n.name].function),Echo1217ATInternet.Tracker.callbackProtos[n.name]||(Echo1217ATInternet.Tracker.callbackProtos[n.name]=r[n.name]))}};t.load=function(t,n){return"function"==typeof n?(new n(e),e.emit("Tracker:Callback:Load:"+t+":Ok",{lvl:"INFO",details:{obj:n}})):e.emit("Tracker:Callback:Load:"+t+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:n}}),e},t.init=function(){if(e.getConfig("activateCallbacks")){var r=e.getConfig("callbacks");if(void 0!==r&&r.include instanceof Array)for(var o=0;o<r.include.length;o++)Echo1217ATInternet.Callbacks&&Echo1217ATInternet.Callbacks.hasOwnProperty(r.include[o])&&(n[r.include[o]]={function:Echo1217ATInternet.Callbacks[r.include[o]]},Echo1217ATInternet.Tracker.callbackProtos[r.include[o]]||(Echo1217ATInternet.Tracker.callbackProtos[r.include[o]]=n[r.include[o]]));else for(o in Echo1217ATInternet.Callbacks)Echo1217ATInternet.Callbacks.hasOwnProperty(o)&&(n[o]={function:Echo1217ATInternet.Callbacks[o]},Echo1217ATInternet.Tracker.callbackProtos[o]||(Echo1217ATInternet.Tracker.callbackProtos[o]=n[o]));if(void 0!==r&&r.exclude instanceof Array)for(o=0;o<r.exclude.length;o++)delete n[r.exclude[o]];for(var a in n)n.hasOwnProperty(a)&&n[a]&&t.load(a,n[a].function);Echo1217ATInternet.Utils.addCallbackEvent(i)}},t.removeCallbackEvent=function(){Echo1217ATInternet.Utils.removeCallbackEvent(i)}},a=function(e){var t=this,n={};t.set=function(e,t,i){(t=Echo1217ATInternet.Utils.privacy.testBufferParam(e,t)).toSetInBuffer&&((i=i||{}).hitType=i.hitType||["page"],n[e]={_value:t.value,_options:i})};var i=function(e,t,n){return(e=Echo1217ATInternet.Utils.cloneSimpleObject(e[t]))&&!n?e._value:e},r=function e(t,i){if(!(t&&i instanceof Array&&t instanceof Array))return[];if(0===t.length)return i;var r,o=t[0],a=[],s=Echo1217ATInternet.Utils.cloneSimpleObject(t);s.shift();for(var u=0;u<i.length;u++)if("object"!=typeof o[1])n[i[u]]&&n[i[u]]._options[o[0]]===o[1]&&a.push(i[u]);else{r=o[1].length;for(var c=0;c<r;c++)if(n[i[u]]&&n[i[u]]._options[o[0]]instanceof Array&&0<=Echo1217ATInternet.Utils.arrayIndexOf(n[i[u]]._options[o[0]],o[1][c])){a.push(i[u]);break}}return e(s,a)};t.get=function(e,t){var o={};if("string"==typeof e)o=i(n,e,t);else for(var a=r(e,Echo1217ATInternet.Utils.getObjectKeys(n)),s=0;s<a.length;s++)o[a[s]]=i(n,a[s],t);return o},t.presentInFilters=function(e,n){return!(!e||0===e.length)&&(e[0][0]===n||t.presentInFilters(e.slice(1),n))},t.addInFilters=function(e,n,i,r){if(!e||0===e.length)return r?[]:[[n,i]];var o=e[0][0],a=e[0][1];return o===n&&(a instanceof Array&&-1===Echo1217ATInternet.Utils.arrayIndexOf(a,i[0])&&a.push(i[0]),r=!0),[[o,a]].concat(t.addInFilters(e.slice(1),n,i,r))},t.del=function(e){n[e]=void 0},t.clear=function(){n={}}},s=function(e){var t=this,n={};t.setProp=function(e,t,i){void 0!==e&&(n[e]={value:t,persistent:!!i})},t.setProps=function(e,n){if(Echo1217ATInternet.Utils.isObject(e))for(var i in e)e.hasOwnProperty(i)&&t.setProp(i,e[i],n)},t.delProp=function(t,i){void 0!==n[t]&&delete n[t],!i&&e.delParam(t.toLowerCase())},t.delProps=function(e){for(var i in n)n.hasOwnProperty(i)&&t.delProp(i,e)},t.getProp=function(e){return(n=n||{})[e]},t.getProps=function(){return n}};Echo1217ATInternet.Tracker.Tag=function(e,u,c){u=u||{};var l=this;l.version="5.29.4";var d=Echo1217ATInternet.Utils.cloneSimpleObject(u);l.triggers=new i(l),l.emit=l.triggers.emit,l.onTrigger=l.triggers.on;var p,h=Echo1217ATInternet.Utils.cloneSimpleObject(t)||{};for(p in e)e.hasOwnProperty(p)&&(h[p]=e[p]);if(l.getConfig=function(e){return h[e]},l.setConfig=function(e,t,n){void 0!==h[e]&&n||(l.emit("Tracker:Config:Set:"+e,{lvl:"INFO",details:{bef:h[e],aft:t}}),h[e]=t)},l.configPlugin=function(e,t,n){for(var i in h[e]=h[e]||{},t)t.hasOwnProperty(i)&&void 0===h[e][i]&&(h[e][i]=t[i]);return n&&(n(h[e]),l.onTrigger("Tracker:Config:Set:"+e,function(e,t){n(t.details.aft)})),h[e]},l.getAllContext=function(){return d},l.getContext=function(e){return d[e]},l.setContext=function(e,t){l.emit("Tracker:Context:Set:"+e,{lvl:"INFO",details:{bef:d[e],aft:t}}),d[e]=t},l.delContext=function(e,t){if(l.emit("Tracker:Context:Deleted:"+e+":"+t,{lvl:"INFO",details:{key1:e,key2:t}}),e)d.hasOwnProperty(e)&&(t?d[e]&&d[e].hasOwnProperty(t)&&(d[e][t]=void 0):d[e]=void 0);else if(t)for(var n in d)d.hasOwnProperty(n)&&d[n]&&d[n].hasOwnProperty(t)&&(d[n][t]=void 0)},l.plugins=new r(l),l.buffer=new a(l),l.setParam=l.buffer.set,l.getParams=function(e){return l.buffer.get(e,!1)},l.getParam=l.buffer.get,l.delParam=l.buffer.del,l.builder=new n(l),l.sendUrl=l.builder.sendUrl,l.callbacks=new o(l),l.properties=new s(l),l.setProp=l.properties.setProp,l.setProps=l.properties.setProps,l.delProp=l.properties.delProp,l.delProps=l.properties.delProps,l.getProp=l.properties.getProp,l.getProps=l.properties.getProps,l.sendHit=function(e,t,n,i,r){var o,a,s=l.getProps();for(a in s)s.hasOwnProperty(a)&&(o=s[a].value,s[a].persistent?l.setParam(a.toLowerCase(),o,{permanent:!0,hitType:["all"],encode:!0}):(Echo1217ATInternet.Utils.isObject(e)?e[a.toLowerCase()]={_value:o,_options:{hitType:["all"],encode:!0}}:l.setParam(a.toLowerCase(),o,{hitType:["all"],encode:!0}),l.delProp(a,!0)));l.builder.send(e,t,n,i,r)},Echo1217ATInternet.Utils.privacy.resetParameters(),l.setParam("ts",function(){return(new Date).getTime()},{permanent:!0,hitType:["all"]}),(l.getConfig("disableCookie")||l.getConfig("disableStorage"))&&l.setParam("idclient",Echo1217ATInternet.Utils.privacy.CONSENTNO,{permanent:!0,hitType:["all"]}),l.getConfig("medium")&&l.setParam("medium",l.getConfig("medium"),{permanent:!0,hitType:["all"]}),l.getConfig("urlPropertyAuto")&&"undefined"!=typeof window&&void 0!==window.location){p=(l.getConfig("urlPropertyQueryString")?window.location.href:window.location.protocol+"//"+window.location.host+window.location.pathname).replace(/[<>]/g,"").substring(0,1600).replace(/&/g,"$").replace(/#/g,"");var _=l.getContext("page")||{};_.url=window.encodeURIComponent(p),l.setContext("page",_),l.setParam("page_url",p,{permanent:!0,hitType:"page click publisher selfPromotion onSiteAdsClick onSiteAdsImpression InternalSearch mvtesting richmedia".split(" ")})}l.plugins.init(),l.callbacks.init(),l.emit("Tracker:Ready",{lvl:"INFO",msg:"Tracker initialized",details:{tracker:l,args:{config:e,context:u,callback:c}}}),c&&c(l),Echo1217ATInternet.Tracker.instances.push(l)},Echo1217ATInternet.Tracker.instances=[],Echo1217ATInternet.Tracker.pluginProtos={},Echo1217ATInternet.Tracker.addPlugin=function(e,t){if(t=t||Echo1217ATInternet.Tracker.Plugins[e],!Echo1217ATInternet.Tracker.pluginProtos[e]){Echo1217ATInternet.Tracker.pluginProtos[e]=t;for(var n=0;n<Echo1217ATInternet.Tracker.instances.length;n++)Echo1217ATInternet.Tracker.instances[n].plugins.load(e,t)}},Echo1217ATInternet.Tracker.delPlugin=function(e){if(Echo1217ATInternet.Tracker.pluginProtos[e]){Echo1217ATInternet.Tracker.pluginProtos[e]=void 0;for(var t=0;t<Echo1217ATInternet.Tracker.instances.length;t++)Echo1217ATInternet.Tracker.instances[t].plugins.unload(e)}},Echo1217ATInternet.Tracker.callbackProtos={}}.call(window),function(){var e={lifetime:30,lastPersistence:!0,domainAttribution:!0,enableUTMTracking:!0,UTMParameters:["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],querystringPrefix:"at_"},t=30,n=30;Echo1217ATInternet.Tracker.Plugins.Campaigns=function(i){function r(e,t,n){for(var i={},r=RegExp("[&#?]{1}([^&=#?]*)=([^&#]*)?","g"),o=r.exec(t);null!==o;)0===o[1].indexOf(e)&&(i[n+o[1].substring(e.length)]=o[2]),o=r.exec(t);return i}i.setConfig("visitLifetime",t,!0),i.setConfig("redirectionLifetime",n,!0);var o,a,s={};i.configPlugin("Campaigns",e||{},function(e){s=e});var u,c,l,d,p,h,_,f,E,g,m,v,T,I,C,S=function(){var e=function(e){var t="";return e&&(t=isNaN(e)&&-1===e.search(/^\[(.*?)\]$/g)&&-1===e.search(/^\d+\[(.*?)\]$/g)?"["+e+"]":e),t},t=function(e){var t=e;return-1!==e.search(/[-]/g)&&-1===e.search(/^\[(.*?)\]$/g)&&(t="["+e+"]"),t},n=function(e){for(;"-"===e.charAt(e.length-1);)e=e.substring(0,e.length-1);return e};this.SponsoredLinks=function(){var r={google:"goo",yahoo:"ysm",miva:"miv",orange:"wan",msn:"msn",mirago:"mir",sklik:"skl",adfox:"adf",etarget:"etg",yandex:"yan",ebay:"eba",searchalliance:"sal",bing:"bin",naver:"nav",baidu:"bdu",qwant:"qwt",waze:"waz",amazon:"amz"},o={search:"s",content:"c"};this.atMedium="sl",this.atTerm=this.atNetwork=this.atVariant=this.atCreation=this.atPlatform=this.atCampaign="",this.format=function(){var i=e(this.atCampaign),a=r[this.atPlatform]||t(this.atPlatform),s=e(this.atCreation),u=e(this.atVariant),c=o[this.atNetwork]||t(this.atNetwork),l=e(this.atTerm);return n("sec-"+i+"-"+a+"-"+s+"-"+u+"-"+c+"-"+l)},this.setProperties=function(e){var t=i.utils.getQueryStringValue(s.querystringPrefix+"source",e)||"";this.atCampaign=i.utils.getQueryStringValue(s.querystringPrefix+"campaign",e)||"",this.atPlatform=i.utils.getQueryStringValue(s.querystringPrefix+"platform",e)||"",this.atCreation=i.utils.getQueryStringValue(s.querystringPrefix+"creation",e)||"",this.atVariant=i.utils.getQueryStringValue(s.querystringPrefix+"variant",e)||"",this.atNetwork=i.utils.getQueryStringValue(s.querystringPrefix+"network",e)||"",this.atTerm=i.utils.getQueryStringValue(s.querystringPrefix+"term",e)||"",i.setContext("campaigns_events",{source:t,medium:this.atMedium,campaign:this.atCampaign,platform:this.atPlatform,creation:this.atCreation,variant:this.atVariant,network:this.atNetwork,term:this.atTerm})}},this.Email=function(){var r={acquisition:"erec",retention:"epr",promotion:"es"};this.atMedium="email",this.atSendTime=this.atRecipientList=this.atRecipientId=this.atLink=this.atSendDate=this.atCreation=this.atCampaign=this.atEmailtype="",this.format=function(){var i=r[this.atEmailtype]||r.promotion,o=e(this.atCampaign),a=e(this.atCreation),s=t(this.atSendDate),u=e(this.atLink),c=t(this.atRecipientId)+(this.atRecipientList?"@"+t(this.atRecipientList):""),l=t(this.atSendTime);return n(i+"-"+o+"-"+a+"-"+s+"-"+u+"-"+c+"-"+l)},this.setProperties=function(e){var t=i.utils.getQueryStringValue(s.querystringPrefix+"source",e)||"";this.atEmailtype=i.utils.getQueryStringValue(s.querystringPrefix+"emailtype",e)||"",this.atCampaign=i.utils.getQueryStringValue(s.querystringPrefix+"campaign",e)||"",this.atCreation=i.utils.getQueryStringValue(s.querystringPrefix+"creation",e)||"",this.atSendDate=i.utils.getQueryStringValue(s.querystringPrefix+"send_date",e)||"",this.atLink=i.utils.getQueryStringValue(s.querystringPrefix+"link",e)||"",this.atRecipientId=i.utils.getQueryStringValue(s.querystringPrefix+"recipient_id",e)||"",this.atRecipientList=i.utils.getQueryStringValue(s.querystringPrefix+"recipient_list",e)||"",this.atSendTime=i.utils.getQueryStringValue(s.querystringPrefix+"send_time",e)||"",i.setContext("campaigns_events",{source:t,medium:this.atMedium,emailtype:this.atEmailtype,campaign:this.atCampaign,creation:this.atCreation,send_date:this.atSendDate,link:this.atLink,recipient_id:this.atRecipientId,recipient_list:this.atRecipientList,send_time:this.atSendTime})}},this.Affiliate=function(){this.atMedium="affiliate",this.atVariant=this.atCreation=this.atFormat=this.atIdentifier=this.atType=this.atCampaign="",this.format=function(){var t=e(this.atCampaign),i=e(this.atType),r=e(this.atIdentifier),o=e(this.atFormat),a=e(this.atCreation),s=e(this.atVariant);return n("al-"+t+"-"+i+"-"+r+"-"+o+"-"+a+"-"+s)},this.setProperties=function(e){var t=i.utils.getQueryStringValue(s.querystringPrefix+"source",e)||"";this.atCampaign=i.utils.getQueryStringValue(s.querystringPrefix+"campaign",e)||"",this.atType=i.utils.getQueryStringValue(s.querystringPrefix+"type",e)||"",this.atIdentifier=i.utils.getQueryStringValue(s.querystringPrefix+"identifier",e)||"",this.atFormat=i.utils.getQueryStringValue(s.querystringPrefix+"format",e)||"",this.atCreation=i.utils.getQueryStringValue(s.querystringPrefix+"creation",e)||"",this.atVariant=i.utils.getQueryStringValue(s.querystringPrefix+"variant",e)||"",i.setContext("campaigns_events",{source:t,medium:this.atMedium,campaign:this.atCampaign,type:this.atType,identifier:this.atIdentifier,format:this.atFormat,creation:this.atCreation,variant:this.atVariant})}},this.Display=function(){this.atMedium="display",this.atDetailPlacement=this.atGeneralPlacement=this.atChannel=this.atFormat=this.atVariant=this.atCreation=this.atCampaign="",this.format=function(){var t=e(this.atCampaign),i=e(this.atCreation),r=e(this.atVariant),o=e(this.atFormat),a=e(this.atChannel),s=e(this.atGeneralPlacement),u=e(this.atDetailPlacement);return n("ad-"+t+"-"+i+"-"+r+"-"+o+"-"+a+"-"+s+"-"+u)},this.setProperties=function(e){var t=i.utils.getQueryStringValue(s.querystringPrefix+"source",e)||"";this.atCampaign=i.utils.getQueryStringValue(s.querystringPrefix+"campaign",e)||"",this.atCreation=i.utils.getQueryStringValue(s.querystringPrefix+"creation",e)||"",this.atVariant=i.utils.getQueryStringValue(s.querystringPrefix+"variant",e)||"",this.atFormat=i.utils.getQueryStringValue(s.querystringPrefix+"format",e)||"",this.atChannel=i.utils.getQueryStringValue(s.querystringPrefix+"channel",e)||"",this.atGeneralPlacement=i.utils.getQueryStringValue(s.querystringPrefix+"general_placement",e)||"",this.atDetailPlacement=i.utils.getQueryStringValue(s.querystringPrefix+"detail_placement",e)||"",i.setContext("campaigns_events",{source:t,medium:this.atMedium,campaign:this.atCampaign,creation:this.atCreation,variant:this.atVariant,format:this.atFormat,channel:this.atChannel,general_placement:this.atGeneralPlacement,detail_placement:this.atDetailPlacement})}},this.Custom=function(){this.atCustom4=this.atCustom3=this.atCustom2=this.atCustom1=this.atCampaign=this.atMedium="",this.format=function(){var t="";/\d+$/.test(this.atMedium)&&(t=/\d+$/.exec(this.atMedium)[0]);t="cs"+t;var i=e(this.atCampaign),r=e(this.atCustom1),o=e(this.atCustom2),a=e(this.atCustom3),s=e(this.atCustom4);return n(t+"-"+i+"-"+r+"-"+o+"-"+a+"-"+s)},this.setProperties=function(e){var t=i.utils.getQueryStringValue(s.querystringPrefix+"source",e)||"";this.atMedium=i.utils.getQueryStringValue(s.querystringPrefix+"medium",e)||"",this.atCampaign=i.utils.getQueryStringValue(s.querystringPrefix+"campaign",e)||"",this.atCustom1=i.utils.getQueryStringValue(s.querystringPrefix+"custom1",e)||"",this.atCustom2=i.utils.getQueryStringValue(s.querystringPrefix+"custom2",e)||"",this.atCustom3=i.utils.getQueryStringValue(s.querystringPrefix+"custom3",e)||"",this.atCustom4=i.utils.getQueryStringValue(s.querystringPrefix+"custom4",e)||"",i.setContext("campaigns_events",{source:t,medium:this.atMedium,campaign:this.atCampaign,custom1:this.atCustom1,custom2:this.atCustom2,custom3:this.atCustom3,custom4:this.atCustom4})}},this.CustomNdf=function(){this.format=function(){},this.setProperties=function(e){i.setProps(r(s.querystringPrefix,e,"src_"),!0)}},this.medium={sl:this.SponsoredLinks,email:this.Email,affiliate:this.Affiliate,display:this.Display}},A=function(e,t){var n=i.getContext("campaigns")||{};n[e]=t,i.setContext("campaigns",n)},y=function(){var e=i.utils.getLocation();!function(){if((t=i.utils.getQueryStringValue(s.querystringPrefix+"medium",e))&&!m){var t,n=new S;(t="function"==typeof n.medium[t]?new n.medium[t]:0===t.indexOf("custom")?new n.Custom:new n.CustomNdf).setProperties(e),_=t.format()}else _=i.utils.getQueryStringValue("xtor",e);f=i.utils.getQueryStringValue("xtdt",e),E=i.utils.getQueryStringValue("xts",e)}(),s.enableUTMTracking&&function(){var t,n=r("utm_",e,""),o=!1;for(t in n)n.hasOwnProperty(t)&&(A("utm_"+t,n[t]),o=!0);o&&i.setContext("campaigns_utm_events",n)}()},O=function(e,t){var n=i.storage[a](e);return null!==n?"object"==typeof n&&!(n instanceof Array):(i.storage[o](e,{},t),!0)};i.plugins.waitForDependencies(["Storage","Utils"],function(){o="set"+(s.domainAttribution?"":"Private"),a="get"+(s.domainAttribution?"":"Private"),u=i.storage[a](["atredir","gopc"]),c=i.storage[a](["atredir","gopc_err"]),l=i.storage[a](["atredir","camp"]),i.storage.del(["atredir","gopc"]),i.storage.del(["atredir","gopc_err"]),i.storage.del(["atredir","camp"]),d=i.storage[a](["atsession","histo_camp"]),p=i.storage[a](["atreman","camp"]),h=i.storage[a](["atreman","date"]),g=i.getContext("forcedCampaign");e:{var e=m=i.getContext("forcedCampaignV2");if(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+="&"+s.querystringPrefix+t+"="+e[t]);if(e=i.utils.getQueryStringValue(s.querystringPrefix+"medium",n)){(e="function"==typeof(t=new S).medium[e]?new t.medium[e]:0===e.indexOf("custom")?new t.Custom:new t.CustomNdf).setProperties(n),v=e.format();break e}}v=void 0}var r;y(),T=!!i.getConfig("redirect"),C=!1,(I=!!(_&&f&&E))&&(n=(new Date).getTime()/6e4,C=!T&&E!==i.getConfig("site")||0>n-f||n-f>=i.getConfig("visitLifetime")),n=v||g||l||_,T&&n&&O("atredir",{path:"/",end:i.getConfig("redirectionLifetime")})&&(i.storage[o](["atredir","camp"],n),e=n=!1,g||v||(l?(n=u,e=c):(n=I,e=C)),i.storage[o](["atredir","gopc"],n),i.storage[o](["atredir","gopc_err"],e)),!T&&p&&(A("xtor",p),n=(new Date).getTime()/36e5,n=Math.floor(n-h),A("roinbh",0<=n?n:0)),T||(n=null,n=l?u?v||g||n:v||g||l:I?v||g:v||g||_||n,d&&d instanceof Array&&-1<d.indexOf(n)&&(n=null),n&&A("xto",n)),T||g||v||(l?c&&(r=l):C&&(r=_),r&&A("pgt",r)),T||!(r=l?v||g||l:v||g||_||null)||!g&&!v&&!l&&I&&C||!g&&!v&&l&&u&&c||((!d||d instanceof Array&&0>d.indexOf(r))&&O("atsession",{path:"/",session:60*i.getConfig("visitLifetime")})&&i.storage[o](["atsession","histo_camp"],d&&d.push(r)?d:[r]),p&&!s.lastPersistence||!O("atreman",{path:"/",session:86400*s.lifetime})||(i.storage[o](["atreman","camp"],r),i.storage[o](["atreman","date"],(new Date).getTime()/36e5))),i.emit("Campaigns:process:done",{lvl:"INFO"})})},Echo1217ATInternet.Tracker.addPlugin("Campaigns")}.call(window),function(){var e={};Echo1217ATInternet.Tracker.Plugins.Storage=function(t){var n=this,i=!1,r=null;t.configPlugin("Storage",e||{},function(e){"localStorage"===e.storageMode&&(i=Echo1217ATInternet.Utils.isLocalStorageAvailable())});var o={},a=function(e){return t.getConfig("base64Storage")?Echo1217ATInternet.Utils.Base64.encode(e):encodeURIComponent(e)},s=function(e){return t.getConfig("base64Storage")?Echo1217ATInternet.Utils.Base64.decode(e):decodeURIComponent(e)};r=i?new function(){var e=function(e){var t,n=+new Date,i=!1;return e.options&&(void 0!==e.options.expires?t=e.options.expires:"function"==typeof(e=e.options.end||{}).getTime?t=e.getTime():"number"==typeof e&&(t=n+1e3*e)),"number"==typeof t&&n>=t&&(i=!0),{itemToDelete:i,timestamp:t}},t=function(e){var t=!1;try{localStorage.removeItem(e),t=!0}catch(e){}return t};this.getData=function(n){var i=null;if(r=localStorage.getItem(n)){var r=s(r),o=Echo1217ATInternet.Utils.jsonParse(r);o&&"object"==typeof o?e(o).itemToDelete&&t(n)||(delete o.options.expires,i=Echo1217ATInternet.Utils.jsonSerialize(o)):i=r}return i},this.setData=function(n){var i=!1;if(n.name&&"string"==typeof n.name){var r=e(n);"number"==typeof r.timestamp&&(n.options.expires=r.timestamp);var o=Echo1217ATInternet.Utils.jsonSerialize(n);if(r.itemToDelete)i=t(n.name);else try{localStorage.setItem(n.name,a(o)),i=!0}catch(e){}}return i}}:new function(){this.getData=function(e){var t=null;return(e=RegExp("(?:^| )"+e+"=([^;]+)").exec(document.cookie)||null)&&(t=s(e[1])),t},this.setData=function(e){var n=!1;if(e.name&&"string"==typeof e.name){var i=e.options||{},r=i.end||{},o=i.domain||t.getConfig("cookieDomain"),s=i.secure||t.getConfig("cookieSecure"),u=i.samesite||t.getConfig("sameSiteStrict"),c=Echo1217ATInternet.Utils.jsonSerialize(e);c=(c=(c=(c=e.name+"="+a(c))+(i.path&&"string"==typeof i.path?";path="+i.path:""))+(o&&"string"==typeof o?";domain="+o:"")+(s&&"boolean"==typeof s?";secure":""))+(u&&"boolean"==typeof u?";samesite=strict":"");"function"==typeof r.toUTCString?c+=";expires="+r.toUTCString():"number"==typeof r&&(c+=";max-age="+r.toString()),document.cookie=c,this.getData(e.name)&&(n=!0)}return n}};var u=function(e,n){var i=!1;return e&&"object"==typeof e&&(n||Echo1217ATInternet.Utils.consent&&!t.getConfig("disableCookie")&&!t.getConfig("disableStorage"))&&(i=r.setData(e)),i},c=function(e,t,n){return e={name:e,val:t},n&&n.session&&"number"==typeof n.session&&(n.end=n.session),e.options=n||{},e},l=function(e){var n=null,i=null;return t.getConfig("disableCookie")||t.getConfig("disableStorage")||!e||"string"!=typeof e||(i=r.getData(e)),(e=i)&&(n=Echo1217ATInternet.Utils.jsonParse(e)),n},d=function(e,t){var n=Echo1217ATInternet.Utils.cloneSimpleObject(e);return u(n,t)?Echo1217ATInternet.Utils.jsonParse(Echo1217ATInternet.Utils.jsonSerialize(e)):null},p=function(e,t,n){return!n&&o[e]?n=o[e]:(n=l(e))&&(n.options=n.options||{},n.options.session&&"number"==typeof n.options.session&&(n.options.end=n.options.session,d(n,!1)),o[e]=n),n?t?(e=null,!n||"object"!=typeof n.val||n.val instanceof Array||void 0===n.val[t]||(e=n.val[t]),e):n.val:null},h=function(e,t,n,i,r){return t?(r=l(e))&&(!r||"object"!=typeof r.val||r.val instanceof Array?r=null:void 0===n?delete r.val[t]:r.val[t]=n,r&&(r=d(r,i))):(r=c(e,n,r=r||{}),r=d(r,i)),r?(o[e]=r,r.val):null},_=function(e,t){if(t)h(e,t,void 0,!0,null);else{o[e]=void 0;var n=c(e,"",{end:new Date("Thu, 01 Jan 1970 00:00:00 UTC"),path:"/"});u(n,!0)}};t.storage={},t.storage.getAll=function(){return o},t.storage.get=n.get=function(e,t){return t=!!t,e instanceof Array?p(e[0],e[1],t):p(e,"",t)},t.storage.getPrivate=n.getPrivate=function(e,i){return e instanceof Array?e[0]+=t.getConfig("site"):e+=t.getConfig("site"),n.get(e,i)},t.storage.set=n.set=function(e,t,n,i){var r;return e instanceof Array?(r=e[0],e=e[1],n=null):(r=e,e=null),Echo1217ATInternet.Utils.privacy.testStorageParam(r,e).toSetInStorage||i?h(r,e,t,i,n):null},t.storage.setPrivate=n.setPrivate=function(e,i,r){return e instanceof Array?e[0]+=t.getConfig("site"):e+=t.getConfig("site"),n.set(e,i,r)},t.storage.del=n.del=function(e){e instanceof Array?_(e[0],e[1]):_(e,"")},t.storage.delPrivate=n.delPrivate=function(e){e instanceof Array?e[0]+=t.getConfig("site"):e+=t.getConfig("site"),n.del(e)},t.storage.cacheInvalidation=n.cacheInvalidation=function(){o={}}},Echo1217ATInternet.Tracker.addPlugin("Storage")}.call(window),function(){Echo1217ATInternet.Tracker.Plugins.Utils=function(e){var t=this,n={};e.utils={},e.utils.getQueryStringValue=t.getQueryStringValue=function(e,t){var i=Echo1217ATInternet.Utils.hashcode(t).toString();if(!n[i]){n[i]={};for(var r=RegExp("[&#?]{1}([^&=#?]*)=([^&#]*)?","g"),o=r.exec(t);null!==o;)n[i][o[1]]=o[2],o=r.exec(t)}return n[i].hasOwnProperty(e)?n[i][e]:null},e.utils.manageChapters=t.manageChapters=function(t,n,i){var r="";if(t)for(var o=e.getConfig("ignoreEmptyChapterValue"),a="",s=1;s<parseInt(i,10)+1;s++)a=t[n+s]||"",r=o?r+(a?a+"::":""):r+(t.hasOwnProperty(n+s)?a+"::":"");return r},e.utils.getDocumentLevel=t.getDocumentLevel=function(){var t=e.getConfig("documentLevel");return t?0>t.indexOf(".")?window[t]||document:(t=t.split("."),window[t[0]][t[1]]||document):document},e.utils.getLocation=t.getLocation=function(){return t.getDocumentLevel().location.href},e.utils.getHostName=t.getHostName=function(){return t.getDocumentLevel().location.hostname},e.dispatchIndex={},e.dispatchStack=[],e.dispatchEventFor={};var i=0;e.dispatchSubscribe=function(t){return!e.dispatchIndex[t]&&(e.dispatchStack.push(t),e.dispatchIndex[t]=!0)},e.dispatchSubscribed=function(t){return!0===e.dispatchIndex[t]},e.addSpecificDispatchEventFor=function(t){return!e.dispatchEventFor[t]&&(e.dispatchEventFor[t]=!0,i++,!0)},e.processSpecificDispatchEventFor=function(t){e.dispatchEventFor[t]&&(e.dispatchEventFor[t]=!1,0===--i&&(e.dispatchEventFor={},e.emit("Tracker:Plugin:SpecificEvent:Exec:Complete",{lvl:"INFO"})))},e.dispatch=function(t,n){var r=function(){for(var i="",r=null;0<e.dispatchStack.length;)i=e.dispatchStack.pop(),0===e.dispatchStack.length&&(r=t),e[i].onDispatch(r,n);e.dispatchIndex={},e.delContext(void 0,"customObject")},o=function(){e.plugins.isExecWaitingLazyloading()?e.onTrigger("Tracker:Plugin:Lazyload:Exec:Complete",function(){r()},!0):r()};0===i?o():e.onTrigger("Tracker:Plugin:SpecificEvent:Exec:Complete",function(){o()},!0)},e.dispatchRedirect=function(t){var n=!0,i="",r=null;return t&&(!Echo1217ATInternet.Utils.isTabOpeningAction(t.event)&&t.elem&&e.plugins.exec("TechClicks","manageClick",[t.elem],function(e){n=e.preservePropagation,i=e.elementType}),r=t.callback),e.dispatch(r,i),n},e.manageSend=function(t){Echo1217ATInternet.Utils.isPreview()&&!e.getConfig("preview")||Echo1217ATInternet.Utils.isPrerender(function(e){t(e)})||t()},e.processTagObject=function(t,n,i){if((t=e.getParam(t,!0))&&t._options.permanent){for(var r=!1,o=t._options.hitType||[],a=0;a<o.length;a++)if(-1!==Echo1217ATInternet.Utils.arrayIndexOf(n.concat("all"),o[a])){r=!0;break}r&&(i=Echo1217ATInternet.Utils.completeFstLevelObj(t._value||{},i,!0))}return i},e.processContextObjectAndSendHit=function(t,n,i,r){var o={hitType:n.hitType,encode:n.encode,separator:n.separator,truncate:n.truncate},a=e.getParam(t,!0);if(a){for(var s=!1,u=a._options.hitType||[],c=0;c<u.length;c++)if(-1!==Echo1217ATInternet.Utils.arrayIndexOf(n.hitType.concat("all"),u[c])){s=!0;break}s?((s=Echo1217ATInternet.Utils.cloneSimpleObject(a))._value=Echo1217ATInternet.Utils.completeFstLevelObj(s._value||{},i,!0),e.setParam(t,s._value,o),e.manageSend(function(){e.sendHit(null,[["hitType",n.hitType]],r,n.requestMethod,n.elementType)}),a._options.permanent&&e.setParam(t,a._value,a._options)):(e.setParam(t,i,o),e.manageSend(function(){e.sendHit(null,[["hitType",n.hitType]],r,n.requestMethod,n.elementType)}),e.setParam(t,a._value,a._options))}else e.setParam(t,i,o),e.manageSend(function(){e.sendHit(null,[["hitType",n.hitType]],r,n.requestMethod,n.elementType)})}},Echo1217ATInternet.Tracker.addPlugin("Utils")}.call(window),function(){var e={clicksAutoManagementEnabled:!0,clicksAutoManagementTimeout:500};Echo1217ATInternet.Tracker.Plugins.TechClicks=function(t){var n,i,r=this,o=["Tracker:Hit:Sent:Ok","Tracker:Hit:Sent:Error","Tracker:Hit:Sent:NoTrack"],a=!1;t.configPlugin("TechClicks",e||{},function(e){n=e.clicksAutoManagementEnabled,i=e.clicksAutoManagementTimeout});var s=function(e){switch(a=!1,e.target){case"_top":window.top.location.href=e.url;break;case"_parent":window.parent.location.href=e.url;break;default:window.location.href=e.url}},u=function(e){e.mailto?r.timeout=setTimeout(function(){window.location.href=e.mailto},e.timeout):e.form?r.timeout=setTimeout(function(){e.form.submit()},e.timeout):e.url&&(r.timeout=setTimeout(function(){s({url:e.url,target:e.target})},e.timeout))},c=function(e){for(var n=0;n<o.length;n++)t.onTrigger(o[n],function(t,n){e&&e(n)})},l=function(e){for(var t,n="_self";e;){if(e.href&&0===e.href.indexOf("http")){t=e.href.split('"').join('\\"'),n=e.target?e.target:n;break}e=e.parentNode}t&&!a&&(a=!0,c(function(e){e.details.isMultiHit||e.details.elementType!==Echo1217ATInternet.Utils.CLICKS_REDIRECTION||(r.timeout&&clearTimeout(r.timeout),s({url:t,target:n}))}),u({url:t,target:n,timeout:i}))},d=function(e){for(var t=e;t&&"FORM"!==t.nodeName;)t=t.parentNode;t&&(c(function(e){e.details.isMultiHit||e.details.elementType!==Echo1217ATInternet.Utils.CLICKS_FORM||(r.timeout&&clearTimeout(r.timeout),t.submit())}),u({form:t,timeout:i}))},p=function(e){for(var t=e;t&&!(t.href&&0<=t.href.indexOf("mailto:"));)t=t.parentNode;t&&(c(function(e){e.details.isMultiHit||e.details.elementType!==Echo1217ATInternet.Utils.CLICKS_MAILTO||(r.timeout&&clearTimeout(r.timeout),window.location.href=t.href)}),u({mailto:t.href,timeout:i}))};r.isFormSubmit=function(e){for(;e;){if("FORM"===e.nodeName)return!0;e=e.parentNode}return!1},t.techClicks={},t.techClicks.manageClick=r.manageClick=function(e,t){var i=!0,r="";if(n&&e){var o;e:{for(r=e;r;){if("function"==typeof r.getAttribute&&("_blank"===r.getAttribute("target")||"no"===r.getAttribute("data-atclickmanagement"))){o=!0;break e}r=r.parentNode}r=e,o=window.location.href;for(var a;r;){if((a=r.href)&&0<=a.indexOf("#")&&o.substring(0,0<=o.indexOf("#")?o.indexOf("#"):o.length)===a.substring(0,a.indexOf("#"))){o=!0;break e}r=r.parentNode}o=!1}if(r=function(e){for(var t=e;t;){if(t.href){if(0<=t.href.indexOf("mailto:"))return Echo1217ATInternet.Utils.CLICKS_MAILTO;if(0===t.href.indexOf("http"))return Echo1217ATInternet.Utils.CLICKS_REDIRECTION}else if("FORM"===t.nodeName){var n=e;if(e=!1,n&&("form"===(t=(t=n.tagName||"").toLowerCase())?e=!0:(n=(n=n.getAttribute("type")||"").toLowerCase(),"button"===t?"reset"!==n&&"button"!==n&&(e=!0):"input"===t&&"submit"===n&&(e=!0))),e)return Echo1217ATInternet.Utils.CLICKS_FORM;break}t=t.parentNode}return""}(e),!o&&r){switch(r){case Echo1217ATInternet.Utils.CLICKS_MAILTO:p(e),i=!1;break;case Echo1217ATInternet.Utils.CLICKS_FORM:d(e),i=!1;break;case Echo1217ATInternet.Utils.CLICKS_REDIRECTION:l(e),i=!1}t&&(o=t.defaultPrevented,"function"==typeof t.isDefaultPrevented&&(o=t.isDefaultPrevented()),o||t.preventDefault&&t.preventDefault())}}return{preservePropagation:i,elementType:r}},t.techClicks.deactivateAutoManagement=function(){n=!1}},Echo1217ATInternet.Tracker.addPlugin("TechClicks")}.call(window),function(){var e={requestMethod:"POST"};Echo1217ATInternet.Tracker.Plugins.Clicks=function(t){var n={};t.configPlugin("Clicks",e||{},function(e){n=e});var i=function(e){var t="";switch(e){case"exit":t="S";break;case"download":t="T";break;case"action":t="A";break;case"navigation":t="N"}return t},r=function(e){return t.utils.manageChapters(e,"chapter",3)+(e.name?e.name:"")},o=function(e,o){var a={p:r(e),click:i(e.type)||""};void 0!==e.level2&&(a.s2=e.level2);var s=["click"],u=t.getContext("page")||{};a.pclick=r(u),void 0!==u.level2&&(a.s2click=u.level2),(u=e.customObject)&&(u=t.processTagObject("stc",s,u),a.stc={_value:Echo1217ATInternet.Utils.jsonSerialize(u),_options:{hitType:s,encode:!0,separator:",",truncate:!0}}),t.sendHit(a,[["hitType",s]],e.callback,n.requestMethod,o)};t.click={},t.clickListener={},t.click.send=function(e){var i=!0,r="";return!(e=e||{}).elem||"POST"===n.requestMethod&&Echo1217ATInternet.Utils.isBeaconMethodAvailable()||Echo1217ATInternet.Utils.isTabOpeningAction(e.event)||(i=(r=t.techClicks.manageClick(e.elem)).preservePropagation,r=r.elementType),o(e,r),i},t.clickListener.send=function(e){if((e=e||{}).elem){var i="click",r="";t.plugins.exec("TechClicks","isFormSubmit",[e.elem],function(e){i=e?"submit":"click"}),Echo1217ATInternet.Utils.addEvtListener(e.elem,i,function(i){"POST"===n.requestMethod&&Echo1217ATInternet.Utils.isBeaconMethodAvailable()||Echo1217ATInternet.Utils.isTabOpeningAction(i)||(r=t.techClicks.manageClick(e.elem,i).elementType),o(e,r)})}},t.click.set=function(e){e=e||{},t.dispatchSubscribe("click"),t.setContext("click",{name:r(e),level2:e.level2||"",customObject:e.customObject}),t.setParam("click",i(e.type)||"",{hitType:["click"]})},t.click.onDispatch=function(e,i){var o=["click"],a=t.getContext("click")||{},s=t.getContext("page")||{};t.setParam("pclick",r(s),{hitType:o}),t.setParam("s2click",s.level2||"",{hitType:o}),t.setParam("p",a.name,{hitType:o}),void 0!==a.level2&&t.setParam("s2",a.level2,{hitType:o}),(a=a.customObject)?t.processContextObjectAndSendHit("stc",{hitType:o,encode:!0,separator:",",truncate:!0,requestMethod:n.requestMethod,elementType:i},a,e):t.manageSend(function(){t.sendHit(null,[["hitType",o]],e,n.requestMethod,i)}),t.delContext("click")}},Echo1217ATInternet.Tracker.addPlugin("Clicks")}.call(window),function(){var e={clientSideMode:"always",userIdCookieDuration:397,userIdExpirationMode:"relative",optOut:"OPT-OUT",userIdStorageName:"atuserid",userIdHitName:"idclient",itpCompliant:!1,baseDomain:""};Echo1217ATInternet.Tracker.Plugins.ClientSideUserId=function(t){var n={},i=!1,r=null,o=-1;t.configPlugin("ClientSideUserId",e||{},function(e){n=e});var a=function(){var e=n.baseDomain;e||(i=t.getConfig("cookieDomain"))&&("."===(e=i).charAt(0)&&(e=e.substring(1,e.length)));var i=t.builder.getCollectDomain(),r=t.utils.getHostName();return!!(e&&i&&r&&-1!==i.indexOf(e)&&-1!==r.indexOf(e))},s=function(){r={contextUserId:void 0,storageUserId:null,finalUserId:null,isFromTrackerContext:!1,forceStorage:!1,optout:{isOptedout:!1,fromStorage:!1}}},u=function(){if("relative"===n.userIdExpirationMode||"fixed"===n.userIdExpirationMode&&null===r.storageUserId||r.isFromTrackerContext){var e=new Date;e.setTime(e.getTime()+864e5*n.userIdCookieDuration),t.storage.set(n.userIdStorageName,r.finalUserId,{end:e,path:"/"},r.forceStorage),Echo1217ATInternet.Utils.consent&&!r.isFromTrackerContext&&r.finalUserId!==t.storage.get(n.userIdStorageName,!0)&&t.setParam(n.userIdHitName,r.finalUserId+"-NO",{multihit:!0,permanent:!0,hitType:["all"]})}},c=function(){t.setParam(n.userIdHitName,r.finalUserId,{multihit:!0,permanent:!0,hitType:["all"]}),u()},l=function(){s();var e=!1;if(null===Echo1217ATInternet.Utils.optedOut?t.storage.get(n.userIdStorageName,!0)===n.optOut?e=Echo1217ATInternet.Utils.optedOut=!0:Echo1217ATInternet.Utils.optedOut=!1:!1===Echo1217ATInternet.Utils.optedOut&&(t.getParam(n.userIdHitName)===n.optOut&&t.delParam(n.userIdHitName),t.storage.get(n.userIdStorageName,!0)===n.optOut&&t.storage.del(n.userIdStorageName)),r.optout.isOptedout=Echo1217ATInternet.Utils.optedOut,r.optout.fromStorage=e,r.contextUserId=t.getContext("userIdentifier"),r.storageUserId=t.storage.get("atuserid",!0),e=!1,"required"===n.clientSideMode){var o="";window.navigator&&(o=window.navigator.userAgent),(/Safari/.test(o)&&!/Chrome/.test(o)||/iPhone|iPod|iPad/.test(o))&&(e=!0)}else"always"===n.clientSideMode&&(e=!0);if(i=e,e=!1,!t.getConfig("forceHttp")&&n.itpCompliant&&void 0===r.contextUserId&&!r.optout.isOptedout)switch(n.clientSideMode){case"never":e=a();break;case"always":case"required":i&&null!==r.storageUserId||(e=a())}e||!i&&!r.optout.isOptedout&&void 0===r.contextUserId?t.setConfig("userIdOrigin","server"):(t.setConfig("userIdOrigin","client"),r.isFromTrackerContext=!1,r.forceStorage=!1,r.optout.isOptedout?(r.finalUserId=n.optOut,r.isFromTrackerContext=!r.optout.fromStorage,r.forceStorage=!0):t.getConfig("disableCookie")||t.getConfig("disableStorage")?(r.finalUserId=t.getParam(n.userIdHitName),r.isFromTrackerContext=!0):void 0!==r.contextUserId?(r.finalUserId=r.contextUserId,r.isFromTrackerContext=!0):r.finalUserId=null!==r.storageUserId?r.storageUserId:Echo1217ATInternet.Utils.uuid().v4(),c())},d=function(e){e&&(e=e.detail)&&"clientsideuserid"===e.name&&e.id===o&&l()};t.plugins.waitForDependencies(["Storage","Utils"],function(){var e=Echo1217ATInternet.Utils.uuid();o=parseInt(e.num(8)),Echo1217ATInternet.Utils.removeOptOutEvent(d),Echo1217ATInternet.Utils.addOptOutEvent(o,d),l()}),t.clientSideUserId={},t.clientSideUserId.set=function(e){r.optout.isOptedout||(r.finalUserId=e,r.isFromTrackerContext=!0,r.forceStorage=!1,c())},t.clientSideUserId.store=function(){r.finalUserId=t.getParam(n.userIdHitName)||r.finalUserId,null!==r.finalUserId&&r.finalUserId!==Echo1217ATInternet.Utils.privacy.CONSENTNO&&r.finalUserId!==r.storageUserId&&(r.isFromTrackerContext=!0,r.forceStorage=!0,u())},t.clientSideUserId.get=function(){return r.finalUserId=t.getParam(n.userIdHitName)||r.finalUserId,r.finalUserId},t.clientSideUserId.clear=function(){s(),t.delParam(n.userIdHitName),t.storage.del(n.userIdStorageName)}},Echo1217ATInternet.Tracker.addPlugin("ClientSideUserId")}.call(window),function(){var e={domainAttribution:!0},t=30;Echo1217ATInternet.Tracker.Plugins.ContextVariables=function(n){var i,r="",o=null,a="",s="",u={};n.configPlugin("ContextVariables",e||{},function(e){u=e}),n.setConfig("redirectionLifetime",t,!0);var c=function(e,t){var i=null;return n.plugins.exec("Storage",e,t,function(e){i=e}),i},l=function(){n.setParam("vtag",n.version,{permanent:!0,hitType:["all"]})},d=function(){n.setParam("ptag","js",{permanent:!0,hitType:["all"]})},p=function(){var e="";try{e+=window.screen.width+"x"+window.screen.height+"x"+window.screen.pixelDepth+"x"+window.screen.colorDepth}catch(e){}n.setParam("r",e,{permanent:!0,hitType:["all"]})},h=function(){var e="";window.innerWidth?e+=window.innerWidth+"x"+window.innerHeight:document.body&&document.body.offsetWidth&&(e+=document.body.offsetWidth+"x"+document.body.offsetHeight),n.setParam("re",e,{permanent:!0,hitType:["all"]})},_=function(){window.navigator&&n.setParam("lng",window.navigator.language||window.navigator.userLanguage,{permanent:!0,hitType:["all"]})},f=function(){var e=Echo1217ATInternet.Utils.uuid().num(13);n.setParam("idp",e,{permanent:!0,hitType:["page","clickzone"]})},E=function(){window.navigator&&n.setParam("jv",window.navigator.javaEnabled()?"1":"0",{hitType:["page"]})},g=function(){n.setParam("hl",function(){var e=new Date;return e.getHours()+"x"+e.getMinutes()+"x"+e.getSeconds()},{permanent:!0,hitType:["all"]})},m=function(){var e=n.utils.getDocumentLevel();n.setParam("ref",function(e){return(e=i||("acc_dir"===r?"":null!==r?r:"acc_dir"===o?"":o||(e?e.referrer:"")))&&(e=e.replace(/[<>]/g,"").substring(0,1600).replace(/&/g,"$")),e}(e),{permanent:!0,last:!0,hitType:["page","ecommerce","avinsights","events"]})},v=function(){a="set"+(u.domainAttribution?"":"Private"),s="get"+(u.domainAttribution?"":"Private");var e=n.utils.getLocation();if(void 0===(r=n.utils.getQueryStringValue("xtref",e))&&(r=""),i=n.getContext("forcedReferer"),n.getConfig("redirect")){var t;e=n.utils.getDocumentLevel();if(t=e=i||(null!==r?r:e?e.referrer:"acc_dir")){t={path:"/",end:n.getConfig("redirectionLifetime")};var v=c(s,["atredir"]);null!==v?t="object"==typeof v&&!(v instanceof Array):(c(a,["atredir",{},t]),t=!0)}t&&c(a,[["atredir","ref"],e])}else o=c(s,[["atredir","ref"]]),c("del",[["atredir","ref"]]),l(),d(),p(),h(),g(),_(),f(),E(),m();n.emit("ContextVariables:Ready",{lvl:"INFO"})};n.contextVariables={},n.contextVariables.params={},n.contextVariables.params.vtag=l,n.contextVariables.params.ptag=d,n.contextVariables.params.r=p,n.contextVariables.params.re=h,n.contextVariables.params.lng=_,n.contextVariables.params.idp=f,n.contextVariables.params.jv=E,n.contextVariables.params.hl=g,n.contextVariables.params.ref=m,n.contextVariables.setAll=v,n.plugins.waitForDependencies(["Storage","Utils"],v)},Echo1217ATInternet.Tracker.addPlugin("ContextVariables")}.call(window),function(){var e={storageCapacity:1,timeout:500};Echo1217ATInternet.Tracker.Plugins.Offline=function(t){function n(e,o,l,d){if(window.navigator&&window.navigator.onLine){var p=s();if(0<p.length){var h=p.shift();a({hits:p}),r||(t.onTrigger("Tracker:Hit:Sent:Ok",function(t,i){e&&i.details.hit===e||n(e,o,l,d)},!1),t.onTrigger("Tracker:Hit:Sent:Error",function(t,i){e&&i.details.hit===e||n(e,o,l,d)},!1),r=!0),t.sendUrl(h,null,"GET",d)}else e&&(t.utils.getQueryStringValue("a",e)?setTimeout(function(){t.sendUrl(e,null,null,null)},i.timeout):t.sendUrl(e,o,l,d))}else e&&(c(u(e)),o&&o())}var i={},r=!1;t.configPlugin("Offline",e||{},function(e){i=e});var o=function(){var e=localStorage.getItem("ATOffline"),t={hits:[],length:0};if(e){var n=Echo1217ATInternet.Utils.jsonParse(e)||{hits:[]};t.hits=n.hits,t.length=e.length}return t},a=function(e){try{localStorage.setItem("ATOffline",Echo1217ATInternet.Utils.jsonSerialize(e))}catch(e){}},s=function(){return o().hits},u=function(e){if(e){e=e.split(/&ref=\.*/i);var t="&cn=offline&olt="+String(Math.floor((new Date).getTime()/1e3));e=e[0]+t+(e[1]?"&ref="+e[1]:"")}return e},c=function(e){var t=o(),n=e.length,r=!0;if(4*((t.length||11)+n)>1048576*i.storageCapacity){r=!1;var s=t.hits.shift();if(void 0!==s){r=!0;for(var u=s.length;u<n;){if(void 0===(s=t.hits.shift())){r=!1;break}u+=s.length}}}r&&(t.hits.push(e),a({hits:t.hits}))},l=function(e){t.builder.sendUrl=function(t,i,r,o){e||window.navigator&&!window.navigator.onLine?(c(u(t)),i&&i()):n(t,i,r,o)}};t.offline={},t.offline.getLength=function(){return 4*o().length},t.offline.remove=function(){a({hits:[]})},t.offline.get=s,t.offline.send=function(){n(null,null,"GET")},t.plugins.waitForDependencies(["Utils"],function(){var e,n=Echo1217ATInternet.Utils.isLocalStorageAvailable();window.navigator&&(e=window.navigator.onLine),n&&void 0!==e&&("required"===i.storageMode?l(!1):"always"===i.storageMode&&l(!0)),t.emit("Offline:Ready",{lvl:"INFO",details:{isLocalStorageAvailable:n,storageMode:i.storageMode,isOnline:e}})})},window.Echo1217ATInternet.Tracker.addPlugin("Offline")}.call(window),function(){Echo1217ATInternet.Tracker.Plugins.Page=function(e){var t=["pageId","chapterLabel","update"],n=["pid","pchap","pidt"],i=["page","site"],r=["f","x"],o=function(t){return e.utils.manageChapters(t,"chapter",3)+(t.name?t.name:"")},a=function(e,t,n){return t?e=t:e||void 0===n||(e=n),e},s=function(e,t,n){t.hasOwnProperty(n)&&(e[n]=a(e[n],t[n],void 0))},u=function(t,n,o){if(n)for(var a=0;a<i.length;a++)if(n.hasOwnProperty(i[a])&&n[i[a]])for(var s in n[i[a]])n[i[a]].hasOwnProperty(s)&&(o?t[r[a]+s]=n[i[a]][s]:e.setParam(r[a]+s,n[i[a]][s]))},c=function(i,r,o){if(r){var a=e.utils.manageChapters(r,"chapter",3);for(a&&(r.chapterLabel=a.replace(/::$/gi,"")),a=0;a<n.length;a++)r.hasOwnProperty(t[a])&&(o?i[n[a]]=r[t[a]]:e.setParam(n[a],r[t[a]]))}},l=function(t,n,i){if(n&&n.keywords instanceof Array){var r=n.keywords.length;if(0<r){for(var o="",a=0;a<r;a++)o+="["+n.keywords[a]+"]"+(a<r-1?"|":"");i?t.tag=o:e.setParam("tag",o)}}},d=function(t,n,i){if(n){var r,o=function(e){return e||"0"};r=o(n.category1)+"-",r+=o(n.category2)+"-",r+=o(n.category3),i?t.ptype=r:e.setParam("ptype",r)}},p=function(t,n,i){if(n)for(var r in n)n.hasOwnProperty(r)&&void 0!==n[r]&&(i?t[r]=n[r]:e.setParam(r,n[r]))};e.customVars={},e.customVars.set=function(t){var n=e.getContext("page")||{},i=n.customVars;if(i){if(t)for(var r in t)t.hasOwnProperty(r)&&(i[r]=Echo1217ATInternet.Utils.completeFstLevelObj(i[r],t[r],!0))}else i=t;n.customVars=i,e.setContext("page",n)},e.dynamicLabel={},e.dynamicLabel.set=function(t){var n=e.getContext("page")||{};n.dynamicLabel=Echo1217ATInternet.Utils.completeFstLevelObj(n.dynamicLabel,t,!0),e.setContext("page",n)},e.tags={},e.tags.set=function(t){var n=e.getContext("page")||{};n.tags=Echo1217ATInternet.Utils.completeFstLevelObj(n.tags,t,!0),e.setContext("page",n)},e.customTreeStructure={},e.customTreeStructure.set=function(t){var n=e.getContext("page")||{};n.customTreeStructure=Echo1217ATInternet.Utils.completeFstLevelObj(n.customTreeStructure,t,!0),e.setContext("page",n)},e.page={},e.page.reset=function(){e.delContext("page")},e.page.set=function(t){t=t||{},e.dispatchSubscribe("page");var n=e.getContext("page")||{};n.name=a(n.name,t.name,""),void 0!==t.level2&&(n.level2=t.level2),s(n,t,"chapter1"),s(n,t,"chapter2"),s(n,t,"chapter3"),n.customObject=Echo1217ATInternet.Utils.completeFstLevelObj(n.customObject,t.customObject,!0),e.setContext("page",n)},e.page.send=function(t){var n=!0,i="",r={p:o(t=t||{})};if(void 0!==t.level2&&(r.s2=t.level2),_=t.customObject){var h=["page"],_=e.processTagObject("stc",h,_);r.stc={_value:Echo1217ATInternet.Utils.jsonSerialize(_),_options:{hitType:h,encode:!0,separator:",",truncate:!0}}}return(_=e.getContext("page")||{}).vrn&&(r.vrn=_.vrn,e.delContext("page","vrn")),void 0!==(h=e.getContext("InternalSearch")||{}).keyword&&(r.mc=Echo1217ATInternet.Utils.cloneSimpleObject(h.keyword),void 0!==h.resultPageNumber&&(r.np=Echo1217ATInternet.Utils.cloneSimpleObject(h.resultPageNumber)),e.delContext("InternalSearch")),Echo1217ATInternet.Utils.isPreview()&&e.getConfig("preview")&&(r.pvw=1),u(r,t.customVars,!0),c(r,t.dynamicLabel,!0),l(r,t.tags,!0),d(r,t.customTreeStructure,!0),h=e.getContext("campaigns")||{},p(r,h,!0),e.delContext("campaigns"),!Echo1217ATInternet.Utils.isTabOpeningAction(t.event)&&t.elem&&(n=(h=e.techClicks.manageClick(t.elem)).preservePropagation,i=h.elementType),e.manageSend(function(){e.sendHit(r,null,t.callback,null,i)}),_.name=a(_.name,t.name,""),void 0!==t.level2&&(_.level2=t.level2),s(_,t,"chapter1"),s(_,t,"chapter2"),s(_,t,"chapter3"),e.setContext("page",_),n},e.page.onDispatch=function(t,n){var i=e.getContext("page")||{},r=e.getContext("InternalSearch")||{};e.setParam("p",o(i)),void 0!==i.level2&&e.setParam("s2",i.level2),i.vrn&&(e.setParam("vrn",i.vrn),e.delContext("page","vrn")),void 0!==r.keyword&&(e.setParam("mc",Echo1217ATInternet.Utils.cloneSimpleObject(r.keyword)),void 0!==r.resultPageNumber&&e.setParam("np",Echo1217ATInternet.Utils.cloneSimpleObject(r.resultPageNumber)),e.delContext("InternalSearch")),Echo1217ATInternet.Utils.isPreview()&&e.getConfig("preview")&&e.setParam("pvw",1),u(null,i.customVars,!1),c(null,i.dynamicLabel,!1),l(null,i.tags,!1),d(null,i.customTreeStructure,!1),r=e.getContext("campaigns")||{},p(null,r,!1),e.delContext("campaigns");var a=["page"];(i=i.customObject)?e.processContextObjectAndSendHit("stc",{hitType:a,encode:!0,separator:",",truncate:!0,elementType:n},i,t):e.manageSend(function(){e.sendHit(null,[["hitType",a]],t,null,n)})}},Echo1217ATInternet.Tracker.addPlugin("Page")}.call(window),function(){window.Echo1217ATInternet.Tracker.Plugins.RichMedia=function(e){var t=function(e,t){var n=parseInt(e,10);return n?Math.max(n,t):0},n=new function(){this.media=function(){this.type=void 0,this.plyr=0,this.clnk=this.s2=void 0,this.p="",this.m9=this.m6=this.m5=this.m1=this.rfsh=this.buf=this.a=void 0},this.mediaAll={},this.setMediaValue=function(e,t,n,i){void 0!==i&&(this.mediaAll[e]=this.mediaAll[e]||{},this.mediaAll[e][t]=this.mediaAll[e][t]||new this.media,this.mediaAll[e][t][n]=i)},this.getMediaValue=function(e,t,n){if(this.mediaAll[e]&&this.mediaAll[e][t])return this.mediaAll[e][t][n]},this.removePlayer=function(e){this.mediaAll[e]={}},this.removeAll=function(){this.mediaAll={}}},i=new function(){this.timeout={},this.setTimeout=function(t,n,i){this.timeout[t]=this.timeout[t]||{},this.timeout[t][n]&&window.clearTimeout(this.timeout[t][n]),this.timeout[t][n]=window.setTimeout(function(){e.richMedia.send({action:"refresh",playerId:t,mediaLabel:n})},1e3*i)},this.setTimeoutObject=function(i,r,o){if(this.timeout[i]=this.timeout[i]||{},void 0===this.timeout[i][r]){var a,s=[];for(a in o)o.hasOwnProperty(a)&&s.push({delay:t(a,0),refresh:t(o[a],5)});s.sort(function(e,t){return e.delay<t.delay?-1:e.delay>t.delay?1:0}),this.timeout[i][r]={refreshTab:s,backupRefreshTab:Echo1217ATInternet.Utils.cloneSimpleObject(s),delayConfiguration:{}}}if(0<(o=this.timeout[i][r]).refreshTab.length&&(s=o.refreshTab[0].delay,a=o.refreshTab[0].refresh,"number"==typeof s&&"number"==typeof a&&0<a)){o.delayConfiguration[s]=o.delayConfiguration[s]||{};var u=void 0;void 0!==o.refreshTab[1]&&(u=o.refreshTab[1].delay);var c=0;void 0===u?c=1:"number"==typeof o.delayConfiguration[s].number?c="refresh"===n.getMediaValue(i,r,"a")?Math.max(o.delayConfiguration[s].number-1,0):o.delayConfiguration[s].number:"number"==typeof u&&(c=Math.floor(60*(u-s)/a)-1),o.delayConfiguration[s].number=c,o.delayConfiguration[s].timeout&&window.clearTimeout(o.delayConfiguration[s].timeout),0<c?o.delayConfiguration[s].timeout=window.setTimeout(function(){e.richMedia.send({action:"refresh",playerId:i,mediaLabel:r})},1e3*a):(o.delayConfiguration[s].number=void 0,o.delayConfiguration[s].timeout=void 0,o.refreshTab.splice(0,1),window.setTimeout(function(){e.richMedia.send({action:"refresh",playerId:i,mediaLabel:r})},1e3*a)),this.timeout[i][r]=o}},this.clearTimeout=function(e,t,n){this.timeout[e]=this.timeout[e]||{};var i=this.timeout[e][t];if("object"==typeof i){if("object"==typeof i.delayConfiguration){var r,o;for(o in i.delayConfiguration)i.delayConfiguration.hasOwnProperty(o)&&(void 0!==(r=i.delayConfiguration[o].number)&&0<r&&(i.delayConfiguration[o].timeout&&window.clearTimeout(i.delayConfiguration[o].timeout),i.delayConfiguration[o].timeout=void 0));n&&(i.refreshTab=Echo1217ATInternet.Utils.cloneSimpleObject(i.backupRefreshTab)),this.timeout[e][t]=i}}else i&&window.clearTimeout(i)},this.removePlayer=function(t){for(var i in this.timeout[t])if(this.timeout[t].hasOwnProperty(i)){this.clearTimeout(t,i,!1);var r=n.getMediaValue(t,i,"a");void 0!==this.timeout[t][i]&&"stop"!==r&&e.richMedia.send({action:"stop",playerId:t,mediaLabel:i})}this.timeout[t]={}},this.removeAll=function(){for(var e in this.timeout)this.timeout.hasOwnProperty(e)&&this.removePlayer(e);this.timeout={}}},r=function(t,n,i){return e.utils.manageChapters(t,n,3)+(t[i]?t[i]:"")},o=function(e,t,n,i){var r=e[t];return"boolean"==typeof e[t]&&(r=e[t]?i:n),r},a=function(e){var t=0;return/^(\-|\+)?([0-9]+)$/.test(e)&&(t=Number(e)),t},s=function(e,t,i,r,o){void 0!==(t=n.getMediaValue(t,i,r))&&(e[r]=o?encodeURIComponent(t):t)},u=function(e,t,n){void 0!==n&&(e[t]=n)};e.richMedia={},e.richMedia.add=function(e){var t=a((e=e||{}).playerId),i=r(e,"mediaTheme","mediaLabel"),s=o(e,"isEmbedded","int","ext");n.setMediaValue(t,i,"plyr",t),n.setMediaValue(t,i,"type",e.mediaType),n.setMediaValue(t,i,"s2",e.mediaLevel2),n.setMediaValue(t,i,"p",i),n.setMediaValue(t,i,"clnk",e.linkedContent||e.previousMedia),n.setMediaValue(t,i,"a",e.action),n.setMediaValue(t,i,"rfsh",e.refreshDuration),n.setMediaValue(t,i,"m1",e.duration),n.setMediaValue(t,i,"m5",s),n.setMediaValue(t,i,"m6",e.broadcastMode),n.setMediaValue(t,i,"m9",e.webdomain)},e.richMedia.send=function(c){var l=a((c=c||{}).playerId),d=r(c,"mediaTheme","mediaLabel"),p=c.action;n.setMediaValue(l,d,"a",p);var h={plyr:l,p:d};if(s(h,l,d,"a",!1),s(h,l,d,"type",!1),s(h,l,d,"s2",!1),s(h,l,d,"m1",!1),s(h,l,d,"m5",!1),s(h,l,d,"m6",!1),"play"===p||"info"===p){c=o(c,"isBuffering","0","1");var _=e.getContext("page")||{},f=r(_,"chapter","name")||void 0;_=_.level2||void 0;u(h,"buf",c),u(h,"prich",f),u(h,"s2rich",_),s(h,l,d,"clnk",!1),s(h,l,d,"m9",!0)}e.sendHit(h,[["hitType",["richmedia"]]],null,null,null),"pause"===p?i.clearTimeout(l,d,!1):"stop"===p&&i.clearTimeout(l,d,!0),"play"!==p&&"refresh"!==p||("object"==typeof(p=n.getMediaValue(l,d,"rfsh"))&&null!==p?i.setTimeoutObject(l,d,p):0!==(p=t(p,5))&&i.setTimeout(l,d,p))},e.richMedia.remove=function(e){i.removePlayer(e),n.removePlayer(e)},e.richMedia.removeAll=function(){i.removeAll(),n.removeAll()}},window.Echo1217ATInternet.Tracker.addPlugin("RichMedia")}.call(window),function(){Echo1217ATInternet.Tracker.Plugins.Events=function(e){var t=function(e){var t={};for(var n in e=Echo1217ATInternet.Utils.cloneSimpleObject(e),Echo1217ATInternet.Utils.object2Flatten(e,null,t,null,!0),e={},t)t.hasOwnProperty(n)&&Echo1217ATInternet.Utils.flatten2Object(e,n,t[n]);return Echo1217ATInternet.Utils.getFormattedObject(e)};e.events={},e.events.send=function(n,i,r){(r=r||{}).origin="events";var o=i;Echo1217ATInternet.Utils.isObject(i)&&(o=t(i)),e.event.send(n,o,r)},e.events.add=function(n,i){var r=i;Echo1217ATInternet.Utils.isObject(i)&&(r=t(i));for(var o=e.getContext("events")||[],a=!1,s=0;s<o.length;s++){o[s].hasOwnProperty(n),a=!0;break}a?e.event.add(n,r,"events"):e.event.set(n,r,null,"events")},e.events.onDispatch=function(t,n){e.event.onDispatch(t,n,"events")}},Echo1217ATInternet.Tracker.addPlugin("Events")}.call(window),function(){var e={hitParameter:"col",hitValue:"2"};Echo1217ATInternet.Tracker.Plugins.EventRoot=function(t){var n={},i=function(e){for(var t,n=[],i=0;i<e.length;i++)for(var r in e[i])e[i].hasOwnProperty(r)&&(t=Echo1217ATInternet.Utils.isObject(e[i][r])?Echo1217ATInternet.Utils.objectToLowercase(e[i][r]):e[i][r],n.push({name:r.toLowerCase(),data:t}));return Echo1217ATInternet.Utils.jsonSerialize(n)},r=function(e,n){var r=n||"event";t.setParam("events",i(e),{hitType:[r],encode:!0,truncate:!0,separator:","})},o=function(e,n,i){var r="",o={},a={};if(void 0!==e){o={},e.name&&(o.$=e.name);a=t.getConfig("ignoreEmptyChapterValue");for(var s="",u="",c=1;3>=c;c++)s=e[u="chapter"+c]||"",(a&&s||!a&&e.hasOwnProperty(u))&&(o[u]=s);e.url&&(o.url=e.url),a={},"string"==typeof e.level2?0<(e=Echo1217ATInternet.Utils.trim(e.level2)).length&&(isNaN(e)?a.level2=e:a.level2_id=Number(e)):"number"==typeof e.level2&&(a.level2_id=e.level2)}return e={},Echo1217ATInternet.Utils.isEmptyObject(o)||(e.page=o),Echo1217ATInternet.Utils.isEmptyObject(a)||(e.site=a),void 0!==n&&(e.src=n),void 0!==i&&(e.utm=i),Echo1217ATInternet.Utils.isEmptyObject(e)||(r=Echo1217ATInternet.Utils.jsonSerialize([{data:e}])),r},a=function(e,n,i,r){r=r||"event",""!==(e=o(e,n,i))&&t.setParam("context",e,{truncate:!0,hitType:[r],encode:!0})},s=function(e,t){return e instanceof Array&&t instanceof Array?e.concat(t):Echo1217ATInternet.Utils.isObject(e)&&Echo1217ATInternet.Utils.isObject(t)?Echo1217ATInternet.Utils.completeFstLevelObj(e,t,!0):t};t.event={},t.event.reset=function(e){e=e||"event",t.getContext(e),t.delContext(e)},t.event.send=function(e,r,a){var s=!0,u="",c="event";a&&a.origin&&(c=a.origin);var l={};l[e]=r;var d={};d[n.hitParameter]={_value:n.hitValue,_options:{multihit:!0}},e=t.getContext("page"),r=t.getContext("campaigns_events");var p=t.getContext("campaigns_utm_events");return void 0===e&&void 0===r&&void 0===p||(d.context={_value:o(e,r,p),_options:{truncate:!0,encode:!0}}),d.events={_value:i([l]),_options:{encode:!0,truncate:!0,separator:","}},Echo1217ATInternet.Utils.isPreview()&&t.getConfig("preview")&&(d.pvw=1),a&&!Echo1217ATInternet.Utils.isTabOpeningAction(a.event)&&a.elem&&(s=(l=t.techClicks.manageClick(a.elem)).preservePropagation,u=l.elementType),t.manageSend(function(){var e;a&&(e=a.callback),t.sendHit(d,[["hitType",[c]]],e,null,u)}),s},t.event.set=function(e,i,r,o){o=o||"event",t.setParam(n.hitParameter,n.hitValue,{multihit:!0,hitType:[o]}),t.dispatchSubscribe(o);for(var a=t.getContext(o)||[],u=!1,c=0;c<a.length;c++)a[c][e]&&(u=!0,r?Echo1217ATInternet.Utils.isObject(a[c][e])&&(a[c][e][r]=s(a[c][e][r],i)):a[c][e]=s(a[c][e],i));u||(u={},r?(u[e]={},u[e][r]=i):u[e]=i,a.push(u)),t.setContext(o,a)},t.event.add=function(e,n,i){i=i||"event";var r=t.getContext(i)||[],o={};o[e]=n,r.push(o),t.setContext(i,r)},t.event.onDispatch=function(e,n,i){var o=i||"event";i=t.getContext("page");var s=t.getContext("campaigns_events"),u=t.getContext("campaigns_utm_events");void 0===i&&void 0===s&&void 0===u||a(i,s,u,o),void 0!==(i=t.getContext(o))&&r(i,o),t.delContext(o),Echo1217ATInternet.Utils.isPreview()&&t.getConfig("preview")&&t.setParam("pvw",1,{hitType:[o]}),t.manageSend(function(){t.sendHit(null,[["hitType",[o]]],e,null,n)})},t.plugins.waitForDependencies(["Utils"],function(){t.configPlugin("EventRoot",e||{},function(e){n=e})})},Echo1217ATInternet.Tracker.addPlugin("EventRoot")}.call(window),"function"==typeof window.Echo1217ATInternet.onTrackerLoad&&window.Echo1217ATInternet.onTrackerLoad(),Echo1217ATInternet}.call(t,n,t,e),void 0===i||(e.exports=i)},9876:function(e,t,n){var i;void 0===(i=function(){"use strict";var e=n(3916),t=n(7950),i=n(6326),r="unknown",o="Page",a="",s="",u="unknown",c="",l="",d="unknown",p="click",h="impression";function _(){}return _.sendClickEvent=function(e,t){this._sendEvent(e,t,p)},_.sendImpressionEvent=function(e,t){this._sendEvent(e,t,h)},_._sendEvent=function(t,n,r){n||(n={});var h={onsitead_creation:this._formatEventValue(_._buildCreation(n)),onsitead_campaign:this._formatEventValue(n[e.CONTAINER]||o),onsitead_variant:this._formatEventValue(n[e.PERSONALISATION]||a),onsitead_format:this._formatEventValue(n[e.METADATA]||s),onsitead_general_placement:this._formatEventValue(n[e.BBC_COUNTER_NAME]||u),onsitead_detailed_placement:this._formatEventValue(n.user||c),onsitead_advertiser:this._formatEventValue(n[e.SOURCE]||l),onsitead_url:this._formatEventValue(n[e.RESULT]||d)};if(t){if(void 0!==n[e.IS_BACKGROUND]||void 0!==n[e.PERSONALISATION]||void 0!==n[e.METADATA]||void 0!==n[e.SOURCE]||void 0!==n[e.RESULT]){var f=r===p?"publisher.click":"publisher.display";t.events.send(f,h)}else if(void 0!==n[e.EVENT_CATEGORY]&&void 0!==n[e.EVENT_ACTION]){var E=n[e.EVENT_CATEGORY]+"."+n[e.EVENT_ACTION];t.events.send(E,n)}else i.warn("Event not sent, event_category and event_action are required.");for(var g in n)t.delParam(g)}},_._buildCreation=function(t){var n=t&&t[e.EVENT_ACTION]||r;return t&&t[e.EVENT_CATEGORY]&&(n+="~"+t[e.EVENT_CATEGORY]),n},_._formatEventValue=function(e){return t.cleanCustomVariable(e)},_}.call(t,n,t,e))||(e.exports=i)},9910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=a;var i,r=(i=n(7037))&&i.__esModule?i:{default:i};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function a(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}var s=function(e,t=0){const n=a(e,t);if(!(0,r.default)(n))throw TypeError("Stringified UUID is invalid");return n};t.default=s}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n(7143)}()});
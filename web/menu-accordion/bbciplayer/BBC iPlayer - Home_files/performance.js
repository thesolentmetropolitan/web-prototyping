/*! For license information please see performance.js.LICENSE.txt */
!function(){"use strict";var n,t,e,r,o,i=-1,a=function(n){addEventListener("pageshow",function(t){t.persisted&&(i=t.timeStamp,n(t))},!0)},c=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},u=function(){var n=c();return n&&n.activationStart||0},f=function(n,t){var e=c(),r="navigate";return i>=0?r="back-forward-cache":e&&(document.prerendering||u()>0?r="prerender":document.wasDiscarded?r="restore":e.type&&(r=e.type.replace(/_/g,"-"))),{name:n,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},s=function(n,t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var r=new PerformanceObserver(function(n){Promise.resolve().then(function(){t(n.getEntries())})});return r.observe(Object.assign({type:n,buffered:!0},e||{})),r}}catch(n){}},l=function(n,t,e,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(n,t){return n>t[1]?"poor":n>t[0]?"needs-improvement":"good"}(t.value,e),n(t))}},p=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},v=function(n){document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&n()})},d=function(n){var t=!1;return function(){t||(n(),t=!0)}},m=-1,y=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},h=function(n){"hidden"===document.visibilityState&&m>-1&&(m="visibilitychange"===n.type?n.timeStamp:0,b())},g=function(){addEventListener("visibilitychange",h,!0),addEventListener("prerenderingchange",h,!0)},b=function(){removeEventListener("visibilitychange",h,!0),removeEventListener("prerenderingchange",h,!0)},w=function(){return m<0&&(m=y(),g(),a(function(){setTimeout(function(){m=y(),g()},0)})),{get firstHiddenTime(){return m}}},T=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},E=[1800,3e3],S=function(n,t){t=t||{},T(function(){var e,r=w(),o=f("FCP"),i=s("paint",function(n){n.forEach(function(n){"first-contentful-paint"===n.name&&(i.disconnect(),n.startTime<r.firstHiddenTime&&(o.value=Math.max(n.startTime-u(),0),o.entries.push(n),e(!0)))})});i&&(e=l(n,o,E,t.reportAllChanges),a(function(r){o=f("FCP"),e=l(n,o,E,t.reportAllChanges),p(function(){o.value=performance.now()-r.timeStamp,e(!0)})}))})},O=[.1,.25],P=function(n,t){t=t||{},S(d(function(){var e,r=f("CLS",0),o=0,i=[],c=function(n){n.forEach(function(n){if(!n.hadRecentInput){var t=i[0],e=i[i.length-1];o&&n.startTime-e.startTime<1e3&&n.startTime-t.startTime<5e3?(o+=n.value,i.push(n)):(o=n.value,i=[n])}}),o>r.value&&(r.value=o,r.entries=i,e())},u=s("layout-shift",c);u&&(e=l(n,r,O,t.reportAllChanges),v(function(){c(u.takeRecords()),e(!0)}),a(function(){o=0,r=f("CLS",0),e=l(n,r,O,t.reportAllChanges),p(function(){return e()})}),setTimeout(e,0))}))},j=0,C=1/0,x=0,k=function(n){n.forEach(function(n){n.interactionId&&(C=Math.min(C,n.interactionId),x=Math.max(x,n.interactionId),j=x?(x-C)/7+1:0)})},L=function(){"interactionCount"in performance||n||(n=s("event",k,{type:"event",buffered:!0,durationThreshold:0}))},A=[],I=new Map,D=0,F=function(){return(n?j:performance.interactionCount||0)-D},N=[],_=function(n){if(N.forEach(function(t){return t(n)}),n.interactionId||"first-input"===n.entryType){var t=A[A.length-1],e=I.get(n.interactionId);if(e||A.length<10||n.duration>t.latency){if(e)n.duration>e.latency?(e.entries=[n],e.latency=n.duration):n.duration===e.latency&&n.startTime===e.entries[0].startTime&&e.entries.push(n);else{var r={id:n.interactionId,latency:n.duration,entries:[n]};I.set(r.id,r),A.push(r)}A.sort(function(n,t){return t.latency-n.latency}),A.length>10&&A.splice(10).forEach(function(n){return I.delete(n.id)})}}},M=function(n){var t=self.requestIdleCallback||self.setTimeout,e=-1;return n=d(n),"hidden"===document.visibilityState?n():(e=t(n),v(n)),e},G=[200,500],B=function(n,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},T(function(){var e;L();var r,o=f("INP"),i=function(n){M(function(){n.forEach(_);var t,e=(t=Math.min(A.length-1,Math.floor(F()/50)),A[t]);e&&e.latency!==o.value&&(o.value=e.latency,o.entries=e.entries,r())})},c=s("event",i,{durationThreshold:null!==(e=t.durationThreshold)&&void 0!==e?e:40});r=l(n,o,G,t.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),v(function(){i(c.takeRecords()),r(!0)}),a(function(){D=0,A.length=0,I.clear(),o=f("INP"),r=l(n,o,G,t.reportAllChanges)}))}))},R=[2500,4e3],H={},q=function(n,t){t=t||{},T(function(){var e,r=w(),o=f("LCP"),i=function(n){t.reportAllChanges||(n=n.slice(-1)),n.forEach(function(n){n.startTime<r.firstHiddenTime&&(o.value=Math.max(n.startTime-u(),0),o.entries=[n],e())})},c=s("largest-contentful-paint",i);if(c){e=l(n,o,R,t.reportAllChanges);var m=d(function(){H[o.id]||(i(c.takeRecords()),c.disconnect(),H[o.id]=!0,e(!0))});["keydown","click"].forEach(function(n){addEventListener(n,function(){return M(m)},!0)}),v(m),a(function(r){o=f("LCP"),e=l(n,o,R,t.reportAllChanges),p(function(){o.value=performance.now()-r.timeStamp,H[o.id]=!0,e(!0)})})}})},J=[800,1800],Y=function n(t){document.prerendering?T(function(){return n(t)}):"complete"!==document.readyState?addEventListener("load",function(){return n(t)},!0):setTimeout(t,0)},z=function(n,t){t=t||{};var e=f("TTFB"),r=l(n,e,J,t.reportAllChanges);Y(function(){var o=c();o&&(e.value=Math.max(o.responseStart-u(),0),e.entries=[o],r(!0),a(function(){e=f("TTFB",0),(r=l(n,e,J,t.reportAllChanges))(!0)}))})},K={passive:!0,capture:!0},Q=new Date,U=function(n,o){t||(t=o,e=n,r=new Date,X(removeEventListener),V())},V=function(){if(e>=0&&e<r-Q){var n={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+e};o.forEach(function(t){t(n)}),o=[]}},W=function(n){if(n.cancelable){var t=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,t){var e=function(){U(n,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",e,K),removeEventListener("pointercancel",r,K)};addEventListener("pointerup",e,K),addEventListener("pointercancel",r,K)}(t,n):U(t,n)}},X=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return n(t,W,K)})},Z=[100,300],$=function(n,r){r=r||{},T(function(){var i,c=w(),u=f("FID"),p=function(n){n.startTime<c.firstHiddenTime&&(u.value=n.processingStart-n.startTime,u.entries.push(n),i(!0))},m=function(n){n.forEach(p)},y=s("first-input",m);i=l(n,u,Z,r.reportAllChanges),y&&(v(d(function(){m(y.takeRecords()),y.disconnect()})),a(function(){var a;u=f("FID"),i=l(n,u,Z,r.reportAllChanges),o=[],e=-1,t=null,X(addEventListener),a=p,o.push(a),V()}))})};function nn(n){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nn(n)}function tn(){var n=un(),t=n.m(tn),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function r(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var o={throw:1,return:2,break:3,continue:3};function i(n){var t,e;return function(r){t||(t={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(n,t){return e(r.a,o[n],t)},delegateYield:function(n,o,i){return t.resultName=o,e(r.d,en(n),i)},finish:function(n){return e(r.f,n)}},e=function(n,e,o){r.p=t.prev,r.n=t.next;try{return n(e,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return n.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(tn=function(){return{wrap:function(t,e,r,o){return n.w(i(t),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:n.m,awrap:function(n,t){return new sn(n,t)},AsyncIterator:cn,async:function(n,t,e,o,a){return(r(t)?an:on)(i(n),t,e,o,a)},keys:rn,values:en}})()}function en(n){if(null!=n){var t=n["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length))return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}}}throw new TypeError(nn(n)+" is not iterable")}function rn(n){var t=Object(n),e=[];for(var r in t)e.unshift(r);return function n(){for(;e.length;)if((r=e.pop())in t)return n.value=r,n.done=!1,n;return n.done=!0,n}}function on(n,t,e,r,o){var i=an(n,t,e,r,o);return i.next().then(function(n){return n.done?n.value:i.next()})}function an(n,t,e,r,o){return new cn(un().w(n,t,e,r),o||Promise)}function cn(n,t){function e(r,o,i,a){try{var c=n[r](o),u=c.value;return u instanceof sn?t.resolve(u.v).then(function(n){e("next",n,i,a)},function(n){e("throw",n,i,a)}):t.resolve(u).then(function(n){c.value=n,i(c)},function(n){return e("throw",n,i,a)})}catch(n){a(n)}}var r;this.next||(fn(cn.prototype),fn(cn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),fn(this,"_invoke",function(n,o,i){function a(){return new t(function(t,r){e(n,i,t,r)})}return r=r?r.then(a,a):a()},!0)}function un(){var n,t,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var u=r&&r.prototype instanceof c?r:c,f=Object.create(u.prototype);return fn(f,"_invoke",function(e,r,o){var i,c,u,f=0,s=o||[],l=!1,p={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,e){return i=t,c=0,u=n,p.n=e,a}};function v(e,r){for(c=e,u=r,t=0;!l&&f&&!o&&t<s.length;t++){var o,i=s[t],v=p.p,d=i[2];e>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=n):i[0]<=v&&((o=e<2&&v<i[1])?(c=0,p.v=r,p.n=i[1]):v<d&&(o=e<3||i[0]>r||r>d)&&(i[4]=e,i[5]=r,p.n=d,c=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,u=d;(t=c<2?n:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),v(c,u)):p.n=u:p.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=n}else if((t=(l=p.n<0)?u:e.call(r,p))!==a)break}catch(t){i=n,c=1,u=t}finally{f=1}}return{value:t,done:l}}}(e,o,i),!0),f}var a={};function c(){}function u(){}function f(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(fn(t={},r,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function p(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,fn(n,o,"GeneratorFunction")),n.prototype=Object.create(l),n}return u.prototype=f,fn(l,"constructor",f),fn(f,"constructor",u),u.displayName="GeneratorFunction",fn(f,o,"GeneratorFunction"),fn(l),fn(l,o,"Generator"),fn(l,r,function(){return this}),fn(l,"toString",function(){return"[object Generator]"}),(un=function(){return{w:i,m:p}})()}function fn(n,t,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}fn=function(n,t,e,r){function i(t,e){fn(n,t,function(n){return this._invoke(t,e,n)})}t?o?o(n,t,{value:e,enumerable:!r,configurable:!r,writable:!r}):n[t]=e:(i("next",0),i("throw",1),i("return",2))},fn(n,t,e,r)}function sn(n,t){this.v=n,this.k=t}function ln(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function pn(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(e),!0).forEach(function(t){vn(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ln(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function vn(n,t,e){return(t=function(n){var t=function(n){if("object"!=nn(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,"string");if("object"!=nn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==nn(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function dn(n,t,e,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void e(n)}c.done?t(u):Promise.resolve(u).then(r,o)}function mn(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(n){dn(i,r,o,a,c,"next",n)}function c(n){dn(i,r,o,a,c,"throw",n)}a(void 0)})}}var yn,hn=Date.now(),gn="https://default.bbc-reporting-api.app/report-endpoint",bn=Math.random()<=.1,wn=document.currentScript.getAttribute("data-release");(yn=mn(tn().mark(function n(){var t,e,r;return tn().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.bbcuser.allowsPerformanceCookies();case 2:t=n.sent,gn&&navigator.sendBeacon&&bn&&t&&(e={cls:null,fid:null,inp:null,lcp:null,fcp:null,ttfb:null},P(r=function(n){var t=n.name,r=n.value,o=t.toLowerCase();e[o]=r},!0),$(r),B(r),q(r,!0),S(r),z(r),window.addEventListener("pagehide",mn(tn().mark(function n(){var t,r,o,i,a,c,u;return tn().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.bbcpage.getDestination();case 2:return t=n.sent,n.next=5,window.bbcpage.getContentType();case 5:r=n.sent,o=document.documentElement.className.includes("b-reith-sans-font")?"1":"0",i="".concat(gn,"?platform=orbit-").concat(wn,"&owner=").concat(t,"&pageType=").concat(r,"&reith=").concat(o),a=[{type:"web-vitals",url:window.location.href,age:Date.now()-hn,body:pn({},e)}],c=JSON.stringify(a),u=new Blob([c],{type:"application/reports+json"}),navigator.sendBeacon(i,u);case 13:case"end":return n.stop()}},n)}))));case 4:case"end":return n.stop()}},n)})),function(){return yn.apply(this,arguments)})()}();
//# sourceMappingURL=performance.js.map